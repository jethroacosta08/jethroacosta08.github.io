define("file-viewer/assets-metaserver",["require","exports","modules/clean/static_urls"],function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assets={"2NQat":r.static_url("/static/js/file-viewer/img/error/unavailable_1x-vflG2AHMd.png"),"1M0Da":r.static_url("/static/js/file-viewer/img/error/unavailable_2x-vflGPrE5d.png"),"3_SVR":r.static_url("/static/js/file-viewer/img/error/file_too_large_1x-vflDGNPuo.png"),"1KZOf":r.static_url("/static/js/file-viewer/img/error/file_too_large_2x-vfl-r0UPt.png"),d7hcI:r.static_url("/static/js/file-viewer/img/error/file_uploading_1x-vflRuLSg0.png"),"1WylU":r.static_url("/static/js/file-viewer/img/error/file_uploading_2x-vflKOdrWj.png"),"1j0Ik":r.static_url("/static/js/file-viewer/img/error/filetype_not_supported_1x-vflmIVODZ.png"),"3afH2":r.static_url("/static/js/file-viewer/img/error/filetype_not_supported_2x-vflE8HW8X.png"),"32YjM":r.static_url("/static/js/file-viewer/img/error/password_protected_1x-vflnFAKjt.png"),"29R06":r.static_url("/static/js/file-viewer/img/error/password_protected_2x-vflnBXZ1k.png")}}),define("file-viewer/core/bootstrap",["require","exports","tslib","redux","file-viewer/core/data/reducer","file-viewer/core/data/actions","file-viewer/core/urls","file-viewer/core/uuid","modules/clean/api_v2/redux/previews","file-viewer/core/middlewares/riviera_data","file-viewer/core/utils","file-viewer/core/config","file-viewer/core/middlewares/analytics","file-viewer/core/middlewares/ui_action_redispatcher","file-viewer/core/middlewares/local_cache_data","modules/clean/api_v2/redux/users","file-viewer/core/middlewares/navigation","file-viewer/core/invariant","file-viewer/core/middlewares/native_apps","file-viewer/core/errors","file-viewer/core/middlewares/network_state"],function(e,t,r,i,n,a,o,s,l,c,u,d,p,f,v,_,m,g,w,b,h){"use strict";function y(e){var t=e.id||s.v4(),i=e.store,n=e.intl,c=e.config,u=e.resolveAsset,d=e.deviceType,p=void 0===d?"desktop":d;return i.dispatch(a.initializeFileViewer({fileViewerId:t,deviceType:p})),i.dispatch(_.getCurrentAccountAction({arg:void 0})),{id:t,getPlatformProps:function(){return{intl:n,store:i,config:c,resolveAsset:u,accountId:e.accountId,deviceType:e.deviceType||"desktop"}},setCurrentFileInfo:function(e){i.dispatch(a.setCurrentFilePreview({fileViewerId:t,fileInfo:e}))},resolveFilePreview:function(e){return r.__awaiter(this,void 0,void 0,function(){return r.__generator(this,function(r){switch(r.label){case 0:return g.invariant(!(!e.url&&!e.file_id),b.FVErrorCode.InvalidFileInfo,"You have to either provide a file ID or shared link url to fetch the preview data"),[4,i.dispatch(l.getPreviewDataBatchAction({arg:{files:[{url:e.url,file_id:e.file_id}]},params:{}},{fileViewerId:t}))];case 1:return r.sent(),[2]}})})},loadPreviewMetadata:function(){return r.__awaiter(this,void 0,void 0,function(){var e,n,s,l,c,u;return r.__generator(this,function(r){switch(r.label){case 0:if(e=i.getState().currentFileInfo[t].file_id,i.dispatch(a.fetchNativeApps({fileId:e})),n=i.getState().previewData[e],!n||!n.content)throw new b.FVError(b.FVErrorCode.MalformedPreviewsDataApiResponse,"Missing `content` from preview data api payload");switch(s=[],n.content[".tag"]){case"ssr_doc":case"cloud_doc":l=n.content,c=l.text_url_tmpl,u=l.image_url_tmpl,g.invariant(!(!c&&!u),b.FVErrorCode.MissingContentMetadata,"Content metadata is not present"),null!=c&&null!=u&&(s.push(i.dispatch(a.fetchPageDataWithMetadata({fileIdOrRevisionId:e,textUrlTmpl:c,startPage:0,endPage:50}))),i.dispatch(a.prewarmUnifiedPreviewAsset(o.imageUrl(u,{page:0,scale_percent:0}))))}return[4,Promise.all(s)];case 1:return r.sent(),[2]}})})}}}function F(e){var t=e.middlewares,a=void 0===t?[]:t,o=e.initialState,s=e.additionalReducers,l=void 0===s?{}:s,c="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__?i.compose(i.applyMiddleware.apply(void 0,a),window.__REDUX_DEVTOOLS_EXTENSION__()):i.applyMiddleware.apply(void 0,a),u=r.__assign({},n.reducers,l);return i.createStore(i.combineReducers(u),o,c)}function S(e){var t=e.additionalMiddlewares,i=void 0===t?[]:t,n=e.initialState,a=e.additionalReducers,o=void 0===a?{}:a,s=e.assets,g=e.intl,b=e.logger,S=(e.nativeAppsIOClient?[w.middleware(e.nativeAppsIOClient)]:[]).concat(e.localCacheClient?[v.localCacheMiddleware(e.localCacheClient)]:[],e.navigationClient?[m.middleware(e.navigationClient)]:[],e.networkStateClient?[h.middleware(e.networkStateClient)]:[],[c.rivieraDataMiddleware(e.rivieraIOClient),l.middleware(e.apiv2ClientBase.ns("previews")),_.middleware(e.apiv2ClientBase.ns("users")),f.uiActionRedispatcher],i,b?[p.analyticsMiddleware(b)]:[]),P=F({middlewares:S,initialState:n,additionalReducers:o}),A=d.DEFAULT_CONFIG;return e.config&&(A=r.__assign({},A,e.config)),{createFileViewer:function(t){return y({id:t,intl:g,store:P,config:A,resolveAsset:u.resolveAsset.bind(null,s),accountId:e.accountId,deviceType:e.deviceType})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.createSDKStore=F,t.createFileViewerSDK=S}),define("file-viewer/core/config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CONFIG={pdf_size_limit:524288e3,ppt_size_limit:301989888,word_doc_size_limit:167772160,archive_size_limit:1073741824,text_size_limit:8388608,linkfile_size_limit:10240,annotations:!1,load_image_only:!1,file_flipping:!1,keyboard_shortcuts:!1,slack_integration:!1,zoom_integration:!1,cloud_doc_previews:!1,show_offline_errors:!1}}),define("file-viewer/core/constants",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_IMG_SCALE_FACTOR=16,t.MIN_IMG_SCALE_FACTOR=.01,t.IMG_ZOOM_MULTIPLIER=1.25,t.MAX_DOC_SCALE_FACTOR=10,t.MIN_DOC_SCALE_FACTOR=.1,t.DOC_ZOOM_MULTIPLIER=1.1,t.ZOOM_PERCENT_DELTA=.05}),define("file-viewer/core/data/actions",["require","exports"],function(e,t){"use strict";function r(e){return{payload:e,type:"@@previews/fetchPageDataWithMetadata"}}function i(e,t){return{type:"@@previews/fetchPageDataWithMetadataResult",payload:e,error:t}}function n(e){return{payload:e,type:"@@previews/refreshBlob"}}function a(e){return{payload:e,type:"@@previews/refreshBlobSuccess"}}function o(e){return{type:"@@previews/fetchUnifiedPreviewAsset",payload:{assetUrl:e}}}function s(e){return{type:"@@previews/updateDocCurrentPageIndex",payload:e}}function l(e){return{type:"@@previews/zoomIn",payload:e}}function c(e){return{type:"@@previews/zoomOut",payload:e}}function u(e){return{type:"@@previews/updateFitScaleFactor",payload:e}}function d(e){return{type:"@@previews/zoomOriginalOrFit",payload:e}}function p(e){return{type:"@@previews/initializeFilePreview",payload:e}}function f(e){return{type:"@@previews/initializeFilePreviewSession",payload:e}}function v(e){return{type:"@@previews/fileViewerUi/openDocSidebar",payload:e}}function _(e){return{type:"@@previews/fileViewerUi/closeDocSidebar",payload:e}}function m(e){return{type:"@@previews/setCurrentFilePreview",payload:e}}function g(e){return{type:"@@previews/updateScaleFactor",payload:e}}function w(e){return{type:"@@previews/pageDown",payload:e}}function b(e){return{type:"@@previews/pageUp",payload:e}}function h(e){return{type:"@@previews/setInitialFocus",payload:e}}function y(e){return{type:"@@previews/modes/changeMode",payload:e}}function F(e){return{payload:e,type:"@@previews/sidebarControlClick"}}function S(e){return{payload:e,type:"@@previews/setSidebarVisibility"}}function P(e){return{type:"@@previews/share",payload:e}}function A(e){return{type:"@@previews/openWith",payload:e}}function C(e){return{type:"@@previews/fetchNativeApps",payload:e}}function E(e){return{type:"@@previews/fetchNativeAppsResult",payload:e}}function I(e){return{type:"@@previews/initializeFileViewer",payload:e}}function x(e){return{type:"@@previews/pushSidebarPane",payload:e}}function M(e){return{type:"@@previews/popSidebarPane",payload:e}}function O(e){return{type:"@@previews/openWebPreview",payload:e}}function D(e){return{type:"@@previews/openUrl",payload:e}}function T(e){return{type:"@@previews/navigation/flipToNextFile",payload:e}}function R(e){return{type:"@@previews/navigation/flipToPreviousFile",payload:e}}function k(e){return{type:"@@previews/setFileMetadata",payload:e}}function U(e){return{type:"@@previews/openFullscreenPreview",payload:e}}function V(e){return{type:"@@previews/openContainingFolder",payload:e}}function L(e){return{type:"@@previews/setNetworkState",payload:e}}function N(){return{type:"@@previews/subscribeNetworkState",payload:{}}}function B(){return{type:"@@previews/unsubscribeNetworkState",payload:{}}}function j(e){return{type:"@@previews/setBootstrappedFileId",payload:e}}Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.ChangeMode="@@previews/modes/changeMode",e.CloseDocSidebar="@@previews/fileViewerUi/closeDocSidebar",e.FetchPageDataWithMetadata="@@previews/fetchPageDataWithMetadata",e.FetchPageDataWithMetadataResult="@@previews/fetchPageDataWithMetadataResult",e.FetchPhotoMetadataResult="@@previews/fetchPhotoMetadataResult",e.FlipToNextFile="@@previews/navigation/flipToNextFile",e.FlipToPreviousFile="@@previews/navigation/flipToPreviousFile",e.InitializeFilePreview="@@previews/initializeFilePreview",e.OpenDocSidebar="@@previews/fileViewerUi/openDocSidebar",e.PageDown="@@previews/pageDown",e.PageUp="@@previews/pageUp",e.PrewarmUnifiedPreviewAsset="@@previews/fetchUnifiedPreviewAsset",e.RefreshBlob="@@previews/refreshBlob",e.RefreshBlobSuccess="@@previews/refreshBlobSuccess",e.SetCurrentFilePreview="@@previews/setCurrentFilePreview",e.SetInitialFocus="@@previews/setInitialFocus",e.UpdateDocCurrentPageIndex="@@previews/updateDocCurrentPageIndex",e.UpdateFitScaleFactor="@@previews/updateFitScaleFactor",e.UpdateScaleFactor="@@previews/updateScaleFactor",e.ZoomIn="@@previews/zoomIn",e.ZoomOriginalOrFit="@@previews/zoomOriginalOrFit",e.ZoomOut="@@previews/zoomOut",e.SidebarControlClick="@@previews/sidebarControlClick",e.SetSidebarVisibility="@@previews/setSidebarVisibility",e.Share="@@previews/share",e.OpenWith="@@previews/openWith",e.OpenWebPreview="@@previews/openWebPreview",e.OpenUrl="@@previews/openUrl",e.FetchNativeApps="@@previews/fetchNativeApps",e.FetchNativeAppsResult="@@previews/fetchNativeAppsResult",e.InitializeFilePreviewSession="@@previews/initializeFilePreviewSession",e.InitializeFileViewer="@@previews/initializeFileViewer",e.PushSidebarPane="@@previews/pushSidebarPane",e.PopSidebarPane="@@previews/popSidebarPane",e.SetFileMetadata="@@previews/setFileMetadata",e.OpenFullscreenPreview="@@previews/openFullscreenPreview",e.OpenContainingFolder="@@previews/openContainingFolder",e.SetNetworkState="@@previews/setNetworkState",e.SubscribeNetworkState="@@previews/subscribeNetworkState",e.UnsubscribeNetworkState="@@previews/unsubscribeNetworkState",e.SetBootstrappedFileId="@@previews/setBootstrappedFileId"})(t.Action||(t.Action={})),t.fetchPageDataWithMetadata=r,t.fetchPageDataWithMetadataResult=i,t.refreshBlobAction=n,t.refreshBlobSuccessAction=a,t.prewarmUnifiedPreviewAsset=o,t.updateDocCurrentPageIndex=s,t.zoomIn=l,t.zoomOut=c,t.updateFitScaleFactor=u,t.zoomOriginalOrFit=d,t.initializeFilePreview=p,t.initializeFilePreviewSession=f,t.openDocSidebar=v,t.closeDocSidebar=_,t.setCurrentFilePreview=m,t.updateScaleFactor=g,t.pageDown=w,t.pageUp=b,t.setInitialFocus=h,t.changeMode=y,t.sidebarControlClickAction=F,t.setSidebarVisibilityAction=S,t.shareAction=P,t.openWith=A,t.fetchNativeApps=C,t.fetchNativeAppsResult=E,t.initializeFileViewer=I,t.pushSidebarPane=x,t.popSidebarPane=M,t.openWebPreview=O,t.openUrl=D,t.flipToNextFile=T,t.flipToPreviousFile=R,t.setFileMetadata=k,t.openFullscreenPreview=U,t.openContainingFolder=V,t.setNetworkConnectivityState=L,t.subscribeNetworkState=N,t.unsubscribeNetworkState=B,t.setBootstrappedFileId=j}),define("file-viewer/core/data/models",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.Archive="archive",e.Audio="audio",e.CloudDoc="cloud_doc",e.Excel="excel",e.Error="error",e.HTML="html",e.Image="image",e.Linkfile="linkfile",e.Other="other",e.SsrDoc="ssr_doc",e.RawHTML="raw_html",e.Restricted="restricted",e.Video="video",e.Doc="doc",e.Photo="photo",e.Text="text"})(t.PreviewType||(t.PreviewType={}))}),define("file-viewer/core/data/modes/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.Closed="closed",e.Open="open"})(t.SidebarVisibility||(t.SidebarVisibility={})),(function(e){e.White="white",e.Chalk="chalk"})(t.SidebarColor||(t.SidebarColor={})),(function(e){e.Documentation="documentation",e.Comments="comments",e.Watermarking="watermarking",e.Zoom="zoom",e.Slack="slack"})(t.SidebarControlId||(t.SidebarControlId={})),(function(e){e.Documentation="documentation",e.Metadata="metadata",e.Comments="comments",e.Activity="activity",e.Watermarking="watermarking",e.Zoom="zoom",e.ZoomCreateMeeting="zoom_create_meeting",e.ZoomMeetingDetail="zoom_meeting_detail",e.SlackHome="slack_home"})(t.SidebarPaneId||(t.SidebarPaneId={})),(function(e){e.Default="default",e.Commenting="commenting",e.Documentation="documentation",e.Watermarking="watermarking",e.Zoom="zoom",e.Slack="slack"})(t.FileViewerMode||(t.FileViewerMode={}))}),define("file-viewer/core/data/reducer",["require","exports","tslib","file-viewer/core/logging/session","file-viewer/core/data/modes/types","file-viewer/core/extension_constants","file-viewer/core/uuid","file-viewer/core/constants"],function(e,t,r,i,n,a,o,s){"use strict";function l(e,t){if(1===t||!e)return 1;var r=Math.round(e*t/s.ZOOM_PERCENT_DELTA)*s.ZOOM_PERCENT_DELTA;return Math.abs(r-e)<s.ZOOM_PERCENT_DELTA&&(r+=t>1?s.ZOOM_PERCENT_DELTA:-s.ZOOM_PERCENT_DELTA),Math.min(Math.max(r,s.MIN_IMG_SCALE_FACTOR),s.MAX_IMG_SCALE_FACTOR)}function c(e,t){return Math.max(Math.min(e*t,s.MAX_DOC_SCALE_FACTOR),s.MIN_DOC_SCALE_FACTOR)}Object.defineProperty(t,"__esModule",{value:!0});var u;t.DEFAULT_USER={locale:"en",referral_link:"",is_paired:!1,account_type:{".tag":"basic"},uid:0,user_name:"",root_info:{".tag":"user"},is_deferred_password:!1,is_deferred_password_set:!1,is_business_domain:!1,is_paid:!1,uses_apple_relay_email:!1,has_ever_linked_desktop:!1,has_user_added_files:!1,video_uploads_enabled_default:!1,email_verified:!1,visibility_quota_info:{normal:0,shared:0,quota:0},pending_forced_migration:!1,referral_bonus_info:{bonus_space:0,max_num_bonus:0},quota_info:{normal:0,shared:0,quota:0},account_id:"",disabled:!1,email:"",role:"",teams_member:!1,name:{given_name:"Guest",surname:"",display_name:"Guest",familiar_name:"",abbreviated_name:"G"}};var d={visibility:n.SidebarVisibility.Closed,paneStack:[]};t.DEFAULT_MODE={mode:n.FileViewerMode.Default,sidebar:d},t.DEFAULT_STATE={previewData:{},fileMetadata:{},rivieraData:{},filePreviewUi:{},fileViewerUi:{},currentFileInfo:{},loggingSession:{},users:{},currentUser:t.DEFAULT_USER,modes:{},nativeApps:{},networkConnectivity:{isOffline:!1}},t.DEFAULT_FILE_PREVIEW_UI={fitScaleFactor:0,currentPageIndex:0,isSidebarOpen:!1},t.DEFAULT_FILE_VIEWER_UI={isDocSidebarOpen:!0};var p=function(e,i){void 0===e&&(e=t.DEFAULT_STATE.previewData);var n,a;switch(i.type){case"@@previews/initializeFilePreview":return e[i.payload.fileInfo.file_id]?e:r.__assign({},e,(n={},n[i.payload.fileInfo.file_id]={},n));case"@@apiv2_redux/previews/get_preview_data_batch_result":if(!i.payload||!i.payload.result)return e;var o=i.payload.result.results;return r.__assign({},e,o.reduce(function(e,t){var r=t.file.file_id;if(null==r)throw Error("Invalid response: file_id must be present in FileInfo for get_preview_data_batch");return t.preview&&(e[r]=t.preview),e},{}));case"@@previews/refreshBlobSuccess":if(!i.payload)return e;var s=i.payload,l=s.fileIdOrRevisionId,c=s.preview,u=e[l]?e[l].content:{};return r.__assign({},e,(a={},a[l]=r.__assign({},e[l],{content:r.__assign({},u,c)}),a))}return e},f=function(e,i){void 0===e&&(e=t.DEFAULT_STATE.fileMetadata);var n,a;if(!i.payload)return e;if("@@previews/initializeFilePreview"===i.type){var o=i.payload.fileInfo.file_id;return r.__assign({},e,(n={},n[o]=r.__assign({},e[o],{file_id:o,file_name:i.payload.fileName}),n))}return"@@previews/setFileMetadata"===i.type?r.__assign({},e,(a={},a[i.payload.file_id]=i.payload,a)):e};t.DEFAULT_DOC_PREVIEW_METADATA={metadata:{page_count:0,dimensions:[[0,0,0]]},pages:[]};var v=function(e,i){void 0===e&&(e=t.DEFAULT_STATE.rivieraData);var n,a,o,s,l=i.payload,c=i.error;if(!l)return e;var u;switch(i.type){case"@@previews/initializeFilePreview":var d=i.payload.fileInfo.file_id;return e[d]?e:r.__assign({},e,(n={},n[d]={},n));case"@@previews/fetchPhotoMetadataResult":return r.__assign({},e,(a={},a[i.payload.fileIdOrRevisionId]={originalWidth:i.payload.originalWidth,originalHeight:i.payload.originalHeight},a));case"@@previews/fetchPageDataWithMetadataResult":u=i.payload.fileIdOrRevisionId;var p=(e[u]||t.DEFAULT_DOC_PREVIEW_METADATA).pages;if(c)return p&&p.length?e:r.__assign({},e,(o={},o[u]=r.__assign({},t.DEFAULT_DOC_PREVIEW_METADATA,{error:c}),o));if(i.payload&&i.payload.data){var f=i.payload.data,v=f.metadata,_=f.pages;if(!v)return e;var m=p||new Array(v.page_count);return Array.isArray(_)&&_.length&&(m=m.slice(),_.forEach(function(e){return m[e.pageIndex]=r.__assign({},m[e.pageIndex],e)})),r.__assign({},e,(s={},s[u]={metadata:v,pages:m},s))}}return e},_=function(e,i){void 0===e&&(e=t.DEFAULT_STATE.filePreviewUi);var n,o,u,d,p,f,v,_,m,g,w,b,h,y,F,S,P;if(!i.payload)return e;if("@@previews/initializeFileViewer"===i.type)return r.__assign({},e,(n={},n[i.payload.fileViewerId]={},n));var A="@@previews/initializeFilePreview"===i.type?i.payload.fileInfo.file_id:i.payload.fileIdOrRevisionId,C=i.payload.fileViewerId,E=e[C]||{},I=E[A]||{},x=I.zoomScaleFactor||I.fitScaleFactor;switch(i.type){case"@@previews/initializeFilePreview":return r.__assign({},e,(o={},o[C]=r.__assign({},E,(u={},u[A]=r.__assign({},t.DEFAULT_FILE_PREVIEW_UI,I,{isDocSidebarOpen:a.PRESENTATION_EXTS.includes(i.payload.fileExtension)}),u)),o));case"@@previews/updateDocCurrentPageIndex":var M=i.payload,O=M.pageIndex,D=M.pageCount;return O<0?O=0:D&&O>=D-1&&(O=D-1),r.__assign({},e,(d={},d[C]=r.__assign({},E,(p={},p[A]=r.__assign({},I,{currentPageIndex:O}),p)),d));case"@@previews/pageUp":return r.__assign({},e,(f={},f[C]=r.__assign({},E,(v={},v[A]=r.__assign({},I,{currentPageIndex:Math.max(I.currentPageIndex-1,0)}),v)),f));case"@@previews/pageDown":return r.__assign({},e,(_={},_[C]=r.__assign({},E,(m={},m[A]=r.__assign({},I,{currentPageIndex:Math.min(I.currentPageIndex+1,i.payload.pageCount||1)}),m)),_));case"@@previews/zoomIn":return r.__assign({},e,(g={},g[C]=r.__assign({},E,(w={},w[A]=r.__assign({},I,{zoomScaleFactor:"ssr_doc"===i.payload.previewType?c(x,s.DOC_ZOOM_MULTIPLIER):l(x,s.IMG_ZOOM_MULTIPLIER)}),w)),g));case"@@previews/zoomOut":return r.__assign({},e,(b={},b[C]=r.__assign({},E,(h={},h[A]=r.__assign({},I,{zoomScaleFactor:"ssr_doc"===i.payload.previewType?c(x,1/s.DOC_ZOOM_MULTIPLIER):l(x,1/s.IMG_ZOOM_MULTIPLIER)}),h)),b));case"@@previews/zoomOriginalOrFit":return r.__assign({},e,(y={},y[C]=r.__assign({},E,(F={},F[A]=r.__assign({},I,{zoomScaleFactor:x===I.fitScaleFactor?1:void 0}),F)),y));case"@@previews/updateFitScaleFactor":return I.fitScaleFactor===i.payload.fitScaleFactor?e:r.__assign({},e,(S={},S[C]=r.__assign({},E,(P={},P[A]=r.__assign({},I,{fitScaleFactor:i.payload.fitScaleFactor}),P)),S))}return e};t.loggingSessionReducer=function(e,n){void 0===e&&(e=t.DEFAULT_STATE.loggingSession);var a,s,l;if("@@previews/initializeFilePreviewSession"===n.type){var c=n.payload,u=c.fileViewerId,d=c.sourceSession;return r.__assign({},e,(a={},a[u]=i.createFilePreviewSession({file_viewer_session_id:n.payload.fileViewerId,file_preview_session_id:o.v4(),file_id:n.payload.fileId,device_type:n.payload.deviceType,file_extension:n.payload.fileExtension,extra:d}),a))}if("@@previews/updateSession"===n.type)return r.__assign({},e,(s={},s[n.payload.file_viewer_session_id]=n.payload,s));if("@@previews/initializeFilePreview"===n.type){var p=n.payload,u=p.fileViewerId,f=p.fileInfo;return r.__assign({},e,(l={},l[u]=r.__assign({},e[u],{file_id:f.file_id,ns_id:f.ns_id}),l))}return e},t.currentFileInfoReducer=function(e,i){void 0===e&&(e=t.DEFAULT_STATE.currentFileInfo);var n,a;switch(i.type){case"@@previews/setCurrentFilePreview":return r.__assign({},e,(n={},n[i.payload.fileViewerId]=r.__assign({fileId:"0"},i.payload.fileInfo,{bootstrapped:!1}),n));case"@@apiv2_redux/previews/get_preview_data_batch_result":if(i.payload.result){for(var o={},s=0,l=Object.keys(e);s<l.length;s++)for(var c=l[s],u=e[c],d=0,p=i.payload.result.results;d<p.length;d++){var f=p[d];f.file.url!==u.url&&f.file.file_id!==u.file_id||(o[c]=r.__assign({},f.file,{bootstrapped:!1}))}if(Object.keys(o).length>0)return r.__assign({},e,o)}return e;case"@@previews/setBootstrappedFileId":if(e[i.payload.fileViewerId].file_id===i.payload.fileId)return r.__assign({},e,(a={},a[i.payload.fileViewerId]=r.__assign({},e[i.payload.fileViewerId],{bootstrapped:!0}),a));default:return e}};var m=function(e,r){return void 0===e&&(e=t.DEFAULT_STATE.currentUser),"@@apiv2_redux/users/get_current_account_result"===r.type&&r.payload.result?r.payload.result:e};t.usersReducer=function(e,i){return void 0===e&&(e=t.DEFAULT_STATE.users),"@@apiv2_redux/users/get_account_batch_result"===i.type&&i.payload.result?r.__assign({},e,i.payload.result.reduce(function(e,t){return e[t.account_id]=t,e},{})):e};var g=function(e){return r.__assign({},e,{sidebar:r.__assign({},e.sidebar,{visibility:e.sidebar.visibility===n.SidebarVisibility.Open?n.SidebarVisibility.Closed:n.SidebarVisibility.Open})})},w=(u={},u[n.FileViewerMode.Default]=function(e){return e.mode===n.FileViewerMode.Default?e:r.__assign({},e,{mode:n.FileViewerMode.Default})},u[n.FileViewerMode.Documentation]=function(e){return e.mode===n.FileViewerMode.Documentation?g(e):r.__assign({},e,{mode:n.FileViewerMode.Documentation,sidebar:r.__assign({},e.sidebar,{paneStack:[n.SidebarPaneId.Documentation],selectedControlId:n.SidebarControlId.Documentation,visibility:n.SidebarVisibility.Open})})},u[n.FileViewerMode.Commenting]=function(e){return e.mode===n.FileViewerMode.Commenting?g(e):r.__assign({},e,{mode:n.FileViewerMode.Commenting,sidebar:r.__assign({},e.sidebar,{paneStack:[n.SidebarPaneId.Comments],selectedControlId:n.SidebarControlId.Comments,visibility:n.SidebarVisibility.Open})})},u[n.FileViewerMode.Watermarking]=function(e){return e.mode===n.FileViewerMode.Watermarking?g(e):r.__assign({},e,{mode:n.FileViewerMode.Watermarking,sidebar:r.__assign({},e.sidebar,{paneStack:[n.SidebarPaneId.Watermarking],selectedControlId:n.SidebarControlId.Watermarking,visibility:n.SidebarVisibility.Open})})},u[n.FileViewerMode.Zoom]=function(e){return e.mode===n.FileViewerMode.Zoom?g(e):r.__assign({},e,{mode:n.FileViewerMode.Zoom,sidebar:r.__assign({},e.sidebar,{paneStack:[n.SidebarPaneId.Zoom],selectedControlId:n.SidebarControlId.Zoom,visibility:n.SidebarVisibility.Open})})},u[n.FileViewerMode.Slack]=function(e){return e.mode===n.FileViewerMode.Slack?g(e):r.__assign({},e,{mode:n.FileViewerMode.Slack,sidebar:r.__assign({},e.sidebar,{paneStack:[n.SidebarPaneId.SlackHome],selectedControlId:n.SidebarControlId.Slack,visibility:n.SidebarVisibility.Open})})},u);t.modesReducer=function(e,i){void 0===e&&(e=t.DEFAULT_STATE.modes);var n,a,o,s,l,c;switch(i.type){case"@@previews/initializeFileViewer":return r.__assign({},e,(n={},n[i.payload.fileViewerId]=t.DEFAULT_MODE,n));case"@@previews/setInitialFocus":return r.__assign({},e,(a={},a[i.payload.fileViewerId]=w[i.payload.mode](t.DEFAULT_MODE),a));case"@@previews/setSidebarVisibility":var u=i.payload,d=u.fileViewerId,p=u.visibility;return r.__assign({},e,(o={},o[d]=r.__assign({},e[d],{sidebar:r.__assign({},e[d].sidebar,{visibility:p})}),o));case"@@previews/modes/changeMode":var f=w[i.payload.mode](e[i.payload.fileViewerId]);return f!==e[i.payload.fileViewerId]?r.__assign({},e,(s={},s[i.payload.fileViewerId]=f,s)):e;case"@@previews/pushSidebarPane":var v=i.payload,d=v.fileViewerId,_=v.paneId,m=e[d]||t.DEFAULT_MODE,g=m.sidebar.paneStack;return g.includes(_)?e:r.__assign({},e,(l={},l[d]=r.__assign({},m,{sidebar:r.__assign({},m.sidebar,{paneStack:g.concat([_])})}),l));case"@@previews/popSidebarPane":var d=i.payload.fileViewerId,m=e[d]||t.DEFAULT_MODE,g=m.sidebar.paneStack;return 0===g.length?e:r.__assign({},e,(c={},c[d]=r.__assign({},m,{sidebar:r.__assign({},m.sidebar,{paneStack:g.slice(0,-1)})}),c));default:return e}};var b=function(e,i){void 0===e&&(e=t.DEFAULT_STATE.nativeApps);var n,a;return"@@previews/initializeFilePreview"===i.type?r.__assign({},e,(n={},n[i.payload.fileInfo.file_id]={apps:[]},n)):"@@previews/fetchNativeAppsResult"===i.type?r.__assign({},e,(a={},a[i.payload.fileId]=i.payload.result,a)):e},h=function(e,r){return void 0===e&&(e=t.DEFAULT_STATE.networkConnectivity),"@@previews/setNetworkState"===r.type?{isOffline:r.payload.isOffline}:e},y=function(e,i){void 0===e&&(e=t.DEFAULT_STATE.fileViewerUi);var n,a,o;if(!i.payload)return e;var s=i.payload.fileViewerId,l=e[s]||{};switch(i.type){case"@@previews/initializeFileViewer":return r.__assign({},e,(n={},n[s]={isDocSidebarOpen:!0},n));case"@@previews/fileViewerUi/openDocSidebar":return r.__assign({},e,(a={},a[s]=r.__assign({},l,{isDocSidebarOpen:!0}),a));case"@@previews/fileViewerUi/closeDocSidebar":return r.__assign({},e,(o={},o[s]=r.__assign({},l,{isDocSidebarOpen:!1}),o));default:return e}};t.reducers={modes:t.modesReducer,previewData:p,fileMetadata:f,rivieraData:v,filePreviewUi:_,fileViewerUi:y,loggingSession:t.loggingSessionReducer,currentFileInfo:t.currentFileInfoReducer,users:t.usersReducer,currentUser:m,nativeApps:b,networkConnectivity:h}}),define("file-viewer/core/data/riviera/api",["require","exports","tslib"],function(e,t,r){"use strict";function i(e,t,r){return 401===e&&r?new a("Password required",12):new a("Load Error",t.rivieraStatusCode)}function n(e,t,r,i,n){void 0===r&&(r=0),void 0===i&&(i=50),void 0===n&&(n=!1);var a=new URL(e);return t&&a.searchParams.set("metadata","1"),void 0!==r&&(a.searchParams.set("text","1"),a.searchParams.set("page_start",r.toString()),a.searchParams.set("page_end",i.toString())),n&&a.searchParams.set("canned_file_name","spdf/audi.pdf.json"),a.toString()}Object.defineProperty(t,"__esModule",{value:!0});var a=(function(e){function t(t,r){void 0===r&&(r=0);var i=e.call(this,t)||this;return i.statusCode=r,i}return r.__extends(t,e),t})(Error);t.RivieraError=a;var o=function(e){var t={};try{e&&(t=JSON.parse(e))}catch(e){}return t};t.textUrl=n;var s=(function(){function e(){}return e.prototype.refreshDocBlob=function(e,t){return r.__awaiter(this,void 0,void 0,function(){var i,n,a;return r.__generator(this,function(r){switch(r.label){case 0:return i=t?{password:t}:{},[4,fetch(e,{headers:{"content-type":"application/json"},body:JSON.stringify(i),credentials:"include",method:"POST"})];case 1:return n=r.sent(),[4,n.json()];case 2:return a=r.sent(),[2,{ok:n.ok,status:n.status,data:a,headers:{"x-dropbox-metadata":n.headers.get("x-dropbox-metadata"),"x-dropbox-pdf-password-needed":n.headers.get("x-dropbox-pdf-password-needed")}}]}})})},e.prototype.fetchDocMetadata=function(e,t,i,a,o){return r.__awaiter(this,void 0,void 0,function(){var s,l;return r.__generator(this,function(r){switch(r.label){case 0:return[4,fetch(n(e,t,i,a,o),{headers:{"content-type":"application/json"},credentials:"include",method:"POST"})];case 1:return s=r.sent(),[4,s.json()];case 2:return l=r.sent(),[2,{ok:s.ok,status:s.status,data:l,headers:{"x-dropbox-metadata":s.headers.get("x-dropbox-metadata"),"x-dropbox-pdf-password-needed":s.headers.get("x-dropbox-pdf-password-needed")}}]}})})},e})();t.WebRivieraIOClient=s;var l=(function(){function e(e){this.ioClient=e}return e.prototype.refreshDocBlob=function(e,t){return r.__awaiter(this,void 0,void 0,function(){var n,a,s,l,c,u,d,p,f,v;return r.__generator(this,function(r){switch(r.label){case 0:return[4,this.ioClient.refreshDocBlob(e,t)];case 1:if(n=r.sent(),a=n.data,s=n.status,l=n.ok,c=n.headers,!l)throw u="1"===c["x-dropbox-pdf-password-needed"],d=o(c["x-dropbox-metadata"]),i(s,d,u);return p=a.text,f=a.image,v=a.refresh,[2,{text_url_tmpl:p,image_url_tmpl:f,refresh_url:v}]}})})},e.prototype.fetchDocMetadata=function(e,t,n,a,s){return void 0===t&&(t=!1),void 0===n&&(n=0),void 0===a&&(a=50),void 0===s&&(s=!1),r.__awaiter(this,void 0,void 0,function(){var l,c,u,d,p,f,v;return r.__generator(this,function(r){switch(r.label){case 0:return[4,this.ioClient.fetchDocMetadata(e,t,n,a,s)];case 1:if(l=r.sent(),c=l.ok,u=l.data,d=l.status,p=l.headers,c)return[2,u];throw f="1"===p["x-dropbox-pdf-password-needed"],v=o(p["x-dropbox-metadata"]),i(d,v,f)}})})},e})();t.RivieraClientBase=l}),define("file-viewer/core/data/riviera",["require","exports","file-viewer/core/data/riviera/api","file-viewer/core/data/riviera/types"],function(e,t,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RivieraError=r.RivieraError,t.RivieraClientBase=r.RivieraClientBase,t.WebRivieraIOClient=r.WebRivieraIOClient,t.RivieraStatus=i.RivieraStatus}),define("file-viewer/core/data/riviera/transform",["require","exports","tslib","file-viewer/core/urls"],function(e,t,r,i){"use strict";function n(e){var t=e.n.lastIndexOf(",");return{fontFamily:'"'+(t>-1?e.n.substr(0,t):e.n)+'", '+(1&e.f?"monospace":"serif"),isBold:(e.f&1<<18)>0,isItalic:(64&e.f)>0}}function a(e,t,r){void 0===t&&(t=[]);for(var n=t.reduce(function(e,t){for(var r=t[0],i=t[1],n=t[2],a=0;a<n;a++)e.push([r,i]);return e},[]),a=new Array(r),o=0;o<r;o++)a[o]={pageIndex:o,dimension:n[o],thumbnailUrl:i.imageUrl(e,{page:o,scale_percent:0}),imgUrls:{"1x":i.imageUrl(e,{page:o,scale_percent:0}),"4x":i.imageUrl(e,{page:o,scale_percent:400})},textboxes:[],links:[]};return a}function o(e){var t=e.text;if(!t||!t.pages)return[];var i=t.links,a=t.pages,o=(t.fonts||[]).reduce(function(e,t){return e[t.f]=n(t),e},{});return Object.keys(a).map(function(e){return{pageIndex:+e,textboxes:(a[e]||[]).map(function(e){return r.__assign({},e,{font:o[e.f]})}),links:i&&i[e]||[]}})}function s(e,t,i,n){void 0===t&&(t=[]);var s=a(e,t,i);return o(n).forEach(function(e){var t=e.pageIndex;s[t]=r.__assign({},s[t],e)}),s}Object.defineProperty(t,"__esModule",{value:!0});t.processTextAndUrl=s}),define("file-viewer/core/data/riviera/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e[e.Unknown=0]="Unknown",e[e.OK=1]="OK",e[e.ConversionFailure=2]="ConversionFailure",e[e.TemporaryFailure=3]="TemporaryFailure",e[e.InternalFailure=4]="InternalFailure",e[e.UnsupportedFormat=5]="UnsupportedFormat",e[e.Timeout=6]="Timeout",e[e.TooBig=7]="TooBig",e[e.InvalidMetadata=8]="InvalidMetadata",e[e.SourceCorrupt=9]="SourceCorrupt",e[e.TimeBudgetExceeded=10]="TimeBudgetExceeded",e[e.NotFound=11]="NotFound",e[e.PasswordProtected=12]="PasswordProtected",e[e.InvalidRequest=13]="InvalidRequest",e[e.VirusDetected=14]="VirusDetected",e[e.BlockMissing=15]="BlockMissing"})(t.RivieraStatus||(t.RivieraStatus={}))}),define("file-viewer/core/data/selectors",["require","exports"],function(e,t){"use strict";function r(e){return e.zoomScaleFactor||e.fitScaleFactor}Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentScaleFactorFromFilePreviewUi=r}),define("file-viewer/core/errors",["require","exports","tslib"],function(e,t,r){"use strict";function i(e){return e instanceof n}Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e[e.PreviewsDataApiFailure=0]="PreviewsDataApiFailure",e[e.MalformedPreviewsDataApiResponse=1]="MalformedPreviewsDataApiResponse",e[e.PreviewRendererFetchFailure=2]="PreviewRendererFetchFailure",e[e.LayerRendererFetchFailure=3]="LayerRendererFetchFailure",e[e.RivieraDataFetchFailure=4]="RivieraDataFetchFailure",e[e.MalformedRivieraData=5]="MalformedRivieraData",e[e.FileTooLarge=6]="FileTooLarge",e[e.UnsupportedPreviewType=7]="UnsupportedPreviewType",e[e.NoExtension=8]="NoExtension",e[e.PasswordProtected=9]="PasswordProtected",e[e.FileUploading=10]="FileUploading",e[e.Unknown=11]="Unknown",e[e.FileSwitched=12]="FileSwitched",
e[e.InvalidFileInfo=13]="InvalidFileInfo",e[e.InvalidLoggingOrder=14]="InvalidLoggingOrder",e[e.InvalidLoggingSession=15]="InvalidLoggingSession",e[e.UserOffline=16]="UserOffline",e[e.MissingContentMetadata=17]="MissingContentMetadata"})(t.FVErrorCode||(t.FVErrorCode={}));var n=(function(e){function t(r,i){var n=e.call(this,i)||this;return n.type=r,Error.captureStackTrace&&Error.captureStackTrace(n,t),n}return r.__extends(t,e),t})(Error);t.FVError=n,t.isFVError=i}),define("file-viewer/core/extension_constants",["require","exports"],function(e,t){"use strict";function r(e){return e=e.toLowerCase(),t.DOC_EXTS.includes(e)?"ssr_doc":t.IMAGE_EXTS.includes(e)?"image":g.includes(e)?"video":w.includes(e)?"audio":y.includes(e)?"linkfile":m.includes(e)?"html":C.includes(e)?"cloud_doc":"other"}Object.defineProperty(t,"__esModule",{value:!0});var i=[".odt",".wpd"],n=[".odp"],a=[".doc",".docx",".docm",".rtf"],o=[".ppt",".pps",".ppsx",".ppsm",".pptx",".pptm"],s=[".pdf"],l=[".ai",".eps"];t.PHOTO_EXTS=[".bmp",".gif",".jpeg",".jpg",".png",".tif",".tiff",".wbmp",".webp"];var c=[".xd"];t.IMAGE_EXTS=t.PHOTO_EXTS.concat(c);var u=[".key",".keynote"],d=[".dwg"],p=[".as",".as3",".asm",".aspx",".bat",".c",".cc",".cmake",".coffee",".cpp",".cs",".css",".cxx",".diff",".erb",".erl",".groovy",".gry",".h",".haml",".hh",".hpp",".hxx",".java",".js",".json",".jsx",".less",".lst",".m",".make",".ml",".mm",".out",".patch",".php",".pl",".plist",".properties",".py",".rb",".sass",".scala",".scm",".script",".scss",".sh",".sml",".sql",".tsx",".vb",".vi",".vim",".xml",".xsd",".xsl",".yaml",".yml"],f=[".epub"],v=[".markdown",".mdown",".mkdn",".md"],_=[".abap",".ada",".adp",".ahk",".asc",".ascx",".asp",".awk",".bash",".bash_login",".bash_logout",".bash_profile",".bashrc",".bib",".bsh",".build",".builder",".c++",".capfile",".cfc",".cfm",".cfml",".cl",".clj",".cls",".cmd",".cpt",".cpy",".cshtml",".cson",".csproj",".ctp",".d",".ddl",".di",".dif",".disco",".dml",".dtd",".dtml",".el",".emakefile",".f",".f90",".f95",".fs",".fsi",".fsscript",".fsx",".gemfile",".gemspec",".gitconfig",".go",".gvy",".h++",".handlebars",".hbs",".hcp",".hrl",".hs",".htc",".idl",".iim",".inc",".inf",".ini",".inl",".ipp",".irbrc",".jade",".jav",".jsp",".l",".lhs",".lisp",".log",".ltx",".lua",".markdn",".mli",".mll",".mly",".mud",".nfo",".opml",".osascript",".out",".p",".pas",".patch",".php2",".php3",".php4",".php5",".phtml",".pm",".pod",".pp",".profile",".ps1",".psd1",".psm1",".pt",".pyw",".r",".rake",".rbx",".rc",".re",".readme",".reg",".rest",".resw",".resx",".rhtml",".rjs",".rprofile",".rpy",".rss",".rst",".rxml",".s",".scm",".sconscript",".sconstruct",".sgml",".shtml",".sty",".swift",".tcl",".tex",".text",".textile",".tld",".tli",".tmpl",".tpl",".txt",".vim",".wsdl",".xhtml",".xoml",".xslt",".yaws",".zsh"],m=p.concat(f,v,_),g=[".3gp",".3gpp",".3gpp2",".asf",".avi",".dv",".flv",".m2t",".m4v",".mkv",".mov",".mp4",".mpeg",".mpg",".mts",".mxf",".oggtheora",".ogv",".rm",".ts",".vob",".webm",".wmv"],w=[".aac",".aif",".aiff",".m4a",".m4r",".mp3",".oga",".wav",".wma"],b=[".url",".website"],h=[".webloc"],y=b.concat(h),F=[".paper",".papert"],S=[".gdoc",".gslides"],P=[".gsheet"],A=[".web"],C=F.concat(P,S,A);t.PRESENTATION_EXTS=o.concat(n),t.DOC_EXTS=s.concat(l,n,i,o,a,u,d),t.resolvePreviewTypeFromExtension=r}),define("file-viewer/core/i18n",["require","exports","tslib","intl-messageformat","file-viewer/core/uuid"],function(e,t,r,i,n){"use strict";function a(e,t){var r=Array.isArray(e)?e.slice():[e];if(r.sort(),!t)return r.join("|");var i=Object.keys(t);return i.sort(),i.reduce(function(e,r){return e+"|"+r+"="+t[r]},r.join("|"))}function o(e,t){return function(r,i){var n=a(e,i);return t[n]||(t[n]=new Intl.NumberFormat(e,i)),t[n].format(r)}}function s(e,t){return function(r,i){var n=a(e,i);return t[n]||(t[n]=new Intl.DateTimeFormat(e,i)),t[n].format(r)}}function l(e){return e.replace(/%\((.*?)\)s/g,"{$1}")}function c(e,t){var r={},i={};t&&(r=Object.keys(t).reduce(function(e,r){var a=t[r];if("object"==typeof a){var o=n.v4();i[o]=a,e[r]=m+o+m}else e[r]=a;return e},{}));var a=e(r),o=Object.keys(i);return t&&o.length?a.split(m).filter(Boolean).map(function(e){return e in i?i[e]:e}):a}function u(e,t,r){return void 0===r&&(r={}),function(n,a){var o,s=n.id,l=n.defaultMessage;return s?(o=r[s],o||(o=new i.default(t[s]||l,e)),r[s]=o):o=new i.default(l,e),c(function(e){return o.format(e)},a)}}function d(e,t,r){void 0===r&&(r={});var i=Object.keys(t).reduce(function(e,r){var i=t[r];return"object"==typeof i?(e[r+"-one"]=l(i.message(1)),e[r+"-other"]=l(i.message(2))):e[r]=l(i),e},{}),n=u(e,i,r);return function(e,r){var i=e.id,a=e.defaultMessage;if(i){var o=t[i];if("object"==typeof o&&r){return n({id:r[o.token]>1?i+"-other":i+"-one",defaultMessage:a},r)}}return r?n(e,r):n(e)}}function p(){return{messageFormat:{},numberFormat:{},dateTimeFormat:{}}}function f(e){function t(e){return(e||"en").replace(/_/gi,"-")}return Array.isArray(e)?e.map(t):t(e)}function v(e,t,r){return{formatMessage:u(e,t,r.messageFormat),formatNumber:o(e,r.numberFormat),formatDateTime:s(e,r.dateTimeFormat)}}function _(e,t,r){return e=f(e),{formatMessage:d(e,t,r.messageFormat),formatNumber:o(e,r.numberFormat),formatDateTime:s(e,r.dateTimeFormat)}}Object.defineProperty(t,"__esModule",{value:!0}),i=r.__importDefault(i);var m="@__"+n.v4()+"__@";t.createI18nCache=p,t.createFormatters=v,t.createMetaserverFormatters=_,t.dummyFormatMessage=function(e){return e.defaultMessage},t.dummyI18nFormatters=v("en",{},p()),t.dummyMetaserverI18nFormatters=_("en",{},p())}),define("file-viewer/core",["require","exports","file-viewer/core/utils","file-viewer/core/i18n","file-viewer/core/invariant","file-viewer/core/ui/types","file-viewer/core/uuid","file-viewer/core/bootstrap","file-viewer/core/data/reducer","file-viewer/core/data/models","file-viewer/core/data/actions","modules/clean/api_v2/redux/previews","file-viewer/core/logging/session","file-viewer/core/logging/actions","file-viewer/core/urls","file-viewer/core/data/riviera","file-viewer/core/extension_constants","file-viewer/core/utils","file-viewer/core/config","file-viewer/core/data/modes/types","file-viewer/core/middlewares/navigation","file-viewer/core/middlewares/native_apps","file-viewer/core/constants","file-viewer/core/errors"],function(e,t,r,i,n,a,o,s,l,c,u,d,p,f,v,_,m,g,w,b,h,y,F,S){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateFitBox=r.calculateFitBox,t.shallowEqual=r.shallowEqual,t.createFormatters=i.createFormatters,t.createI18nCache=i.createI18nCache,t.dummyFormatMessage=i.dummyFormatMessage,t.dummyI18nFormatters=i.dummyI18nFormatters,t.createMetaserverFormatters=i.createMetaserverFormatters,t.dummyMetaserverI18nFormatters=i.dummyMetaserverI18nFormatters,t.invariant=n.invariant,t.Theme=a.Theme,t.uuidV4=o.v4,t.createFileViewerSDK=s.createFileViewerSDK,t.createSDKStore=s.createSDKStore,t.reducers=l.reducers,t.DEFAULT_FILE_PREVIEW_UI=l.DEFAULT_FILE_PREVIEW_UI,t.DEFAULT_USER=l.DEFAULT_USER,t.DEFAULT_MODE=l.DEFAULT_MODE,t.DEFAULT_FILE_VIEWER_UI=l.DEFAULT_FILE_VIEWER_UI,t.PreviewType=c.PreviewType,t.Action=u.Action,t.setBootstrappedFileId=u.setBootstrappedFileId,t.refreshBlobSuccessAction=u.refreshBlobSuccessAction,t.updateDocCurrentPageIndex=u.updateDocCurrentPageIndex,t.fetchPageDataWithMetadata=u.fetchPageDataWithMetadata,t.zoomIn=u.zoomIn,t.zoomOut=u.zoomOut,t.zoomOriginalOrFit=u.zoomOriginalOrFit,t.updateFitScaleFactor=u.updateFitScaleFactor,t.refreshBlobAction=u.refreshBlobAction,t.openDocSidebar=u.openDocSidebar,t.closeDocSidebar=u.closeDocSidebar,t.setCurrentFilePreview=u.setCurrentFilePreview,t.pageUp=u.pageUp,t.pageDown=u.pageDown,t.changeMode=u.changeMode,t.sidebarControlClickAction=u.sidebarControlClickAction,t.setSidebarVisibilityAction=u.setSidebarVisibilityAction,t.shareAction=u.shareAction,t.openWith=u.openWith,t.openWebPreview=u.openWebPreview,t.setFileMetadata=u.setFileMetadata,t.initializeFilePreviewSession=u.initializeFilePreviewSession,t.initializeFilePreview=u.initializeFilePreview,t.fetchPageDataWithMetadataResult=u.fetchPageDataWithMetadataResult,t.previewsDataMiddleware=d.middleware,t.createFilePreviewSession=p.createFilePreviewSession,t.DeviceType=p.DeviceType,t.EventType=p.EventType,t.SourceAction=p.SourceAction,t.SourceContext=p.SourceContext,t.UserAction=p.UserAction,t.UserActionContext=p.UserActionContext,t.logEvent=f.logEvent,t.logTTI=f.logTTI,t.imageUrl=v.imageUrl,t.RivieraStatus=_.RivieraStatus,t.RivieraError=_.RivieraError,t.WebRivieraIOClient=_.WebRivieraIOClient,t.PHOTO_EXTS=m.PHOTO_EXTS,t.DOC_EXTS=m.DOC_EXTS,t.PRESENTATION_EXTS=m.PRESENTATION_EXTS,t.resolvePreviewTypeFromExtension=m.resolvePreviewTypeFromExtension,t.getFileExtension=g.getFileExtension,t.getParentFolderFromPath=g.getParentFolderFromPath,t.fileSizeSupported=g.fileSizeSupported,t.getFileSizeLimit=g.getFileSizeLimit,t.resolveAsset=g.resolveAsset,t.resolvePreviewType=g.resolvePreviewType,t.calculatePageRange=g.calculatePageRange,t.memoizeOne=g.memoizeOne,t.DEFAULT_CONFIG=w.DEFAULT_CONFIG,t.SidebarControlId=b.SidebarControlId,t.SidebarPaneId=b.SidebarPaneId,t.SidebarVisibility=b.SidebarVisibility,t.FileViewerMode=b.FileViewerMode,t.navigationMiddleware=h.middleware,t.nativeAppsMiddleware=y.middleware,t.MAX_IMG_SCALE_FACTOR=F.MAX_IMG_SCALE_FACTOR,t.MIN_IMG_SCALE_FACTOR=F.MIN_IMG_SCALE_FACTOR,t.FVErrorCode=S.FVErrorCode,t.FVError=S.FVError,t.isFVError=S.isFVError}),define("file-viewer/core/invariant",["require","exports","file-viewer/core/errors"],function(e,t,r){"use strict";function i(e,t,i){if(void 0===t&&(t=r.FVErrorCode.Unknown),!e){var n=void 0;throw n=void 0===i?new r.FVError(t,"An error occurred for unknown reason"):new r.FVError(t,i),n.framesToPop=1,n}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.invariant=i}),define("file-viewer/core/logging/actions",["require","exports"],function(e,t){"use strict";function r(e){return{type:"@@previews/log",payload:e}}function i(e){return{type:"@@previews/logTTI",payload:e}}function n(e){return{type:"@@previews/updateSession",payload:e}}Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.UpdateSession="@@previews/updateSession",e.Log="@@previews/log",e.LogTTI="@@previews/logTTI"})(t.Action||(t.Action={})),t.logEvent=r,t.logTTI=i,t.updateSession=n}),define("file-viewer/core/logging/session",["require","exports","tslib","file-viewer/core/uuid","file-viewer/core/invariant","file-viewer/core/errors"],function(e,t,r,i,n,a){"use strict";function o(e){var t=e||{},n=t.file_viewer_session_id,a=void 0===n?i.v4():n,o=t.file_preview_session_id,s=void 0===o?i.v4():o,l=t.file_id,c=void 0===l?"":l,u=t.file_extension,d=void 0===u?"":u,p=t.device_type,f=void 0===p?"desktop":p,v=t.extra,_=void 0===v?{}:v;return{file_viewer_session_id:a,file_preview_session_id:s,file_id:c,file_extension:d,device_type:f,extra:r.__assign({},_,{source_action:_.source_action||"visit",source_context:_.source_context||"file_viewer",file_preview_timeline:{}})}}function s(e,t,i){var o,s=e.extra.last_event;switch(n.invariant(s!==t,a.FVErrorCode.InvalidLoggingOrder,"Cannot log duplicate event "+t),t){case"support_confirmed":case"support_denied":n.invariant("preview_attempted"===s,a.FVErrorCode.InvalidLoggingOrder,"Event out of order, expect `last_event` to be 'preview_attempted' but was '"+s+"'");break;case"download_attempted":n.invariant("support_confirmed"===s,a.FVErrorCode.InvalidLoggingOrder,"Event out of order, expect `last_event` to be 'support_confirmed' but was '"+s+"'");break;case"download_failed":case"download_succeeded":n.invariant("download_attempted"===s,a.FVErrorCode.InvalidLoggingOrder,"Event out of order, expect `last_event` to be 'download_attempted' but was '"+s+"'");break;case"render_succeeded":case"render_failed":n.invariant("download_succeeded"===s,a.FVErrorCode.InvalidLoggingOrder,"Event out of order, expect `last_event` to be 'download_succeeded' but was '"+s+"'")}return r.__assign({},e,{extra:r.__assign({},e.extra,{file_preview_timeline:r.__assign({},e.extra.file_preview_timeline,(o={},o[t]=Date.now(),o))},i||{})})}function l(e,t){return r.__assign({},e,{extra:r.__assign({},e.extra,{last_event:t})})}function c(e,t){return r.__assign({},e,{extra:r.__assign({},e.extra,t)})}function u(e){var t=r.__assign({},e.extra);if(t.time_to_primary_mark)return e;switch(t.primary_mark_ts||(t.primary_mark_ts=Date.now()),t.source_action){case"visit":n.invariant(!!t.page_start_ts,a.FVErrorCode.InvalidLoggingSession,"Cannot calculate 1st page TTI without page_start_ts"),t.time_to_primary_mark=t.primary_mark_ts-t.page_start_ts;break;case"click":n.invariant(t.file_preview_timeline&&!!t.file_preview_timeline.preview_attempted,a.FVErrorCode.InvalidLoggingSession,"Cannot calculate subsequent page TTI without preview_attempted timestamp"),t.time_to_primary_mark=t.primary_mark_ts-t.file_preview_timeline.preview_attempted}return r.__assign({},e,{extra:t})}Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.mobile="mobile",e.tablet="tablet",e.desktop="desktop"})(t.DeviceType||(t.DeviceType={})),(function(e){e.Click="click",e.DoubleClick="double_click",e.Visit="visit"})(t.SourceAction||(t.SourceAction={})),(function(e){e.FilePreviewSessionEnded="preview_session_ended",e.FilePreviewAttemptStarted="preview_attempted",e.FilePreviewSupportConfirmed="support_confirmed",e.FilePreviewSupportDenied="support_denied",e.FilePreviewDownloadAttempted="download_attempted",e.FilePreviewDownloadSucceeded="download_succeeded",e.FilePreviewDownloadFailed="download_failed",e.FilePreviewRenderSucceeded="render_succeeded",e.FilePreviewRenderFailed="render_failed",e.UserAction="user_action"})(t.EventType||(t.EventType={})),(function(e){e.ArchiveFile="archive_file",e.Browse="browse",e.CollabBrowse="collab_browse",e.DesktopCommentNotification="desktop_comment_notification",e.Desktop="desktop",e.DesktopDetailsPaneMenu="desktop_details_pane_menu",e.DesktopLocalPreview="desktop_local_preview",e.DesktopPreviewPane="desktop_preview_pane",e.DesktopTray="desktop_tray",e.EmbeddedSharedLinkFile="embedded_sl_file",e.FileViewer="file_viewer",e.SharedLinkCollection="sl_collection",e.SharedLinkFile="sl_file",e.SharedLinkFolder="sl_folder",e.VersionHistory="version_history"})(t.SourceContext||(t.SourceContext={})),(function(e){e.Share="share",e.Download="download",e.PageChange="page_change",e.PageUp="page_up",e.PageDown="page_down",e.ToggleFullscreenOn="toggle_fullscreen_on",e.ToggleFullscreenOff="toggle_fullscreen_off",e.CloseDocSidebar="close_doc_sidebar",e.OpenDocSidebar="open_doc_sidebar",e.FlipNext="flip_next",e.FlipPrevious="flip_prev",e.ZoomIn="zoom_in",e.ZoomOut="zoom_out",e.ZoomOriginalOrFit="zoom_original_or_fit",e.ToggleSidebarOn="toggle_sidebar_on",e.ToggleSidebarOff="toggle_sidebar_off",e.PageJump="page_jump",e.ModeChange="mode_change",e.OpenWith="open_with",e.OpenWebPreview="open_web_preview",e.OpenFullscreenPreview="open_fullscreen_preview"})(t.UserAction||(t.UserAction={})),(function(e){e.Toolbar="toolbar",e.DocSidebar="doc_sidebar",e.Sidebar="sidebar",e.MouseWheel="mouse_wheel",e.DocReset="doc_reset",e.DocLink="doc_link",e.SurfaceGesture="surface_gesture",e.PreviewError="preview_error",e.TrayButton="tray_button",e.Initialization="initialization",e.Keyboard="keyboard"})(t.UserActionContext||(t.UserActionContext={})),t.createFilePreviewSession=o,t.recordEvent=s,t.updateSessionLastEvent=l,t.recordExtra=c,t.markTTI=u}),define("file-viewer/core/middlewares/analytics",["require","exports","tslib","file-viewer/core/logging/actions","file-viewer/core/logging/session"],function(e,t,r,i,n){"use strict";function a(e){return Object.keys(e).reduce(function(t,r){var i=e[r];return"string"==typeof i||"number"==typeof i?t[r]=String(i):"boolean"==typeof i?t[r]=String(+i):"object"==typeof i&&i&&(t[r]=JSON.stringify(i)),t},{})}function o(e){return r.__assign({},e,{extra:a(e.extra)})}function s(e){return function(t){var s=t.getState;return function(t){return function(l){var u=null;if("@@previews/log"===l.type){var d=l.payload,p=d.event,f=d.fileViewerId,v=d.extra;return u=n.recordEvent(s().loggingSession[f],p,v),e.log(p,o(u)),u=n.updateSessionLastEvent(u,p),t(i.updateSession(u))}if("@@previews/logTTI"===l.type)return u=n.markTTI(s().loggingSession[l.payload]),e.logTTI(),t(i.updateSession(u));if(l.type in c){var _=l.payload,f=_.fileViewerId,m=_.sourceContext,g=s().loggingSession[f];e.log("user_action",o(r.__assign({},g,{extra:a({context:m,action:c[l.type]})})))}return t(l)}}}}Object.defineProperty(t,"__esModule",{value:!0});var l,c=(l={},l["@@previews/zoomIn"]="zoom_in",l["@@previews/zoomOut"]="zoom_out",l["@@previews/fileViewerUi/closeDocSidebar"]="close_doc_sidebar",l["@@previews/fileViewerUi/openDocSidebar"]="open_doc_sidebar",l["@@previews/zoomOriginalOrFit"]="zoom_original_or_fit",l["@@previews/modes/changeMode"]="mode_change",l["@@previews/updateDocCurrentPageIndex"]="page_jump",l["@@previews/pageDown"]="page_down",l["@@previews/pageUp"]="page_up",l["@@previews/share"]="share",l["@@previews/openWith"]="open_with",l["@@previews/openWebPreview"]="open_web_preview",l["@@previews/navigation/flipToNextFile"]="flip_next",l["@@previews/navigation/flipToPreviousFile"]="flip_prev",l["@@previews/openFullscreenPreview"]="open_fullscreen_preview",l);t.analyticsMiddleware=s}),define("file-viewer/core/middlewares/local_cache_data",["require","exports","tslib","modules/clean/api_v2/redux/previews","file-viewer/core/logging/session","file-viewer/core/logging/actions"],function(e,t,r,i,n,a){"use strict";function o(e){var t=this;return function(o){var s=o.getState,l=o.dispatch;return function(o){return function(c){return r.__awaiter(t,void 0,void 0,function(){var t,u,d,p,d;return r.__generator(this,function(r){switch(r.label){case 0:return"@@apiv2_redux/previews/get_preview_data_batch"!=c.type?[3,2]:e.previewDataCacheClient?[4,e.previewDataCacheClient.getByFileIds(c.payload.arg.files.map(function(e){return e.file_id}).filter(function(e){return"string"==typeof e}))]:[3,2];case 1:if(t=r.sent(),Array.isArray(t.results)&&t.results.length>0)return u={arg:c.payload.arg,result:t},c.meta&&c.meta.fileViewerId&&(d=n.recordExtra(s().loggingSession[c.meta.fileViewerId],{preview_data_cache_hit:"1"}),l(a.updateSession(d))),p=i.getPreviewDataBatchResultAction(u,c.meta),[2,l(p)];c.meta&&c.meta.fileViewerId&&(d=n.recordExtra(s().loggingSession[c.meta.fileViewerId],{preview_data_cache_hit:"0"}),l(a.updateSession(d))),r.label=2;case 2:return[2,o(c)]}})})}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.localCacheMiddleware=o}),define("file-viewer/core/middlewares/native_apps",["require","exports","tslib","file-viewer/core/data/actions"],function(e,t,r,i){"use strict";function n(e){var t=this;return function(n){var a=n.dispatch;return function(n){return function(o){return r.__awaiter(t,void 0,void 0,function(){var t,s,l,c;return r.__generator(this,function(r){switch(r.label){case 0:return t=n(o),"@@previews/fetchNativeApps"!==o.type?[3,2]:(s=a,l=i.fetchNativeAppsResult,c={fileId:o.payload.fileId},[4,e.getAppsForCurrentFile()]);case 1:s.apply(void 0,[l.apply(void 0,[(c.result=r.sent(),c)])]),r.label=2;case 2:return[2,t]}})})}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.middleware=n}),define("file-viewer/core/middlewares/navigation",["require","exports"],function(e,t){"use strict";function r(e){return function(t){return function(t){return function(r){if("@@previews/share"===r.type)e.openShareModal();else if("@@previews/openWith"===r.type)e.openDefaultNativeApp();else if("@@previews/openWebPreview"===r.type)e.openWebPreview();else if("@@previews/openFullscreenPreview"===r.type)e.openFullScreenPreview&&e.openFullScreenPreview();else if("@@previews/openContainingFolder"===r.type)e.openContainingFolder&&e.openContainingFolder();else if("@@previews/openUrl"===r.type){var i=r.payload,n=i.url,a=i.fallbackUrl;e.openUrl&&e.openUrl(n,a)}return"@@previews/navigation/flipToNextFile"===r.type&&e.flipToNextFile(),"@@previews/navigation/flipToPreviousFile"===r.type&&e.flipToPreviousFile(),t(r)}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.middleware=r}),define("file-viewer/core/middlewares/network_state",["require","exports","file-viewer/core/data/actions"],function(e,t,r){"use strict";function i(e){return function(t){var i=t.dispatch,n=function(e){i(r.setNetworkConnectivityState({isOffline:e}))},a=function(){n(e.getNetworkIsOffline())};return function(t){return function(r){switch(r.type){case"@@previews/initializeFilePreviewSession":a();break;case"@@previews/subscribeNetworkState":e.subscribe(a);break;case"@@previews/unsubscribeNetworkState":e.unsubscribe()}return t(r)}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.middleware=i}),define("file-viewer/core/middlewares/riviera_data",["require","exports","tslib","file-viewer/core/data/actions","file-viewer/core/data/riviera","file-viewer/core/data/riviera/transform","file-viewer/core/invariant","file-viewer/core/errors","file-viewer/core/utils"],function(e,t,r,i,n,a,o,s,l){"use strict";function c(e){var t=this,c=new n.RivieraClientBase(e);return function(e){var n=e.getState,u=e.dispatch;return function(e){return function(d){return r.__awaiter(t,void 0,void 0,function(){var t,p,f,v,_,m,g,w,b,h,y,w,F,S,P;return r.__generator(this,function(r){switch(r.label){case 0:switch(p=n(),f=d.type){case"@@previews/fetchPageDataWithMetadata":return[3,1];case"@@previews/refreshBlob":return[3,5]}return[3,9];case 1:v=d.payload,_=v.textUrlTmpl,m=v.startPage,g=v.endPage,t=d.payload.fileIdOrRevisionId,r.label=2;case 2:return r.trys.push([2,4,,5]),[4,c.fetchDocMetadata(_,!0,m,g)];case 3:return w=r.sent(),o.invariant(!!p.previewData[t],s.FVErrorCode.InvalidFileInfo,"Preview Data for "+t+" should have been available"),b=p.previewData[t].content.image_url_tmpl,h=w.metadata,o.invariant(!!h,s.FVErrorCode.MalformedRivieraData,"Response from riviera ssr_doc has no metadata and we also have no existing metadata"),[2,e(i.fetchPageDataWithMetadataResult({fileIdOrRevisionId:t,data:{metadata:h,pages:a.processTextAndUrl(b,h.dimensions,h.page_count,w)}}))];case 4:return y=r.sent(),[2,e(i.fetchPageDataWithMetadataResult({fileIdOrRevisionId:t,data:void 0},y))];case 5:t=d.payload.fileIdOrRevisionId,r.label=6;case 6:return r.trys.push([6,8,,9]),[4,c.refreshDocBlob(d.payload.refreshUrl,d.payload.password)];case 7:return w=r.sent(),e(i.refreshBlobSuccessAction({fileIdOrRevisionId:t,preview:w})),o.invariant(!!p.previewData[t],s.FVErrorCode.InvalidFileInfo,"Preview Data for "+t+" should have been available"),d.payload.password?[2,u(i.fetchPageDataWithMetadata({fileIdOrRevisionId:t,textUrlTmpl:w.text_url_tmpl}))]:(F=p.filePreviewUi[d.payload.fileViewerId][t].currentPageIndex,S=l.calculatePageRange(F),[2,u(i.fetchPageDataWithMetadata({fileIdOrRevisionId:t,textUrlTmpl:w.text_url_tmpl,startPage:S[0],endPage:S[1]}))]);case 8:return P=r.sent(),[2,e(i.fetchPageDataWithMetadataResult({fileIdOrRevisionId:d.payload.fileIdOrRevisionId,data:void 0},P))];case 9:return[2,e(d)]}})})}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.rivieraDataMiddleware=c}),define("file-viewer/core/middlewares/ui_action_redispatcher",["require","exports","tslib","file-viewer/core/data/actions"],function(e,t,r,i){"use strict";function n(e){return!!e.metadata}Object.defineProperty(t,"__esModule",{value:!0}),t.uiActionRedispatcher=function(e){var t=e.getState;return function(e){return function(a){var o=t(),s=o.filePreviewUi,l=o.previewData,c=o.rivieraData,u=a.payload,d=u.fileIdOrRevisionId,p=u.fileViewerId,f=l[d],v=c[d];if(!(s[p]&&f&&f.content&&v))return e(a);if(!s[p][d])return e(a);switch(a.type){case"@@previews/zoomIn":return e(i.zoomIn(r.__assign({},a.payload,{previewType:"ssr_doc"===f.content[".tag"]?"ssr_doc":"image"})));case"@@previews/zoomOut":return e(i.zoomOut(r.__assign({},a.payload,{previewType:"ssr_doc"===f.content[".tag"]?"ssr_doc":"image"})));case"@@previews/updateDocCurrentPageIndex":if("ssr_doc"===f.content[".tag"]&&n(v)&&v.metadata)return e(i.updateDocCurrentPageIndex(r.__assign({},a.payload,{pageCount:v.metadata.page_count})));case"@@previews/pageDown":if("ssr_doc"===f.content[".tag"]&&n(v)&&v.metadata)return e(i.pageDown(r.__assign({},a.payload,{pageCount:v.metadata.page_count})))}return e(a)}}}}),define("file-viewer/core/ui/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.win="win",e.osx="osx",e.web="web"})(t.Theme||(t.Theme={}))}),define("file-viewer/core/urls",["require","exports"],function(e,t){"use strict";function r(e,t){Object.keys(t).forEach(function(r){e.searchParams.set(r,t[r])})}function i(e,t){var r=new URL(e);return r.searchParams.set("page",t[n.page].toString()),r.searchParams.set("scale_percent",t[n.scale_percent].toString()),r.toString()}Object.defineProperty(t,"__esModule",{value:!0}),t.updateQueryParam=r;var n;(function(e){e.scale_percent="scale_percent",e.page="page"})(n||(n={})),t.imageUrl=i}),define("file-viewer/core/utils",["require","exports","file-viewer/core/extension_constants"],function(e,t,r){"use strict";function i(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t}function n(e,t){if(i(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(t,r[a])||!i(e[r[a]],t[r[a]]))return!1;return!0}function a(e){var t,r,i=!1;return function(n){return i&&t===n?r:(r=e(n),t=n,i=!0,r)}}function o(e,t,r){var i=e/t;return isNaN(r)||isNaN(i)||!isFinite(i)||!isFinite(r)?[0,0]:i>r?[t*r,t]:[e,e/r]}function s(e){var t=e.toLowerCase().match(/\.\w+$/);return t?t[0]:""}function l(e){if(!e)return null;var t=e.split("/");return t.length<2?null:t[t.length-2]}function c(e){if(!e||!e.content)return"error";switch(e.content[".tag"]){case"archive":return"archive";case"audio":return"audio";case"cloud_doc":return"cloud_doc";case"excel":return"excel";case"html":return"html";case"image":return"image";case"linkfile":return"linkfile";case"raw_html":return"raw_html";case"restricted":return"restricted";case"ssr_doc":return"ssr_doc";case"video":return"video";default:return"other"}}function u(e,t,i){var n=s(e);return".pdf"===n?i.pdf_size_limit:r.PRESENTATION_EXTS.includes(n)?i.ppt_size_limit:r.DOC_EXTS.includes(n)?i.word_doc_size_limit:"archive"===t?i.archive_size_limit:"html"===t||"text"===t?i.text_size_limit:"linkfile"===t?i.linkfile_size_limit:0}function d(e,t,r,i){if(!isFinite(t))return!0;var n=u(e,r,i);return!n||t<=n}function p(e,t){return e[t]||t}function f(e){var t=50*Math.floor(e/50);return t+50-e<15&&(t+=50),[t,t+50]}Object.defineProperty(t,"__esModule",{value:!0}),t.shallowEqual=n,t.memoizeOne=a,t.calculateFitBox=o;t.getFileExtension=s,t.getParentFolderFromPath=l,t.resolvePreviewType=c,t.getFileSizeLimit=u,t.fileSizeSupported=d,t.resolveAsset=p;t.calculatePageRange=f}),define("file-viewer/core/uuid",["require","exports"],function(e,t){"use strict";function r(e){return e.map(function(e){return a[e]}).join("")}function i(){var e=new Uint8Array(16);return"undefined"!=typeof window&&(window.crypto||window.msCrypto)&&(window.crypto||window.msCrypto).getRandomValues(e),e}function n(){var e=i();e[6]=15&e[6]|64,e[8]=63&e[8]|128;var t=Array.prototype.slice.call(e);return[t.slice(0,4),t.slice(4,6),t.slice(6,8),t.slice(8,10),t.slice(10,16)].map(r).join("-")}Object.defineProperty(t,"__esModule",{value:!0});var a=(function(){var e,t,r=[];for(e=0,t=e;e<=255;e++,t=e)r.push((t+256).toString(16).substr(1));return r})();t.v4=n}),define("intl-messageformat",[],function(){return function(){"use strict";function e(e){var t,r,i,n,a=Array.prototype.slice.call(arguments,1);for(t=0,r=a.length;t<r;t+=1)if(i=a[t])for(n in i)s.call(i,n)&&(e[n]=i[n]);return e}function t(e,t,r){this.locales=e,this.formats=t,this.pluralFn=r}function r(e){this.id=e}function i(e,t,r,i,n){this.id=e,this.useOrdinal=t,this.offset=r,this.options=i,this.pluralFn=n}function n(e,t,r,i){this.id=e,this.offset=t,this.numberFormat=r,this.string=i}function a(e,t){this.id=e,this.options=t}function o(e,t,r){var i="string"==typeof e?o.__parse(e):e;if(!i||"messageFormatPattern"!==i.type)throw new TypeError("A message must be provided as a String or AST.");r=this._mergeFormats(o.formats,r),c(this,"_locale",{value:this._resolveLocale(t)});var n=this._findPluralRuleFunction(this._locale),a=this._compilePattern(i,t,r,n),s=this;this.format=function(t){try{return s._format(a,t)}catch(t){throw t.variableId?new Error("The intl string context variable '"+t.variableId+"' was not provided to the string '"+e+"'"):t}}}var s=Object.prototype.hasOwnProperty,l=(function(){try{return!!Object.defineProperty({},"a",{})}catch(e){return!1}})(),c=(!l&&Object.prototype.__defineGetter__,l?Object.defineProperty:function(e,t,r){"get"in r&&e.__defineGetter__?e.__defineGetter__(t,r.get):(!s.call(e,t)||"value"in r)&&(e[t]=r.value)}),u=Object.create||function(e,t){function r(){}var i,n;r.prototype=e,i=new r;for(n in t)s.call(t,n)&&c(i,n,t[n]);return i},d=t;t.prototype.compile=function(e){return this.pluralStack=[],this.currentPlural=null,this.pluralNumberFormat=null,this.compileMessage(e)},t.prototype.compileMessage=function(e){if(!e||"messageFormatPattern"!==e.type)throw new Error('Message AST is not of type: "messageFormatPattern"');var t,r,i,n=e.elements,a=[];for(t=0,r=n.length;t<r;t+=1)switch(i=n[t],i.type){case"messageTextElement":a.push(this.compileMessageText(i));break;case"argumentElement":a.push(this.compileArgument(i));break;default:throw new Error("Message element does not have a valid type")}return a},t.prototype.compileMessageText=function(e){return this.currentPlural&&/(^|[^\\])#/g.test(e.value)?(this.pluralNumberFormat||(this.pluralNumberFormat=new Intl.NumberFormat(this.locales)),new n(this.currentPlural.id,this.currentPlural.format.offset,this.pluralNumberFormat,e.value)):e.value.replace(/\\#/g,"#")},t.prototype.compileArgument=function(e){var t=e.format;if(!t)return new r(e.id);var n,o=this.formats,s=this.locales,l=this.pluralFn;switch(t.type){case"numberFormat":return n=o.number[t.style],{id:e.id,format:new Intl.NumberFormat(s,n).format};case"dateFormat":return n=o.date[t.style],{id:e.id,format:new Intl.DateTimeFormat(s,n).format};case"timeFormat":return n=o.time[t.style],{id:e.id,format:new Intl.DateTimeFormat(s,n).format};case"pluralFormat":return n=this.compileOptions(e),new i(e.id,t.ordinal,t.offset,n,l);case"selectFormat":return n=this.compileOptions(e),new a(e.id,n);default:throw new Error("Message element does not have a valid format type")}},t.prototype.compileOptions=function(e){var t=e.format,r=t.options,i={};this.pluralStack.push(this.currentPlural),this.currentPlural="pluralFormat"===t.type?e:null;var n,a,o;for(n=0,a=r.length;n<a;n+=1)o=r[n],i[o.selector]=this.compileMessage(o.value);return this.currentPlural=this.pluralStack.pop(),i},r.prototype.format=function(e){return e||"number"==typeof e?"string"==typeof e?e:String(e):""},i.prototype.getOption=function(e){var t=this.options;return t["="+e]||t[this.pluralFn(e-this.offset,this.useOrdinal)]||t.other},n.prototype.format=function(e){var t=this.numberFormat.format(e-this.offset);return this.string.replace(/(^|[^\\])#/g,"$1"+t).replace(/\\#/g,"#")},a.prototype.getOption=function(e){var t=this.options;return t[e]||t.other};var p=(function(){function e(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}function t(e,r,i,n){this.message=e,this.expected=r,this.found=i,this.location=n,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}function r(e){function r(){return n(Oe,Me)}function i(t){var r,i,n=De[t];if(n)return n;for(r=t-1;!De[r];)r--;for(n=De[r],n={line:n.line,column:n.column,seenCR:n.seenCR};r<t;)i=e.charAt(r),"\n"===i?(n.seenCR||n.line++,n.column=1,n.seenCR=!1):"\r"===i||"\u2028"===i||"\u2029"===i?(n.line++,n.column=1,n.seenCR=!0):(n.column++,n.seenCR=!1),r++;return De[t]=n,n}function n(e,t){var r=i(e),n=i(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,
column:n.column}}}function a(e){Me<Te||(Me>Te&&(Te=Me,Re=[]),Re.push(e))}function o(e,r,i,n){function a(e){var t=1;for(e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}function o(e,t){function r(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+t(e)})}var i,n,a,o=new Array(e.length);for(a=0;a<e.length;a++)o[a]=e[a].description;return i=e.length>1?o.slice(0,-1).join(", ")+" or "+o[e.length-1]:o[0],n=t?'"'+r(t)+'"':"end of input","Expected "+i+" but "+n+" found."}return null!==r&&a(r),new t(null!==e?e:o(r,i),r,i,n)}function s(){return l()}function l(){var e,t,r;for(e=Me,t=[],r=c();r!==D;)t.push(r),r=c();return t!==D&&(Oe=e,t=k(t)),e=t}function c(){var e;return e=d(),e===D&&(e=f()),e}function u(){var t,r,i,n,a,o;if(t=Me,r=[],i=Me,n=P(),n!==D?(a=x(),a!==D?(o=P(),o!==D?(n=[n,a,o],i=n):(Me=i,i=D)):(Me=i,i=D)):(Me=i,i=D),i!==D)for(;i!==D;)r.push(i),i=Me,n=P(),n!==D?(a=x(),a!==D?(o=P(),o!==D?(n=[n,a,o],i=n):(Me=i,i=D)):(Me=i,i=D)):(Me=i,i=D);else r=D;return r!==D&&(Oe=t,r=U(r)),t=r,t===D&&(t=Me,r=S(),t=r!==D?e.substring(t,Me):r),t}function d(){var e,t;return e=Me,t=u(),t!==D&&(Oe=e,t=V(t)),e=t}function p(){var t,r,i;if(t=E(),t===D){if(t=Me,r=[],L.test(e.charAt(Me))?(i=e.charAt(Me),Me++):(i=D,0===ke&&a(N)),i!==D)for(;i!==D;)r.push(i),L.test(e.charAt(Me))?(i=e.charAt(Me),Me++):(i=D,0===ke&&a(N));else r=D;t=r!==D?e.substring(t,Me):r}return t}function f(){var t,r,i,n,o,s,l,c,u;return t=Me,123===e.charCodeAt(Me)?(r="{",Me++):(r=D,0===ke&&a(B)),r!==D?(i=P(),i!==D?(n=p(),n!==D?(o=P(),o!==D?(s=Me,44===e.charCodeAt(Me)?(l=",",Me++):(l=D,0===ke&&a(j)),l!==D?(c=P(),c!==D?(u=v(),u!==D?(l=[l,c,u],s=l):(Me=s,s=D)):(Me=s,s=D)):(Me=s,s=D),s===D&&(s=null),s!==D?(l=P(),l!==D?(125===e.charCodeAt(Me)?(c="}",Me++):(c=D,0===ke&&a(W)),c!==D?(Oe=t,r=G(n,s),t=r):(Me=t,t=D)):(Me=t,t=D)):(Me=t,t=D)):(Me=t,t=D)):(Me=t,t=D)):(Me=t,t=D)):(Me=t,t=D),t}function v(){var e;return e=_(),e===D&&(e=m(),e===D&&(e=g(),e===D&&(e=w()))),e}function _(){var t,r,i,n,o,s,l;return t=Me,"number"===e.substr(Me,6)?(r="number",Me+=6):(r=D,0===ke&&a(z)),r===D&&("date"===e.substr(Me,4)?(r="date",Me+=4):(r=D,0===ke&&a(q)),r===D&&("time"===e.substr(Me,4)?(r="time",Me+=4):(r=D,0===ke&&a(K)))),r!==D?(i=P(),i!==D?(n=Me,44===e.charCodeAt(Me)?(o=",",Me++):(o=D,0===ke&&a(j)),o!==D?(s=P(),s!==D?(l=x(),l!==D?(o=[o,s,l],n=o):(Me=n,n=D)):(Me=n,n=D)):(Me=n,n=D),n===D&&(n=null),n!==D?(Oe=t,r=Z(r,n),t=r):(Me=t,t=D)):(Me=t,t=D)):(Me=t,t=D),t}function m(){var t,r,i,n,o,s;return t=Me,"plural"===e.substr(Me,6)?(r="plural",Me+=6):(r=D,0===ke&&a(H)),r!==D?(i=P(),i!==D?(44===e.charCodeAt(Me)?(n=",",Me++):(n=D,0===ke&&a(j)),n!==D?(o=P(),o!==D?(s=F(),s!==D?(Oe=t,r=X(s),t=r):(Me=t,t=D)):(Me=t,t=D)):(Me=t,t=D)):(Me=t,t=D)):(Me=t,t=D),t}function g(){var t,r,i,n,o,s;return t=Me,"selectordinal"===e.substr(Me,13)?(r="selectordinal",Me+=13):(r=D,0===ke&&a(Y)),r!==D?(i=P(),i!==D?(44===e.charCodeAt(Me)?(n=",",Me++):(n=D,0===ke&&a(j)),n!==D?(o=P(),o!==D?(s=F(),s!==D?(Oe=t,r=Q(s),t=r):(Me=t,t=D)):(Me=t,t=D)):(Me=t,t=D)):(Me=t,t=D)):(Me=t,t=D),t}function w(){var t,r,i,n,o,s,l;if(t=Me,"select"===e.substr(Me,6)?(r="select",Me+=6):(r=D,0===ke&&a(J)),r!==D)if(i=P(),i!==D)if(44===e.charCodeAt(Me)?(n=",",Me++):(n=D,0===ke&&a(j)),n!==D)if(o=P(),o!==D){if(s=[],l=h(),l!==D)for(;l!==D;)s.push(l),l=h();else s=D;s!==D?(Oe=t,r=$(s),t=r):(Me=t,t=D)}else Me=t,t=D;else Me=t,t=D;else Me=t,t=D;else Me=t,t=D;return t}function b(){var t,r,i,n;return t=Me,r=Me,61===e.charCodeAt(Me)?(i="=",Me++):(i=D,0===ke&&a(ee)),i!==D?(n=E(),n!==D?(i=[i,n],r=i):(Me=r,r=D)):(Me=r,r=D),t=r!==D?e.substring(t,Me):r,t===D&&(t=x()),t}function h(){var t,r,i,n,o,s,c,u,d;return t=Me,r=P(),r!==D?(i=b(),i!==D?(n=P(),n!==D?(123===e.charCodeAt(Me)?(o="{",Me++):(o=D,0===ke&&a(B)),o!==D?(s=P(),s!==D?(c=l(),c!==D?(u=P(),u!==D?(125===e.charCodeAt(Me)?(d="}",Me++):(d=D,0===ke&&a(W)),d!==D?(Oe=t,r=te(i,c),t=r):(Me=t,t=D)):(Me=t,t=D)):(Me=t,t=D)):(Me=t,t=D)):(Me=t,t=D)):(Me=t,t=D)):(Me=t,t=D)):(Me=t,t=D),t}function y(){var t,r,i,n;return t=Me,"offset:"===e.substr(Me,7)?(r="offset:",Me+=7):(r=D,0===ke&&a(re)),r!==D?(i=P(),i!==D?(n=E(),n!==D?(Oe=t,r=ie(n),t=r):(Me=t,t=D)):(Me=t,t=D)):(Me=t,t=D),t}function F(){var e,t,r,i,n;if(e=Me,t=y(),t===D&&(t=null),t!==D)if(r=P(),r!==D){if(i=[],n=h(),n!==D)for(;n!==D;)i.push(n),n=h();else i=D;i!==D?(Oe=e,t=ne(t,i),e=t):(Me=e,e=D)}else Me=e,e=D;else Me=e,e=D;return e}function S(){var t,r;if(ke++,t=[],oe.test(e.charAt(Me))?(r=e.charAt(Me),Me++):(r=D,0===ke&&a(se)),r!==D)for(;r!==D;)t.push(r),oe.test(e.charAt(Me))?(r=e.charAt(Me),Me++):(r=D,0===ke&&a(se));else t=D;return ke--,t===D&&(r=D,0===ke&&a(ae)),t}function P(){var t,r,i;for(ke++,t=Me,r=[],i=S();i!==D;)r.push(i),i=S();return t=r!==D?e.substring(t,Me):r,ke--,t===D&&(r=D,0===ke&&a(le)),t}function A(){var t;return ce.test(e.charAt(Me))?(t=e.charAt(Me),Me++):(t=D,0===ke&&a(ue)),t}function C(){var t;return de.test(e.charAt(Me))?(t=e.charAt(Me),Me++):(t=D,0===ke&&a(pe)),t}function E(){var t,r,i,n,o,s;if(t=Me,48===e.charCodeAt(Me)?(r="0",Me++):(r=D,0===ke&&a(fe)),r===D){if(r=Me,i=Me,ve.test(e.charAt(Me))?(n=e.charAt(Me),Me++):(n=D,0===ke&&a(_e)),n!==D){for(o=[],s=A();s!==D;)o.push(s),s=A();o!==D?(n=[n,o],i=n):(Me=i,i=D)}else Me=i,i=D;r=i!==D?e.substring(r,Me):i}return r!==D&&(Oe=t,r=me(r)),t=r}function I(){var t,r,i,n,o,s,l,c;return ge.test(e.charAt(Me))?(t=e.charAt(Me),Me++):(t=D,0===ke&&a(we)),t===D&&(t=Me,"\\\\"===e.substr(Me,2)?(r="\\\\",Me+=2):(r=D,0===ke&&a(be)),r!==D&&(Oe=t,r=he()),t=r,t===D&&(t=Me,"\\#"===e.substr(Me,2)?(r="\\#",Me+=2):(r=D,0===ke&&a(ye)),r!==D&&(Oe=t,r=Fe()),t=r,t===D&&(t=Me,"\\{"===e.substr(Me,2)?(r="\\{",Me+=2):(r=D,0===ke&&a(Se)),r!==D&&(Oe=t,r=Pe()),t=r,t===D&&(t=Me,"\\}"===e.substr(Me,2)?(r="\\}",Me+=2):(r=D,0===ke&&a(Ae)),r!==D&&(Oe=t,r=Ce()),t=r,t===D&&(t=Me,"\\u"===e.substr(Me,2)?(r="\\u",Me+=2):(r=D,0===ke&&a(Ee)),r!==D?(i=Me,n=Me,o=C(),o!==D?(s=C(),s!==D?(l=C(),l!==D?(c=C(),c!==D?(o=[o,s,l,c],n=o):(Me=n,n=D)):(Me=n,n=D)):(Me=n,n=D)):(Me=n,n=D),i=n!==D?e.substring(i,Me):n,i!==D?(Oe=t,r=Ie(i),t=r):(Me=t,t=D)):(Me=t,t=D)))))),t}function x(){var e,t,r;if(e=Me,t=[],r=I(),r!==D)for(;r!==D;)t.push(r),r=I();else t=D;return t!==D&&(Oe=e,t=xe(t)),e=t}var M,O=arguments.length>1?arguments[1]:{},D={},T={start:s},R=s,k=function(e){return{type:"messageFormatPattern",elements:e,location:r()}},U=function(e){var t,r,i,n,a,o="";for(t=0,i=e.length;t<i;t+=1)for(n=e[t],r=0,a=n.length;r<a;r+=1)o+=n[r];return o},V=function(e){return{type:"messageTextElement",value:e,location:r()}},L=/^[^ \t\n\r,.+={}#]/,N={type:"class",value:"[^ \\t\\n\\r,.+={}#]",description:"[^ \\t\\n\\r,.+={}#]"},B={type:"literal",value:"{",description:'"{"'},j={type:"literal",value:",",description:'","'},W={type:"literal",value:"}",description:'"}"'},G=function(e,t){return{type:"argumentElement",id:e,format:t&&t[2],location:r()}},z={type:"literal",value:"number",description:'"number"'},q={type:"literal",value:"date",description:'"date"'},K={type:"literal",value:"time",description:'"time"'},Z=function(e,t){return{type:e+"Format",style:t&&t[2],location:r()}},H={type:"literal",value:"plural",description:'"plural"'},X=function(e){return{type:e.type,ordinal:!1,offset:e.offset||0,options:e.options,location:r()}},Y={type:"literal",value:"selectordinal",description:'"selectordinal"'},Q=function(e){return{type:e.type,ordinal:!0,offset:e.offset||0,options:e.options,location:r()}},J={type:"literal",value:"select",description:'"select"'},$=function(e){return{type:"selectFormat",options:e,location:r()}},ee={type:"literal",value:"=",description:'"="'},te=function(e,t){return{type:"optionalFormatPattern",selector:e,value:t,location:r()}},re={type:"literal",value:"offset:",description:'"offset:"'},ie=function(e){return e},ne=function(e,t){return{type:"pluralFormat",offset:e,options:t,location:r()}},ae={type:"other",description:"whitespace"},oe=/^[ \t\n\r]/,se={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},le={type:"other",description:"optionalWhitespace"},ce=/^[0-9]/,ue={type:"class",value:"[0-9]",description:"[0-9]"},de=/^[0-9a-f]/i,pe={type:"class",value:"[0-9a-f]i",description:"[0-9a-f]i"},fe={type:"literal",value:"0",description:'"0"'},ve=/^[1-9]/,_e={type:"class",value:"[1-9]",description:"[1-9]"},me=function(e){return parseInt(e,10)},ge=/^[^{}\\\0-\x1F \t\n\r]/,we={type:"class",value:"[^{}\\\\\\0-\\x1F\\x7f \\t\\n\\r]",description:"[^{}\\\\\\0-\\x1F\\x7f \\t\\n\\r]"},be={type:"literal",value:"\\\\",description:'"\\\\\\\\"'},he=function(){return"\\"},ye={type:"literal",value:"\\#",description:'"\\\\#"'},Fe=function(){return"\\#"},Se={type:"literal",value:"\\{",description:'"\\\\{"'},Pe=function(){return"{"},Ae={type:"literal",value:"\\}",description:'"\\\\}"'},Ce=function(){return"}"},Ee={type:"literal",value:"\\u",description:'"\\\\u"'},Ie=function(e){return String.fromCharCode(parseInt(e,16))},xe=function(e){return e.join("")},Me=0,Oe=0,De=[{line:1,column:1,seenCR:!1}],Te=0,Re=[],ke=0;if("startRule"in O){if(!(O.startRule in T))throw new Error("Can't start parsing from rule \""+O.startRule+'".');R=T[O.startRule]}if(M=R(),M!==D&&Me===e.length)return M;throw M!==D&&Me<e.length&&a({type:"end",description:"end of input"}),o(null,Re,Te<e.length?e.charAt(Te):null,Te<e.length?n(Te,Te+1):n(Te,Te))}return e(t,Error),{SyntaxError:t,parse:r}})(),f=o;c(o,"formats",{enumerable:!0,value:{number:{currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}}}),c(o,"__localeData__",{value:u(null)}),c(o,"__addLocaleData",{value:function(e){if(!e||!e.locale)throw new Error("Locale data provided to IntlMessageFormat is missing a `locale` property");o.__localeData__[e.locale.toLowerCase()]=e}}),c(o,"__parse",{value:p.parse}),c(o,"defaultLocale",{enumerable:!0,writable:!0,value:void 0}),o.prototype.resolvedOptions=function(){return{locale:this._locale}},o.prototype._compilePattern=function(e,t,r,i){return new d(t,r,i).compile(e)},o.prototype._findPluralRuleFunction=function(e){for(var t=o.__localeData__,r=t[e.toLowerCase()];r;){if(r.pluralRuleFunction)return r.pluralRuleFunction;r=r.parentLocale&&t[r.parentLocale.toLowerCase()]}throw new Error("Locale data added to IntlMessageFormat is missing a `pluralRuleFunction` for :"+e)},o.prototype._format=function(e,t){var r,i,n,a,o,l,c="";for(r=0,i=e.length;r<i;r+=1)if(n=e[r],"string"!=typeof n){if(a=n.id,!t||!s.call(t,a))throw l=new Error("A value must be provided for: "+a),l.variableId=a,l;o=t[a],c+=n.options?this._format(n.getOption(o),t):n.format(o)}else c+=n;return c},o.prototype._mergeFormats=function(t,r){var i,n,a={};for(i in t)s.call(t,i)&&(a[i]=n=u(t[i]),r&&s.call(r,i)&&e(n,r[i]));return a},o.prototype._resolveLocale=function(e){"string"==typeof e&&(e=[e]),e=(e||[]).concat(o.defaultLocale);var t,r,i,n,a=o.__localeData__;for(t=0,r=e.length;t<r;t+=1)for(i=e[t].toLowerCase().split("-");i.length;){if(n=a[i.join("-")])return n.locale;i.pop()}var s=e.pop();throw new Error("No locale data has been added to IntlMessageFormat for: "+e.join(", ")+", or the default locale: "+s)};var v={locale:"en",pluralRuleFunction:function(e,t){var r=String(e).split("."),i=!r[1],n=Number(r[0])==e,a=n&&r[0].slice(-1),o=n&&r[0].slice(-2);return t?1==a&&11!=o?"one":2==a&&12!=o?"two":3==a&&13!=o?"few":"other":1==e&&i?"one":"other"}};f.__addLocaleData(v),f.defaultLocale="en";var _=f;this.IntlMessageFormat=_}.call(this),this.IntlMessageFormat}.bind(Object.create(null))),define("file-viewer/keyboard/bindings",["require","exports","file-viewer/core/data/actions","file-viewer/keyboard/keycodes"],function(e,t,r,i){"use strict";function n(e){return null!=e&&null!=e.preventDefault}function a(e){return function(t){e(),n(t)&&t.preventDefault()}}function o(e){var t=e.dispatch,n=e.fileViewerId,o=e.fileId;return{keyboardEventCriteria:{keyCode:i.KeyCode.LEFT},callback:a(function(){t(r.flipToPreviousFile({fileViewerId:n,fileIdOrRevisionId:o,sourceContext:"keyboard"}))})}}function s(e){var t=e.dispatch,n=e.fileViewerId,o=e.fileId;return{keyboardEventCriteria:{keyCode:i.KeyCode.RIGHT},callback:a(function(){t(r.flipToNextFile({fileViewerId:n,fileIdOrRevisionId:o,sourceContext:"keyboard"}))})}}function l(e){return[s(e),o(e)]}function c(e){return{keyboardEventCriteria:{keyCode:i.KeyCode.PAGE_UP},callback:a(e)}}function u(e){return{keyboardEventCriteria:{keyCode:i.KeyCode.PAGE_DOWN},callback:a(e)}}function d(e){var t=e.pageUp,r=e.pageDown;return[c(t),u(r)]}function p(e){return{keyboardEventCriteria:{keyCode:i.KeyCode.UP},callback:a(e)}}function f(e){return{keyboardEventCriteria:{keyCode:i.KeyCode.DOWN},callback:a(e)}}function v(e){var t=e.up,r=e.down;return[p(t),f(r)]}function _(e){return[{keyboardEventCriteria:{keyCode:i.KeyCode.PLUS_CHROME,osModifierKey:!0},callback:a(e)}]}function m(e){return[{keyboardEventCriteria:{keyCode:i.KeyCode.MINUS_CHROME,osModifierKey:!0},callback:a(e)}]}function g(e){var t=e.zoomIn,r=e.zoomOut;return _(t).concat(m(r))}function w(e){return{keyboardEventCriteria:{keyCode:i.KeyCode.HOME},callback:a(e)}}function b(e){return{keyboardEventCriteria:{keyCode:i.KeyCode.END},callback:a(e)}}function h(e){var t=e.home,r=e.end;return[w(t),b(r)]}Object.defineProperty(t,"__esModule",{value:!0}),t.getFileFlippingBindings=l,t.getPageUpDownBindings=d,t.getUpDownBindings=v,t.getZoomInOutBindings=g,t.getHomeEndBindings=h}),define("file-viewer/keyboard/context",["require","exports","tslib","react"],function(e,t,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=r.__importStar(i);var n=function(){};t.KeyboardBindingContext=i.createContext({registerKeyBindings:n,unregisterKeyBindings:n,updateKeyBindings:n})}),define("file-viewer/keyboard",["require","exports","file-viewer/keyboard/keyboard_provider","file-viewer/keyboard/keyboard_connector","file-viewer/keyboard/keycodes","file-viewer/keyboard/bindings"],function(e,t,r,i,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardBindingProvider=r.KeyboardBindingProvider,t.KeyboardBindingConnector=i.KeyboardBindingConnector,t.KeyCode=n.KeyCode,t.getFileFlippingBindings=a.getFileFlippingBindings,t.getZoomInOutBindings=a.getZoomInOutBindings,t.getUpDownBindings=a.getUpDownBindings,t.getPageUpDownBindings=a.getPageUpDownBindings,t.getHomeEndBindings=a.getHomeEndBindings}),define("file-viewer/keyboard/keyboard_binding",["require","exports"],function(e,t){"use strict";function r(e){return{altKey:e.altKey===!0,ctrlKey:e.ctrlKey===!0,metaKey:e.metaKey===!0,shiftKey:e.shiftKey===!0,keyCode:e.keyCode}}function i(e,t){var r;return r={altKey:e.altKey===!0,shiftKey:e.shiftKey===!0,keyCode:e.keyCode,ctrlKey:!1,metaKey:!1},r[t]=e.osModifierKey===!0,r}Object.defineProperty(t,"__esModule",{value:!0}),t.genericNormalizedKeyboardEventCriteria={altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,keyCode:0},t.NormalizedKeyboardEventCriteriaKeys=Object.keys(t.genericNormalizedKeyboardEventCriteria),t.normalizeKeyboardEvent=r,t.normalizeKeyboardEventCriteria=i}),define("file-viewer/keyboard/keyboard_binding_map",["require","exports","file-viewer/keyboard/keyboard_binding"],function(e,t,r){"use strict";function i(e,t){return e.reduce(function(e,r){var i=r.keyboardEventCriteria,n=r.callback;return e[t(i)]=n,e},{})}function n(e){return r.NormalizedKeyboardEventCriteriaKeys.map(function(t){return t+":"+e[t]}).join("")}function a(e,t){return n(r.normalizeKeyboardEventCriteria(e,t))}function o(e,t){return i(e,function(e){return a(e,t)})}Object.defineProperty(t,"__esModule",{value:!0});var s=(function(){function e(e,t){this.bindingDict={},this.bindingDict=o(e,t)}return e.prototype.getCallbackForEvent=function(e){var t=r.normalizeKeyboardEvent(e);return this.bindingDict[n(t)]},e})();t.KeyboardBindingMap=s}),define("file-viewer/keyboard/keyboard_connector",["require","exports","tslib","react","file-viewer/keyboard/context"],function(e,t,r,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=r.__importStar(i);var a=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.componentDidMount=function(){this.registrationIdentifier=this.context.registerKeyBindings(this.props.keyboardBindings)},t.prototype.componentDidUpdate=function(e){this.props.keyboardBindings!==e.keyboardBindings&&null!=this.registrationIdentifier&&this.context.updateKeyBindings(this.registrationIdentifier,this.props.keyboardBindings)},t.prototype.componentWillUnmount=function(){null!=this.registrationIdentifier&&this.context.unregisterKeyBindings(this.registrationIdentifier)},t.prototype.render=function(){return null},t})(i.Component);t.KeyboardBindingConnector=a,a.contextType=n.KeyboardBindingContext}),define("file-viewer/keyboard/keyboard_provider",["require","exports","tslib","react","external/lodash","file-viewer/keyboard/keyboard_binding_map","file-viewer/keyboard/context"],function(e,t,r,i,n,a,o){"use strict";function s(e){var t=e.target||e.srcElement;if(!t)return!0;var r=t.tagName,i="INPUT"===r||"SELECT"===r||"TEXTAREA"===r,n=["submit","button"].indexOf(t.type)!==-1,a=t.hasAttribute&&t.hasAttribute("contenteditable")&&"false"!==t.getAttribute("contenteditable").toLowerCase();return!(i&&!n||a)}function l(e){return e.map(function(e){return r.__assign({},e,{callback:n.throttle(e.callback,20)})})}Object.defineProperty(t,"__esModule",{value:!0}),i=r.__importStar(i);var c=o.KeyboardBindingContext.Provider;t.LISTENER_KEY="keydown";var u=(function(e){function o(){var t=e.apply(this,arguments)||this;return t.registrationIdentifier=0,t.registeredBindings=[],t.bindingMap=new a.KeyboardBindingMap([],"ctrlKey"),t.registerKeyBindings=function(e){var r=t.registrationIdentifier++;return t.updateKeyBindings(r,e),r},t.unregisterKeyBindings=function(e){t.updateKeyBindings(e,[])},t.updateKeyBindings=function(e,r){t.registeredBindings[e]=null!=r?r:[],t.bindingMap=new a.KeyboardBindingMap(l(n.flatten(t.registeredBindings)),t.props.osModifierKey)},t.onKeyDown=function(e){if(s(e)){var r=t.bindingMap.getCallbackForEvent(e);r&&r(e)}},t.contextValue={registerKeyBindings:t.registerKeyBindings,unregisterKeyBindings:t.unregisterKeyBindings,updateKeyBindings:t.updateKeyBindings},t}return r.__extends(o,e),o.prototype.componentDidMount=function(){this.props.disableBindings!==!0&&document.addEventListener(t.LISTENER_KEY,this.onKeyDown)},o.prototype.componentWillUnmount=function(){document.removeEventListener(t.LISTENER_KEY,this.onKeyDown)},o.prototype.render=function(){return i.createElement(c,{value:this.contextValue},this.props.children)},o})(i.Component);t.KeyboardBindingProvider=u}),define("file-viewer/keyboard/keycodes",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e[e.A=65]="A",e[e.F=70]="F",e[e.P=80]="P",e[e.BACKSPACE=8]="BACKSPACE",e[e.TAB=9]="TAB",e[e.ENTER=13]="ENTER",e[e.SHIFT=16]="SHIFT",e[e.CONTROL=17]="CONTROL",e[e.ALT=18]="ALT",e[e.ESC=27]="ESC",e[e.SPACE=32]="SPACE",e[e.PAGE_UP=33]="PAGE_UP",e[e.PAGE_DOWN=34]="PAGE_DOWN",e[e.END=35]="END",e[e.HOME=36]="HOME",e[e.LEFT=37]="LEFT",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN",e[e.INSERT=45]="INSERT",e[e.DELETE=46]="DELETE",e[e.TWO_KEY=50]="TWO_KEY",e[e.EQUALS=61]="EQUALS",e[e.COMMAND=91]="COMMAND",e[e.PLUS_EQUALS_FF=107]="PLUS_EQUALS_FF",e[e.MINUS_FF=109]="MINUS_FF",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.PLUS_EQUALS_FF_GERMAN=171]="PLUS_EQUALS_FF_GERMAN",e[e.MINUS_FF_MAC=173]="MINUS_FF_MAC",e[e.PLUS_CHROME=187]="PLUS_CHROME",e[e.MINUS_CHROME=189]="MINUS_CHROME",e[e.FORWARD_SLASH=191]="FORWARD_SLASH",e[e.PROCESSING=229]="PROCESSING"})(t.KeyCode||(t.KeyCode={}))}),define("file-viewer/modes",["require","exports","file-viewer/modes/sidebar/sidebar","file-viewer/modes/sidebar/pane","file-viewer/modes/sidebar/control","file-viewer/modes/sidebar/utils"],function(e,t,r,i,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sidebar=r.Sidebar,t.Pane=i.Pane,t.CommentControl=n.CommentControl,t.DocumentationControl=n.DocumentationControl,t.WatermarkControl=n.WatermarkControl,t.ZoomControl=n.ZoomControl,t.SlackControl=n.SlackControl;t.SIDEBAR_OPEN_WIDTH=parseInt("384px",10),t.SIDEBAR_CLOSED_WIDTH=parseInt("48px",10),t.createSidebarDispatchHandler=a.createSidebarDispatchHandler,t.isSidebarOpen=a.isSidebarOpen}),define("file-viewer/modes/sidebar/control",["require","exports","tslib","classnames","react","spectrum/tooltip","file-viewer/core","file-viewer/modes/sidebar/utils"],function(e,t,r,i,n,a,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=r.__importDefault(i),n=r.__importStar(n);var l={totalWidthOpen:"384px",totalWidthClosed:"48px",controlListWidth:"48px",control:"BXSQ8s4gfq",controlWrapper:"COYt5EXXXr",isSelected:"_3l-Swh4sdi",controlIcon:"_33nnkxMPOU",controlIconDisabled:"_1hQqP-W_56",threadCount:"_1C3CBcf46o",closedUnreadVariant:"_33UVYisbPW",closedReadVariant:"_8dXPgaeMLM",plus:"_1eve4QrCBO",paneOpen:"_15ggD5dslP",redDot:"_1MqE83Y6lv"};t.Control=function(e){var t,r,c=e.labelText,u=e.id,d=e.children,p=e.dispatch,f=e.fileViewerUiData,v=e.fileViewerId,_=e.disabled,m=e.onClick,g=e.innerRef,w=e.className,b=e.ariaLabel,h=s.isSidebarOpen(f.sidebar),y=h&&f.sidebar.selectedControlId===u;return n.createElement("div",{role:"tab",className:l.controlWrapper},n.createElement(a.Tooltip,{positionOffset:8,positioning:"left",tooltipContent:c},n.createElement("button",{"aria-label":null!=b?b:c,"data-control-id":u,className:i.default(l.control,w,(t={},t[l.isSelected]=y,t)),onClick:function(){_||(m&&m(),p(o.sidebarControlClickAction({fileViewerId:v,controlId:u})))},ref:g,"aria-expanded":y,"aria-selected":y},n.createElement("div",{className:i.default(l.controlIcon,(r={},r[l.controlIconDisabled]=_,r))}),d)))},t.DocumentationControl=function(e){var r=e.intl;return n.createElement(t.Control,Object.assign({},e,{id:o.SidebarControlId.Documentation,labelText:r.formatMessage({id:"17znK",defaultMessage:"About"})}))},t.CommentControl=function(e){var r,a=e.areAnyThreadsUnread,s=e.threadCount,c=e.fileViewerUiData,u=e.intl,d=o.SidebarControlId.Comments,p=u.formatMessage({id:"3rjoD",defaultMessage:"Comments"}),f=u.formatMessage({id:"2EDv9",defaultMessage:"Toggle Comments Sidebar"});return c.sidebar.visibility===o.SidebarVisibility.Open||null==s||0===s?n.createElement(t.Control,Object.assign({},e,{id:d,ariaLabel:f,labelText:p})):n.createElement(t.Control,Object.assign({},e,{id:d,labelText:p,ariaLabel:f,className:i.default((r={},r[l.closedUnreadVariant]=a,r[l.closedReadVariant]=!a,r[l.plus]=s>99,r))}),n.createElement("div",{className:l.threadCount},Math.min(s,99)))},t.WatermarkControl=function(e){var r=e.labelText,i=e.intl,a=e.children;return n.createElement(t.Control,Object.assign({},e,{id:o.SidebarControlId.Watermarking,labelText:r||i.formatMessage({id:"1l5w1",defaultMessage:"Watermark"})}),a)},t.ZoomControl=function(e){var r,a=e.intl,s=e.fileViewerUiData.sidebar.selectedControlId===o.SidebarControlId.Zoom;return n.createElement(t.Control,Object.assign({},e,{id:o.SidebarControlId.Zoom,labelText:a.formatMessage({id:"32jM8",defaultMessage:"Zoom"}),className:i.default((r={},r[l.paneOpen]=s,r))}))},t.SlackControl=function(e){var r,a=e.intl,s=e.fileViewerUiData.sidebar.selectedControlId===o.SidebarControlId.Slack;return n.createElement(t.Control,Object.assign({},e,{id:o.SidebarControlId.Slack,labelText:a.formatMessage({id:"tiMzO",defaultMessage:"Slack"}),className:i.default((r={},r[l.paneOpen]=s,r[l.redDot]=e.hasUnreadMessage,r))}))},t.defaultRenderSidebarControlsFn=function(e){return[n.createElement(t.DocumentationControl,Object.assign({key:"documentation-control"},e)),n.createElement(t.CommentControl,Object.assign({key:"comment-control"},e,{areAnyThreadsUnread:!1,threadCount:0})),n.createElement(t.WatermarkControl,Object.assign({key:"watermark-control"},e))]}}),define("file-viewer/modes/sidebar/control_list",["require","exports","tslib","classnames","react","file-viewer/core","file-viewer/modes/sidebar/utils","file-viewer/core/data/modes/types"],function(e,t,r,i,n,a,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=r.__importDefault(i),n=r.__importStar(n);var l={totalWidthOpen:"384px",totalWidthClosed:"48px",controlListWidth:"48px",controlList:"_5hRhvsTRDu",isBackgroundChalk:"_1WTXOA8l8h",isControlsOnly:"iQS0u8699j",wrapper:"_2u9TnyYmDT",passWrapper:"_1l56KnLCts _2u9TnyYmDT",ctaWrapper:"_1JOG8AxeAH _2u9TnyYmDT",controlsWrapper:"_3DfCFtkX0k _2u9TnyYmDT",overflowMenuWrapper:"_28j2UUwxL0 _2u9TnyYmDT",controlListSeparator:"_1hg15rVhTv"};t.ControlList=function(e){var t,c=e.renderSidebarCallToActionsFn,u=e.renderSidebarControlsFn,d=e.renderSidebarOverflowMenuFn,p=e.renderSidebarPASSFn,f=e.backgroundColor,v=r.__rest(e,["renderSidebarCallToActionsFn","renderSidebarControlsFn","renderSidebarOverflowMenuFn","renderSidebarPASSFn","backgroundColor"]);if(o.isEditMode(v.fileViewerUiData.currentMode))return null;var _=v.fileViewerUiData.sidebar.visibility===a.SidebarVisibility.Closed,m=_&&c,g=_&&p,w=f===s.SidebarColor.Chalk;return n.createElement("div",{className:i.default(l.controlList,(t={},t[l.isControlsOnly]=!m&&!g,t[l.isBackgroundChalk]=w,t))},g&&n.createElement("div",{className:l.passWrapper},p(v)),m&&n.createElement("div",{className:l.ctaWrapper},c(v)),(m||g)&&n.createElement("hr",{className:l.controlListSeparator}),n.createElement("div",{className:l.controlsWrapper,role:"tablist"},u(v)),d&&n.createElement("div",{className:l.overflowMenuWrapper},d(v)))}}),define("file-viewer/modes/sidebar/header",["require","exports","tslib","react","file-viewer/core"],function(e,t,r,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=r.__importStar(i);var a={totalWidthOpen:"384px",totalWidthClosed:"48px",controlListWidth:"48px",header:"_2PGvvyezID",passAndActionWrapper:"JNzCLEJ9KG",passWrapper:"_38xOCX25Qt",ctaWrapper:"_2YfLaf8L7b",notificationWrapper:"_15d1-PI7jT"};t.Header=function(e){var t=e.renderSidebarCallToActionsFn,o=e.renderSidebarNotificationsFn,s=e.renderSidebarPASSFn,l=r.__rest(e,["renderSidebarCallToActionsFn","renderSidebarNotificationsFn","renderSidebarPASSFn"]);return(t||s)&&l.fileViewerUiData.sidebar.visibility===n.SidebarVisibility.Open?i.createElement("div",{className:a.header},i.createElement("div",{className:a.passAndActionWrapper},i.createElement("div",{className:a.passWrapper},s&&s(l)),i.createElement("div",{className:a.ctaWrapper},t&&t(l))),i.createElement("div",{className:a.notificationWrapper},o&&o(l))):null}}),define("file-viewer/modes/sidebar/pane",["require","exports","tslib","react","file-viewer/modes/sidebar/utils","classnames"],function(e,t,r,i,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=r.__importStar(i),a=r.__importDefault(a);var o={pane:"mr8CWsBI-a"};t.Pane=function(e){var t=e.fileViewerUiData.sidebar,r=n.isSidebarOpen(t)&&n.isSidebarPaneIdAtTopOfStack(e.paneId,t);return i.createElement("div",{role:"tabpanel",className:a.default(o.pane,e.className),hidden:!r},e.children)}}),define("file-viewer/modes/sidebar/pane_stack",["require","exports","tslib","react","classnames","file-viewer/modes/sidebar/utils","file-viewer/core/data/modes/types"],function(e,t,r,i,n,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=r.__importStar(i),n=r.__importDefault(n);var s={totalWidthOpen:"384px",totalWidthClosed:"48px",controlListWidth:"48px",paneStack:"_1I6XjY7iD9",isBackgroundChalk:"ybNsPBVOwD",paneStackFullWidth:"lvkSVSVrWv"};t.PaneStack=function(e){var t,l=e.registerSidebarPanesFn,c=e.backgroundColor,u=e.width,d=r.__rest(e,["registerSidebarPanesFn","backgroundColor","width"]),p=l(d),f=c===o.SidebarColor.Chalk,v=d.fileViewerUiData.sidebar.paneStack.map(function(e){var t=p[e];return t||console.error('Unable to find pane with paneId: "'+e+'"'),t}).filter(Boolean);return i.createElement("div",{className:n.default(s.paneStack,(t={},t[s.paneStackFullWidth]=a.isEditMode(d.fileViewerUiData.currentMode),t[s.isBackgroundChalk]=f,t)),hidden:!a.isSidebarOpen(d.fileViewerUiData.sidebar),style:u?{width:u}:void 0},v)}}),define("file-viewer/modes/sidebar/pane_title",["require","exports","tslib","react","spectrum/icon_arrow","spectrum/colorized_icon","spectrum/button","file-viewer/modes/sidebar/utils","file-viewer/core/data/actions"],function(e,t,r,i,n,a,o,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=r.__importStar(i);var c={paneTitle:"_1h6cAvmgpD",paneTitleButton:"NWcHe_xUI8",paneTitleArrowRightIcon:"_2MI7U7kgx4",paneTitleText:"_2ghT5N5NWx"};t.PaneTitleComponent=function(e){return e.onClick?i.createElement("div",{className:c.paneTitle},i.createElement(o.Button,{variant:"styleless",className:c.paneTitleButton,onClick:e.onClick},i.createElement("span",{className:c.paneTitleArrowRightIcon},i.createElement(a.ColorizedIcon,null,i.createElement(n.IconArrow,{name:"right-small",width:12,height:16,viewBox:"0 0 8 12"}))),i.createElement("span",{className:c.paneTitleText},e.title))):i.createElement("div",{className:c.paneTitle},i.createElement("span",{className:c.paneTitleText},e.title))};var u=(function(e){function n(){var t=e.apply(this,arguments)||this;return t.canGoBackToPreviousPane=function(){var e=t.props,r=e.paneId,i=e.fileViewerUiData;return s.isSidebarPaneIdAtTopOfStack(r,i.sidebar)&&i.sidebar.paneStack.length>1},t.goBackToPreviousPane=function(){t.props.dispatch(l.popSidebarPane({fileViewerId:t.props.fileViewerId}))},t}return r.__extends(n,e),n.prototype.render=function(){return i.createElement(t.PaneTitleComponent,{title:this.props.title,onClick:this.canGoBackToPreviousPane()?this.goBackToPreviousPane:void 0})},n})(i.Component);t.PaneTitle=u}),define("file-viewer/modes/sidebar/sidebar",["require","exports","tslib","classnames","react","file-viewer/modes/sidebar/control_list","file-viewer/modes/sidebar/header","file-viewer/modes/sidebar/pane_stack","file-viewer/modes/sidebar/utils"],function(e,t,r,i,n,a,o,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=r.__importDefault(i),n=r.__importStar(n);var c={totalWidthOpen:"384px",totalWidthClosed:"48px",controlListWidth:"48px",sidebar:"_1ah_BhOiDc",sidebarContent:"_2HMOm5Hi5o",isOpen:"_35m4GZHt8p",widthClosed:"48px",widthOpen:"384px"};t.Sidebar=function(e){var t,u=e.registerSidebarPanesFn,d=e.renderSidebarCallToActionsFn,p=e.renderSidebarControlsFn,f=e.renderSidebarNotificationsFn,v=e.renderSidebarOverflowMenuFn,_=e.renderSidebarPASSFn,m=e.backgroundColor,g=e.width,w=r.__rest(e,["registerSidebarPanesFn","renderSidebarCallToActionsFn","renderSidebarControlsFn","renderSidebarNotificationsFn","renderSidebarOverflowMenuFn","renderSidebarPASSFn","backgroundColor","width"]);return n.createElement("aside",{className:i.default(c.sidebar,(t={},t[c.isOpen]=l.isSidebarOpen(w.fileViewerUiData.sidebar),t)),style:g?{width:g}:void 0},n.createElement(o.Header,Object.assign({},w,{renderSidebarCallToActionsFn:d,renderSidebarPASSFn:_,renderSidebarNotificationsFn:f})),n.createElement("div",{className:c.sidebarContent},n.createElement(a.ControlList,Object.assign({},w,{renderSidebarCallToActionsFn:d,renderSidebarControlsFn:p,
renderSidebarOverflowMenuFn:v,renderSidebarPASSFn:_,backgroundColor:m})),n.createElement(s.PaneStack,Object.assign({},w,{registerSidebarPanesFn:u,backgroundColor:m,width:g?g-parseInt("48px",10):void 0}))))}}),define("file-viewer/modes/sidebar/utils",["require","exports","file-viewer/core"],function(e,t,r){"use strict";function i(e){return"@@previews/sidebarControlClick"===e.type}function n(e){return"@@previews/setSidebarVisibility"===e.type}Object.defineProperty(t,"__esModule",{value:!0});var a,o=(a={},a[r.SidebarControlId.Documentation]=function(e,t){e(r.changeMode({fileViewerId:t,mode:r.FileViewerMode.Documentation,sourceContext:"sidebar"}))},a[r.SidebarControlId.Comments]=function(e,t){e(r.changeMode({fileViewerId:t,mode:r.FileViewerMode.Commenting,sourceContext:"sidebar"}))},a[r.SidebarControlId.Watermarking]=function(e,t){e(r.changeMode({fileViewerId:t,mode:r.FileViewerMode.Watermarking,sourceContext:"sidebar"}))},a[r.SidebarControlId.Zoom]=function(e,t){e(r.changeMode({fileViewerId:t,mode:r.FileViewerMode.Zoom,sourceContext:"sidebar"}))},a[r.SidebarControlId.Slack]=function(e,t){e(r.changeMode({fileViewerId:t,mode:r.FileViewerMode.Slack,sourceContext:"sidebar"}))},a);t.createSidebarDispatchHandler=function(e,t){return function(r){if(i(r)){return(0,o[r.payload.controlId])(e,t,r)}return e(n(r)?r:r)}},t.isSidebarOpen=function(e){return e.visibility===r.SidebarVisibility.Open},t.isSidebarPaneIdAtTopOfStack=function(e,t){var r=t.paneStack;return r.length>0&&r[r.length-1]===e},t.isEditMode=function(e){return e===r.FileViewerMode.Watermarking}}),define("file-viewer/strings",["require","exports","modules/core/i18n"],function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.strings={"6nnDP":{token:"number",message:function(e){return r.ungettext("Viewed %(number)s year ago","Viewed %(number)s years ago",e,{comment:"label for last time a user has viewed the file"})}},HTBEh:{token:"number",message:function(e){return r.ungettext("Viewed %(number)s month ago","Viewed %(number)s months ago",e,{comment:"label for last time a user has viewed the file"})}},"32pDF":{token:"number",message:function(e){return r.ungettext("Viewed %(number)s week ago","Viewed %(number)s weeks ago",e,{comment:"label for last time a user has viewed the file"})}},Roztq:{token:"number",message:function(e){return r.ungettext("Viewed %(number)s day ago","Viewed %(number)s days ago",e,{comment:"label for last time a user has viewed the file"})}},"1Vt6M":{token:"number",message:function(e){return r.ungettext("Viewed %(number)s hour ago","Viewed %(number)s hours ago",e,{comment:"label for last time a user has viewed the file"})}},"1-Qnz":{token:"number",message:function(e){return r.ungettext("Viewed %(number)s min ago","Viewed %(number)s mins ago",e,{comment:"label for last time a user has viewed the file"})}},"1A8Wt":r._("Viewed just now",{comment:"label for last time a user has viewed the file"}),"3f1s4":r._("Viewing now",{comment:"tooltip showing a user viewing a file"}),"3bhF-":r._("Guest",{comment:"Name of guest user"}),"3O68s":r._("99+",{comment:"label for facepile when there are more than 99 people having seen the file"}),"2u_Bg":{token:"count",message:function(e){return r.ungettext("%(count)s other","%(count)s others",e,{comment:"label for number of other people that viewed this file"})}},"17znK":r._("About",{comment:"Label next to a button that opens a sidebar pane with things like file metadata and activity."}),"3rjoD":r._("Comments",{comment:"Label next to a button that opens a sidebar pane for leaving comments on a file."}),"2EDv9":r._("Toggle Comments Sidebar",{comment:"Aria Label for a button that opens and closes sidebar pane for leaving comments on a file."}),"1l5w1":r._("Watermark",{comment:"Label next to a button that opens a sidebar pane for creating a watermark."}),"32jM8":r._("Zoom",{comment:"Refers to the third party Zoom."}),tiMzO:r._("Slack",{comment:"Label next to a button that opens a sidebar pane for the Slack extension."}),"380FK":r._("Hide sidebar",{comment:"Tooltip text to hide preview sidebar"}),"1-hY4":r._("Show sidebar",{comment:"Tooltip text to show preview sidebar"}),"3r1su":r._("Fullscreen",{comment:"Fullscreen control for preview toolbar"}),"1crUg":r._("Page down",{comment:"Page down control for preview toolbar"}),"30U9L":r._("Page up",{comment:"Page up control for preview toolbar"}),yOZ5I:r._("Zoom in",{comment:"Zoom in control for preview toolbar"}),"2dTGQ":r._("Zoom out",{comment:"Zoom out control for preview toolbar"}),"3A0DU":r._("Previous",{comment:"Flip to the previous file in a series of files when previewing files on the web"}),"1XG6i":r._("Next",{comment:"Flip to the next file in a series of files when previewing files on the web"}),"1LWb5":r._("%(file_number)s of %(file_count)s",{comment:"Index indicator for preview toolbar file flipping controls"}),"3Dloj":r._("Page...",{comment:"Placeholder text for preview toolbar page indicator input"}),Z4LHJ:r._("Click to jump to a page",{comment:"Tooltip text for the page indicator"}),"1BXqX":r._("Zoom to fit",{comment:"Toolbar tooltip text for zooming an image to fit the viewport"}),"2iKGa":r._("View actual size",{comment:"Toolbar tooltip text for zooming an image to its real size"}),"2yLzB":r._("Page %(index)s",{comment:"label for each document page"}),"2w1Rq":r._("Document Sidebar",{comment:"a11y label for doc sidebar"}),uh_2T:r._("External Link",{comment:"Label for external anchor link"}),PLDnD:r._("Internal Link",{comment:"Label for internal anchor link"}),ACvIY:r._("Reload",{comment:"Reload button label"}),"1_qu7":r._("Close",{comment:"Close button label"}),"2nXNn":r._("Document Password Modal",{comment:"password modal label"}),"35GUv":r._("This file is password protected",{comment:"modal title"}),MBnKP:r._("Submit",{comment:"submit button label"}),Cx9Xf:r._("Cancel",{comment:"Cancel button label"}),"2eyfy":r._("The password you entered is incorrect, please try again.",{comment:"message in modal when user enters wrong passwords"}),"3X32N":r._("Enter the password to open this file.",{comment:"Password input prompt"}),NlVBZ:r._("Password",{comment:"Password input placeholder"}),b7cZq:r._("Open",{comment:"Open with button label"}),"3ptrG":{token:"value",message:function(e){return r.ungettext("%(value)s byte","%(value)s bytes",e,{comment:"file size in bytes"})}},"2StGi":r._("%(value)s KB",{comment:"file size in Kilobytes"}),"1IUi0":r._("%(value)s MB",{comment:"file size in Megabytes"}),"39Cwd":r._("%(value)s GB",{comment:"file size in Gigabytes"}),"3Ukg4":r._("%(value)s TB",{comment:"file size in Terabytes"}),"1H_zL":r._("%(extension)s files cant currently be previewed.",{comment:"Preview Error section message"}),"1qTZi":r._("View on dropbox.com",{comment:"View preview on dropbox.com link"}),"2f_eX":r._("This %(extension)s file is password-protected",{comment:"Preview Error section title"}),"1qFPZ":r._("This file cannot be previewed",{comment:"Preview Error section title"}),"3IvZ8":r._("Files without extensions cannot be previewed",{comment:"Preview Error section title"}),"1sf_t":r._("This file is too big to preview",{comment:"Preview Error section title"}),"3KmLP":r._("The maximum size for %(extension)s files is %(size)s",{comment:"Preview Error section message"}),"2aX8q":r._("File is uploading",{comment:"Preview Error section title"}),"3-4kT":r._("This file cannot be previewed because you are offline",{comment:"Preview Error section title"}),"3c4MZ":r._("Previous Page",{comment:"Button to move to previous page in document"}),mMrPB:r._("Next Page",{comment:"Button to move to next page in document"}),"1D-MZ":r._("Cant show link. Somethings wrong with this file.",{comment:"Shown instead of description if there is an error"}),iTxna:r._("Open in new tab",{comment:"Label text for open button"}),"2l6UF":{token:"number",message:function(e){return r.ungettext("%(number)s year ago","%(number)s years ago",e,{comment:"label for comment that was left a few years ago"})}},"4jyR0":{token:"number",message:function(e){return r.ungettext("%(number)s month ago","%(number)s months ago",e,{comment:"label for comment that was left a few months ago"})}},"1i3A1":{token:"number",message:function(e){return r.ungettext("%(number)s week ago","%(number)s weeks ago",e,{comment:"label for comment that was left a few weeks ago"})}},Vu6ED:{token:"number",message:function(e){return r.ungettext("%(number)s day ago","%(number)s days ago",e,{comment:"label for comment that was left a few days ago"})}},"2qR7n":{token:"number",message:function(e){return r.ungettext("%(number)s hour ago","%(number)s hours ago",e,{comment:"label for comment that was left a few hours ago"})}},"8pkVG":{token:"number",message:function(e){return r.ungettext("%(number)s min ago","%(number)s mins ago",e,{comment:"label for comment that was left a few mins ago"})}},"2qZ7G":r._("Just now",{comment:"label for comment that was left less than a min ago"}),"8fDlH":r._("@mention someone to share this file",{comment:"mention instruction message"}),"3iN4V":r._("@mention someone",{comment:"mention btn label"}),"1nqpH":r._("Searching contacts",{comment:"message displayed while search is processed"}),"2lweF":r._("No Users Found",{comment:"No Users Found"}),"nlds-":r._("Invite %(user_name)s",{comment:"invite message"}),"3pIbH":r._("Save",{comment:"edit button label"}),"2Wo9h":r._("This comment was deleted.",{comment:"message after comment is deleted"}),"3x7uu":r._("Edit",{comment:"edit button label"}),"2oCAM":r._("Delete",{comment:"delete button label"}),"3ZEru":r._("Mark as read",{comment:"Mark as read button label"}),"3UAhM":r._("Mark as unread",{comment:"Mark as unread button label"}),"1oD4j":r._("Marked as resolved",{comment:"Marked as resolved button label"}),LeHxj:r._("On older version",{comment:"message displayed when user is viewing an older version of the file"}),"3a8xH":r._("Reply",{comment:"Reply affordance shown when hovering a collapsed thread"}),"4vU51":r._("Write a comment",{comment:"Write a comment button label"}),"1-FNO":r._("Post",{comment:"Post button label"}),"31CgX":r._("Restore",{comment:"Restore button label"}),"2cH3Z":r._("Resolve",{comment:"Resolve button label"}),"1X0tz":r._("Reply",{comment:"Reply button label"}),"1jeeF":r._("View version history",{comment:"View version history button label"}),"3qNGZ":r._("Page %(page)s",{comment:"page number where comment was left on"}),"1CYeW":r._("%(count)s comments",{comment:"number of comments left"}),"1g0Xl":r._("%(count)s unread",{comment:"number of unread comments"}),"1j6jP":r._("Comment thread",{comment:"Comment thread accessbility label"}),"3zwVy":r._("Unread comment thread",{comment:"Unread comment thread accessbility label"}),"2Zz4g":r._("Download",{comment:"Download button label"}),"3hwIp":r._("Sign in",{comment:"Sign in button label"}),"13yJF":r._("Share",{comment:"Share button label"}),"1W2uL":r._("Loading...",{comment:"`Indicating some data is loading. Another view will show up once its loaded`"}),"13oti":{token:"number",message:function(e){return r.ungettext("%(number)s slide","%(number)s slides",e,{comment:"number of slides in a presentation"})}},"3LGzA":{token:"number",message:function(e){return r.ungettext("%(number)s page","%(number)s pages",e,{comment:"number of pages in a document"})}},"2BZaZ":r._("Open with Dropbox Preview",{comment:"Hover text for button that will open a file with Dropbox Preview"}),hyeca:r._("In %(folder_name)s",{comment:"describing the folder that a file belongs to"})}}),define("modules/clean/api_v2/redux/base_action",["require","exports","tslib"],function(e,t,r){"use strict";function i(e){return function(t,r,i){return{type:e,payload:t,meta:r,error:i}}}function n(e){return function(t){var i=this;return function(n){var a=n.dispatch;return function(n){return function(o){return r.__awaiter(i,void 0,void 0,function(){var i,s,l,c,u,d,p;return r.__generator(this,function(r){switch(r.label){case 0:if(s=n(o),l=e[o.type],!l)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),u=(c=l).action,d={arg:o.payload.arg},[4,t.rpc(l.endpoint,o.payload.arg,o.payload.params)];case 2:return i=u.apply(c,[(d.result=r.sent(),d),o.meta]),[3,4];case 3:return p=r.sent(),i=l.action({arg:o.payload.arg,params:o.payload.params},o.meta,p),[3,4];case 4:return[2,a(i)];case 5:return[2,s]}})})}}}}}Object.defineProperty(t,"__esModule",{value:!0}),t._createAction=i,t._createMiddleware=n}),define("modules/clean/api_v2/redux/previews",["require","exports","modules/clean/api_v2/redux/base_action"],function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i;t.Action={GetArchiveFiles:"@@apiv2_redux/previews/get_archive_files",GetArchiveFilesResult:"@@apiv2_redux/previews/get_archive_files_result",GetPreviewDataBatch:"@@apiv2_redux/previews/get_preview_data_batch",GetPreviewDataBatchResult:"@@apiv2_redux/previews/get_preview_data_batch_result",GetPreviewDataByFileIdsBatch:"@@apiv2_redux/previews/get_preview_data_by_file_ids_batch",GetPreviewDataByFileIdsBatchResult:"@@apiv2_redux/previews/get_preview_data_by_file_ids_batch_result",GetPreviewDataBySpecsBatch:"@@apiv2_redux/previews/get_preview_data_by_specs_batch",GetPreviewDataBySpecsBatchResult:"@@apiv2_redux/previews/get_preview_data_by_specs_batch_result",LoggedOutGetArchiveFiles:"@@apiv2_redux/previews/logged_out/get_archive_files",LoggedOutGetArchiveFilesResult:"@@apiv2_redux/previews/logged_out/get_archive_files_result"},t.getArchiveFilesAction=r._createAction(t.Action.GetArchiveFiles),t.getArchiveFilesResultAction=r._createAction(t.Action.GetArchiveFilesResult),t.getPreviewDataBatchAction=r._createAction(t.Action.GetPreviewDataBatch),t.getPreviewDataBatchResultAction=r._createAction(t.Action.GetPreviewDataBatchResult),t.getPreviewDataByFileIdsBatchAction=r._createAction(t.Action.GetPreviewDataByFileIdsBatch),t.getPreviewDataByFileIdsBatchResultAction=r._createAction(t.Action.GetPreviewDataByFileIdsBatchResult),t.getPreviewDataBySpecsBatchAction=r._createAction(t.Action.GetPreviewDataBySpecsBatch),t.getPreviewDataBySpecsBatchResultAction=r._createAction(t.Action.GetPreviewDataBySpecsBatchResult),t.loggedOutGetArchiveFilesAction=r._createAction(t.Action.LoggedOutGetArchiveFiles),t.loggedOutGetArchiveFilesResultAction=r._createAction(t.Action.LoggedOutGetArchiveFilesResult);var n=(i={},i[t.Action.GetArchiveFiles]={endpoint:"get_archive_files",action:t.getArchiveFilesResultAction},i[t.Action.GetPreviewDataBatch]={endpoint:"get_preview_data_batch",action:t.getPreviewDataBatchResultAction},i[t.Action.GetPreviewDataByFileIdsBatch]={endpoint:"get_preview_data_by_file_ids_batch",action:t.getPreviewDataByFileIdsBatchResultAction},i[t.Action.GetPreviewDataBySpecsBatch]={endpoint:"get_preview_data_by_specs_batch",action:t.getPreviewDataBySpecsBatchResultAction},i[t.Action.LoggedOutGetArchiveFiles]={endpoint:"logged_out/get_archive_files",action:t.loggedOutGetArchiveFilesResultAction},i);t.middleware=r._createMiddleware(n)}),define("modules/clean/api_v2/redux/users",["require","exports","modules/clean/api_v2/redux/base_action"],function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i;t.Action={GetAccount:"@@apiv2_redux/users/get_account",GetAccountResult:"@@apiv2_redux/users/get_account_result",GetAccountBatch:"@@apiv2_redux/users/get_account_batch",GetAccountBatchResult:"@@apiv2_redux/users/get_account_batch_result",GetCurrentAccount:"@@apiv2_redux/users/get_current_account",GetCurrentAccountResult:"@@apiv2_redux/users/get_current_account_result",GetFileModifierAccount:"@@apiv2_redux/users/get_file_modifier_account",GetFileModifierAccountResult:"@@apiv2_redux/users/get_file_modifier_account_result",GetMobileClientSettings:"@@apiv2_redux/users/get_mobile_client_settings",GetMobileClientSettingsResult:"@@apiv2_redux/users/get_mobile_client_settings_result",GetPlanInfo:"@@apiv2_redux/users/get_plan_info",GetPlanInfoResult:"@@apiv2_redux/users/get_plan_info_result",GetRootInfo:"@@apiv2_redux/users/get_root_info",GetRootInfoResult:"@@apiv2_redux/users/get_root_info_result",GetSharingPrefs:"@@apiv2_redux/users/get_sharing_prefs",GetSharingPrefsResult:"@@apiv2_redux/users/get_sharing_prefs_result",GetSpaceUsage:"@@apiv2_redux/users/get_space_usage",GetSpaceUsageResult:"@@apiv2_redux/users/get_space_usage_result",GetUserUiInfo:"@@apiv2_redux/users/get_user_ui_info",GetUserUiInfoResult:"@@apiv2_redux/users/get_user_ui_info_result",NeedsScaleMitigation:"@@apiv2_redux/users/needs_scale_mitigation",NeedsScaleMitigationResult:"@@apiv2_redux/users/needs_scale_mitigation_result",SaveMobileClientSettings:"@@apiv2_redux/users/save_mobile_client_settings",SaveMobileClientSettingsResult:"@@apiv2_redux/users/save_mobile_client_settings_result",SetSharingPrefs:"@@apiv2_redux/users/set_sharing_prefs",SetSharingPrefsResult:"@@apiv2_redux/users/set_sharing_prefs_result"},t.getAccountAction=r._createAction(t.Action.GetAccount),t.getAccountResultAction=r._createAction(t.Action.GetAccountResult),t.getAccountBatchAction=r._createAction(t.Action.GetAccountBatch),t.getAccountBatchResultAction=r._createAction(t.Action.GetAccountBatchResult),t.getCurrentAccountAction=r._createAction(t.Action.GetCurrentAccount),t.getCurrentAccountResultAction=r._createAction(t.Action.GetCurrentAccountResult),t.getFileModifierAccountAction=r._createAction(t.Action.GetFileModifierAccount),t.getFileModifierAccountResultAction=r._createAction(t.Action.GetFileModifierAccountResult),t.getMobileClientSettingsAction=r._createAction(t.Action.GetMobileClientSettings),t.getMobileClientSettingsResultAction=r._createAction(t.Action.GetMobileClientSettingsResult),t.getPlanInfoAction=r._createAction(t.Action.GetPlanInfo),t.getPlanInfoResultAction=r._createAction(t.Action.GetPlanInfoResult),t.getRootInfoAction=r._createAction(t.Action.GetRootInfo),t.getRootInfoResultAction=r._createAction(t.Action.GetRootInfoResult),t.getSharingPrefsAction=r._createAction(t.Action.GetSharingPrefs),t.getSharingPrefsResultAction=r._createAction(t.Action.GetSharingPrefsResult),t.getSpaceUsageAction=r._createAction(t.Action.GetSpaceUsage),t.getSpaceUsageResultAction=r._createAction(t.Action.GetSpaceUsageResult),t.getUserUiInfoAction=r._createAction(t.Action.GetUserUiInfo),t.getUserUiInfoResultAction=r._createAction(t.Action.GetUserUiInfoResult),t.needsScaleMitigationAction=r._createAction(t.Action.NeedsScaleMitigation),t.needsScaleMitigationResultAction=r._createAction(t.Action.NeedsScaleMitigationResult),t.saveMobileClientSettingsAction=r._createAction(t.Action.SaveMobileClientSettings),t.saveMobileClientSettingsResultAction=r._createAction(t.Action.SaveMobileClientSettingsResult),t.setSharingPrefsAction=r._createAction(t.Action.SetSharingPrefs),t.setSharingPrefsResultAction=r._createAction(t.Action.SetSharingPrefsResult);var n=(i={},i[t.Action.GetAccount]={endpoint:"get_account",action:t.getAccountResultAction},i[t.Action.GetAccountBatch]={endpoint:"get_account_batch",action:t.getAccountBatchResultAction},i[t.Action.GetCurrentAccount]={endpoint:"get_current_account",action:t.getCurrentAccountResultAction},i[t.Action.GetFileModifierAccount]={endpoint:"get_file_modifier_account",action:t.getFileModifierAccountResultAction},i[t.Action.GetMobileClientSettings]={endpoint:"get_mobile_client_settings",action:t.getMobileClientSettingsResultAction},i[t.Action.GetPlanInfo]={endpoint:"get_plan_info",action:t.getPlanInfoResultAction},i[t.Action.GetRootInfo]={endpoint:"get_root_info",action:t.getRootInfoResultAction},i[t.Action.GetSharingPrefs]={endpoint:"get_sharing_prefs",action:t.getSharingPrefsResultAction},i[t.Action.GetSpaceUsage]={endpoint:"get_space_usage",action:t.getSpaceUsageResultAction},i[t.Action.GetUserUiInfo]={endpoint:"get_user_ui_info",action:t.getUserUiInfoResultAction},i[t.Action.NeedsScaleMitigation]={endpoint:"needs_scale_mitigation",action:t.needsScaleMitigationResultAction},i[t.Action.SaveMobileClientSettings]={endpoint:"save_mobile_client_settings",action:t.saveMobileClientSettingsResultAction},i[t.Action.SetSharingPrefs]={endpoint:"set_sharing_prefs",action:t.setSharingPrefsResultAction},i);t.middleware=r._createMiddleware(n)}),define("modules/clean/file_store/actions",["require","exports","tslib","modules/clean/file_store/types","modules/clean/file_store/utils","external/lodash"],function(e,t,r,i,n,a){"use strict";function o(e,t){return{type:i.FileNamespaceActions.PutFile,payload:{file:e,fileId:null!=t?t:n.getFileStoreId(e)}}}function s(e){var t=a.keyBy(e,n.getFileStoreId);return{type:i.FileNamespaceActions.PutFileMap,payload:t}}Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importStar(a),t.putFile=o,t.putFiles=s}),define("modules/clean/file_store/reducer",["require","exports","tslib","modules/clean/file_store/types"],function(e,t,r,i){"use strict";function n(e,n){void 0===e&&(e=t.defaultFileState);var a;switch(n.type){case i.FileNamespaceActions.PutFile:return r.__assign({},e,(a={},a[n.payload.fileId]=n.payload.file,a));case i.FileNamespaceActions.PutFileMap:return r.__assign({},e,n.payload)}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultFileState={},t.fileNamespaceReducer=n}),define("modules/clean/file_store/selectors",["require","exports","modules/clean/file_store/reducer","modules/clean/redux/namespaces","modules/clean/redux/selectors"],function(e,t,r,i,n){"use strict";function a(e){return n.getStateAtNamespace(e,i.FILE_NAMESPACE_KEY)||r.defaultFileState}function o(e,t){return t?a(e)[t]:void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.getFile=o}),define("modules/clean/file_store/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){e.PutFile="PUT_FILE",e.PutFileMap="PUT_FILE_MAP"})(t.FileNamespaceActions||(t.FileNamespaceActions={}))}),define("modules/clean/file_store/utils",["require","exports","tslib","modules/clean/filepath"],function(e,t,r,i){"use strict";function n(e,t){return e.ns_id===t.ns_id&&e.sjid===t.sjid}function a(e){return"fq_path"in e}function o(e){return"subpath"in e}function s(e){return!a(e)&&!o(e)}function l(e){return d(e)}function c(e){return e.is_dir}function u(e){return e.is_dir&&"fq_path"in e}function d(e){return e.ns_id+":"+e.sjid}function p(e){var t="fq_path"in e?i.filename(e.fq_path):e.filename;return i.file_extension(t)}function f(e){return c(e)?u(e)?i.filename(e.fq_path):e.filename:a(e)?i.filename(e.fq_path):e.filename}function v(e){var t=f(e);return i.filename_without_extension(t)}function _(e){return 0===e.bytes}function m(e){return e.is_symlink&&_(e)}Object.defineProperty(t,"__esModule",{value:!0}),i=r.__importStar(i),t.areFilesEqual=n,t.isBrowseFile=a,t.isArchiveFile=o,t.isSharedFile=s,t.getFileStoreId=l,t.isFolder=c,t.isBrowseFolder=u,t.getFileRevisionId=d,t.getExtension=p,t.getFilename=f,t.getFilenameWithoutExtension=v,t.isEmptyFile=_,t.isSymLink=m}),define("modules/clean/open_in_app/types",["require","exports","tslib","modules/constants/file_viewer"],function(e,t,r,i){"use strict";function n(e){return e.platform===o.IPAD||e.platform===o.IPHONE}function a(e){return e.platform===o.ANDROID_MARKET}Object.defineProperty(t,"__esModule",{value:!0}),i=r.__importStar(i);var o=i.OpenInMobileAppPlatform;t.areUrlsIOS=n,t.areUrlsAndroid=a}),define("modules/clean/previews/api",["require","exports","tslib","modules/clean/api_v2/user_client","modules/clean/api_v2/noauth_client","modules/clean/ajax_as_promised","modules/core/uri","file-viewer/core"],function(e,t,r,i,n,a,o,s){"use strict";function l(e,t){if(!t)return Promise.reject(new Error("user not logged in, no support for un-auth'd users yet"));var r={files:e.map(function(e){return{ns_id:e.ns_id,sj_id:e.sjid}})};return t?(new i.UserApiV2Client).ns("previews").rpc("get_preview_data_batch",r,{subjectUserId:t.id}):(new n.NoAuthApiV2Client).ns("previews").rpc("get_preview_data_batch",r,{})}function c(e){return void 0!==e.image}function u(e){var r=t.getParsedDropboxMetadataHeader(e.jqXHR);return 401===e.jqXHR.status&&"1"===e.jqXHR.getResponseHeader("x-dropbox-pdf-password-needed")?new s.RivieraError("Password required",s.RivieraStatus.PasswordProtected):new s.RivieraError("Load Error",r.rivieraStatusCode)}function d(e,t,i){return r.__awaiter(this,void 0,Promise,function(){var n,o,s,l;return r.__generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,a.SilentBackgroundRequest({url:e,dataType:"json",type:"POST",data:i?{password:i}:{},xhrFields:{withCredentials:!0},skipInjectCsrf:f(e)})];case 1:return n=r.sent(),[3,3];case 2:throw o=r.sent(),u(o);case 3:return c(n)?[2,{text_url_tmpl:n.text,image_url_tmpl:n.image,refresh_url:n.refresh}]:(s=n.old_blob,l=n.new_blob,[2,{text_url_tmpl:t.text_url_tmpl.replace(s,l),image_url_tmpl:t.image_url_tmpl.replace(s,l),refresh_url:t.refresh_url.replace(s,l)}])}})})}function p(e){return r.__awaiter(this,void 0,void 0,function(){var t;return r.__generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,a.SilentBackgroundRequest({dataType:"json",type:"GET",url:e,xhrFields:{withCredentials:!0},skipInjectCsrf:f(e)})];case 1:return[2,r.sent()];case 2:throw t=r.sent(),u(t);case 3:return[2]}})})}function f(e){return o.URI.parse(e).getAuthority().toLocaleLowerCase().indexOf("dropbox.com")<0}Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importStar(a),t.MAX_REQUEST_SIZE=50,t.fetchPreviewData=l,t.refreshBlob=d,t.requestDocMetadata=p,t.getParsedDropboxMetadataHeader=function(e){var t={};try{var r=e.getResponseHeader("x-dropbox-metadata");r&&(t=JSON.parse(r))}catch(e){}return t}}),define("modules/clean/previews/data/actions",["require","exports","tslib","external/lodash","modules/clean/previews/data/types","modules/clean/redux/types","modules/clean/previews/data/util","modules/clean/previews/api","modules/clean/file_store/utils","modules/clean/react/previews/pdf_viewer/urls"],function(e,t,r,i,n,a,o,s,l,c){"use strict";function u(e){var t={};return e.forEach(function(e){var r=l.getFileRevisionId(e),i=e.preview;i&&(t[r]={data:i,status:a.ApiClientStatus.Success})}),{type:n.ActionTypes.UpdatePreviewData,payload:t}}function d(e,t){var r=e.revision_id;return{type:n.ActionTypes.OverrideWithComments1Revision,payload:{revisionId:r,preview:t}}}function p(e){var t=e.revision_id;return{type:n.ActionTypes.ClearOverrideWithComments1Revision,payload:{revisionId:t}}}function f(e,t){var r,i=l.getFileRevisionId(e),a=(r={},r[i]={},r);return t.forEach(function(e){e.preview&&(a[i][e.subpath]=e.preview)}),{type:n.ActionTypes.PopulateArchiveFiles,payload:a}}function v(e,t,i){var n=this;return function(a,l){return r.__awaiter(n,void 0,void 0,function(){var n,c,u;return r.__generator(this,function(r){return n=o.filterFilesMissingPreviewData(l(),e,i),0===n.length?[2]:(c=o.chunkFiles(n,s.MAX_REQUEST_SIZE),u=c.map(function(e){return m(a,e,t)}),[2,Promise.all(u)])})})}}function _(e,t){return s.fetchPreviewData([e],t).then(function(e){if(e.results.length>0){var t=e.results[0].preview;if(t&&t.preview_url)return t.preview_url}})}function m(e,i,n){return r.__awaiter(this,void 0,void 0,function(){var a,o,l;return r.__generator(this,function(r){switch(r.label){case 0:a=g(i),e(t.apiRequestInFlightAction(a)),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,s.fetchPreviewData(i,n)];case 2:return o=r.sent(),[2,e(h(o))];case 3:return l=r.sent(),[2,e(y(a))];case 4:return[2]}})})}function g(e){return e.reduce(function(e,t){return e[l.getFileRevisionId(t)]={data:void 0,status:a.ApiClientStatus.Request},e},{})}function w(e,t){return e.reduce(function(e,r){return e[l.getFileRevisionId(r)]={data:r.preview,status:t},e},{})}function b(e){return{type:n.ActionTypes.UpdatePreviewData,payload:e}}function h(e){return{type:n.ActionTypes.UpdatePreviewData,payload:e.results.reduce(function(e,t){return e[o.buildRevisionId(t.file.ns_id,t.file.sj_id)]={data:t.preview||t.err,status:t.err||!t.preview?a.ApiClientStatus.Error:a.ApiClientStatus.Success},e},{})}}function y(e){return{type:n.ActionTypes.UpdatePreviewData,payload:i.mapValues(e,function(e){return{data:void 0,status:a.ApiClientStatus.Error}})}}function F(e,t){return{type:n.ActionTypes.RefreshDocBlobResult,payload:{revisionId:e,preview:t}}}function S(e,t,i,n){var a=this;return function(o){return r.__awaiter(a,void 0,void 0,function(){var a,l;return r.__generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,s.refreshBlob(t,i,n)];case 1:return a=r.sent(),o(F(e,a)),o(C(e,a.text_url_tmpl)),[3,3];case 2:return l=r.sent(),o(P(e,void 0,l)),[3,3];case 3:return[2]}})})}}function P(e,t,r){return{type:n.ActionTypes.FetchDocMetadataResult,payload:{revisionId:e,metadata:t},error:r}}function A(e,t,r){return{type:n.ActionTypes.FetchDataForPageResult,payload:{revisionId:e,metadata:t},error:r}}function C(e,t){var i=this;return function(n){return r.__awaiter(i,void 0,void 0,function(){var i,a;return r.__generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,s.requestDocMetadata(c.textUrl(t,!0))];case 1:return i=r.sent(),[3,3];case 2:return a=r.sent(),n(P(e,void 0,a)),[3,3];case 3:return n(P(e,i)),[2]}})})}}function E(e,t,i,n){var a=this;return function(o){return r.__awaiter(a,void 0,void 0,function(){var a,l;return r.__generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,s.requestDocMetadata(c.textUrl(t,!1,i,n))];case 1:return a=r.sent(),o(A(e,a)),[3,3];case 2:return l=r.sent(),[3,3];case 3:return[2]}})})}}function I(){return{type:n.ActionTypes.ClearVirtualPreviewMetadata}}function x(e,t){var r=e.ns_id,i=e.sjid;return{type:n.ActionTypes.SetVirtualPreviewMetadata,payload:{revisionId:o.buildRevisionId(r,i),preview:t}}}function M(e){var t=e.ns_id,r=e.sjid;return{type:n.ActionTypes.ApplyVirtualPreviewMetadata,payload:o.buildRevisionId(t,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.populateFilesPreviewData=u,t.overridePreviewForComments=d,t.clearCommentsPreviewOverride=p,t.populateArchivePreviews=f,t.fetchPreviewData=v,t.fetchPreviewUrl=_,t.buildPreviewData=w,t.updatePreviewData=b,t.apiRequestInFlightAction=b,t.apiRequestSuccessAction=h,t.apiRequestErrorAction=y,t.refreshBlobAction=S,t.fetchDocMetadataResultAction=P,t.fetchDataForPageResultAction=A,t.fetchDocMetadata=C,t.fetchDataForPage=E,t.clearVirtualPreviewMetadata=I,t.setVirtualPreviewMetadata=x,t.applyVirtualPreviewMetadata=M}),define("modules/clean/previews/data/reducer",["require","exports","tslib","external/lodash","modules/clean/previews/data/types","modules/clean/react/previews/pdf_viewer/urls"],function(e,t,r,i,n,a){"use strict";function o(e){if(!e||!e.pages)return{};var t=e.links,i=e.schema_version,n=e.pages,a=e.fonts,o=void 0===a?[]:a,s=Object.keys(n),l={schema_version:i,links:t,pages:{}};return s.filter(function(e){return!!n[e]}).forEach(function(e){l.pages[e]=n[e].map(function(e){return r.__assign({},e,{font:o[e.f]})})}),l}function s(e,s){void 0===e&&(e=t.initialState);var c,u,d,p,f,v,_,m,g,w;switch(s.type){case n.ActionTypes.PopulateArchiveFiles:return r.__assign({},e,{archivePreviews:i.merge({},e.archivePreviews,s.payload)});case n.ActionTypes.ClearVirtualPreviewMetadata:return r.__assign({},e,{virtualPreviews:{}});case n.ActionTypes.SetVirtualPreviewMetadata:var b=s.payload,h=b.preview,y=b.revisionId;return r.__assign({},e,{virtualPreviews:i.merge({},e.virtualPreviews,(c={},c[y]=h,c))});case n.ActionTypes.ApplyVirtualPreviewMetadata:var F=s.payload;return r.__assign({},e,{filePreviews:i.merge({},e.filePreviews,(u={},u[F]={data:e.virtualPreviews[F]},u)),virtualPreviews:i.omit(e.virtualPreviews,F)});case n.ActionTypes.UpdatePreviewData:return r.__assign({},e,{filePreviews:r.__assign({},e.filePreviews,s.payload)});case n.ActionTypes.OverrideWithComments1Revision:return w=s.payload.revisionId,r.__assign({},e,{comments1Override:r.__assign({},e.comments1Override,(d={},d[w]=s.payload.preview,d))});case n.ActionTypes.ClearOverrideWithComments1Revision:return r.__assign({},e,{comments1Override:r.__assign({},e.comments1Override,(p={},p[s.payload.revisionId]=void 0,p))});case n.ActionTypes.RefreshDocBlobResult:
return w=s.payload.revisionId,r.__assign({},e,{filePreviews:r.__assign({},e.filePreviews,(f={},f[w]=r.__assign({},e.filePreviews[w],{data:r.__assign({},e.filePreviews[w].data,{content:r.__assign({},e.filePreviews[w].data.content,s.payload.preview,{placeholder_image_url:s.payload.preview.placeholder_image_url||a.imageUrl(s.payload.preview.image_url_tmpl)})})}),f))});case n.ActionTypes.FetchDocMetadataResult:if(w=s.payload.revisionId,s.error)return r.__assign({},e,{docPreviewMetadata:r.__assign({},e.docPreviewMetadata,(v={},v[w]={metadata:l,text:{},error:s.error},v))});if(s.payload.metadata){var S=s.payload.metadata,P=S.metadata,A=void 0===P?l:P,C=S.text,E={},I=e.docPreviewMetadata[w];return A&&(A=r.__assign({},I&&I.metadata||{},A)),C&&(E=r.__assign({},I&&I.text||{},o(C))),r.__assign({},e,{docPreviewMetadata:r.__assign({},e.docPreviewMetadata,(_={},_[w]={metadata:A,text:E},_))})}return e;case n.ActionTypes.FetchDataForPageResult:w=s.payload.revisionId;var I=e.docPreviewMetadata[w]||{metadata:l,text:{}};if(s.error)return r.__assign({},e,{docPreviewMetadata:r.__assign({},e.docPreviewMetadata,(m={},m[w]=r.__assign({},I,{error:s.error}),m))});if(s.payload.metadata){var x=s.payload.metadata,A=x.metadata,C=x.text,E={};if(A=A?i.merge({},I.metadata,A):I.metadata,C){var M=o(C);E=i.merge({},I.text,M)}else E=I.text;return r.__assign({},e,{docPreviewMetadata:r.__assign({},e.docPreviewMetadata,(g={},g[w]={metadata:A,text:E},g))})}return e;default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),i=r.__importStar(i),t.initialState={filePreviews:{},docPreviewMetadata:{},comments1Override:{},archivePreviews:{},virtualPreviews:{}};var l={schema_version:0,page_count:0,dimensions:[]};t.reducer=s}),define("modules/clean/previews/data/selectors",["require","exports","modules/clean/redux/types","modules/clean/redux/selectors","modules/clean/file_store/utils","modules/clean/redux/namespaces"],function(e,t,r,i,n,a){"use strict";function o(e){return i.getStateAtNamespace(e,a.PREVIEW_NAMESPACE_KEY)}function s(e,t){var r=o(e);return r&&t?r.comments1Override[t]||r.virtualPreviews[t]||r.filePreviews[t]&&r.filePreviews[t].data:{}}function l(e,t){var r=o(e);return!(!r||!t)&&(!r.comments1Override[t]&&!!r.virtualPreviews[t])}function c(e,t){var i=o(e);if(!i||!t)return f;var a=n.getFileRevisionId(t),s=i.comments1Override[t.revision_id];if(s)return{data:s,status:r.ApiClientStatus.Success};if(i.virtualPreviews[a])return{data:i.virtualPreviews[a],status:r.ApiClientStatus.Success};var l=i.filePreviews[a];return l&&l.status?l:f}function u(e,t){return t.reduce(function(t,r){return t[n.getFileRevisionId(r)]=c(e,r),t},{})}function d(e,t){var o=i.getStateAtNamespace(e,a.PREVIEW_NAMESPACE_KEY);if(!o||!t)return f;var s=o.archivePreviews[n.getFileRevisionId(t)];return s?{data:s[t.subpath],status:r.ApiClientStatus.Success}:f}function p(e,t){var r=i.getStateAtNamespace(e,a.PREVIEW_NAMESPACE_KEY);if(r)return r.docPreviewMetadata[t]}Object.defineProperty(t,"__esModule",{value:!0});var f={data:void 0,status:r.ApiClientStatus.Error};t.getApiDataForRevisionId=s,t.getIsVirtualRevisionId=l,t.getApiDataForFile=c,t.getApiDataForFiles=u,t.getPreviewForArchiveFile=d,t.getDocMetadataByRevisionId=p}),define("modules/clean/previews/data/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){e.PopulateArchiveFiles="FileViewer/Previews/PopulateArchiveFiles",e.UpdatePreviewData="FileViewer/Previews/UpdatePreviewData",e.OverrideWithComments1Revision="FileViewer/Previews/OverrideWithComments1Revision",e.ClearOverrideWithComments1Revision="FileViewer/Previews/ClearOverrideWithComments1Revision",e.RefreshDocBlob="FileViewer/Previews/RefreshDocBlob",e.RefreshDocBlobResult="FileViewer/Previews/RefreshDocBlobResult",e.FetchDocMetadata="FileViewer/Previews/FetchDocMetadata",e.FetchDocMetadataResult="FileViewer/Previews/FetchDocMetadataResult",e.FetchDataForPageResult="FileViewer/Previews/FetchDataForPageResult",e.ApplyVirtualPreviewMetadata="FileViewer/Previews/ApplyVirtualPreviewMetadata",e.ClearVirtualPreviewMetadata="FileViewer/Previews/ClearVirtualPreviewMetadata",e.SetVirtualPreviewMetadata="FileViewer/Previews/SetVirtualPreviewMetadata"})(t.ActionTypes||(t.ActionTypes={}))}),define("modules/clean/previews/data/util",["require","exports","tslib","external/lodash","modules/clean/previews/data/selectors","modules/clean/file_store/utils","modules/clean/redux/types"],function(e,t,r,i,n,a,o){"use strict";function s(e,t,r){if(void 0===r&&(r=!1),r)return t;var s=n.getApiDataForFiles(e,t);return i.filter(t,function(e){var t=a.getFileRevisionId(e);return!e.is_dir&&(!s[t]||!s[t].data&&s[t].status===o.ApiClientStatus.Error)})}function l(e,t){return e+":"+t}function c(e,t){var r=n.getApiDataForFile(e,t);return!(!r||!r.data||r.status===o.ApiClientStatus.Error)}function u(e,t){return d(e,t)===o.ApiClientStatus.Request}function d(e,t){var r=n.getApiDataForFile(e,t);return r?r.status:void 0}function p(e,t){if(e.length<=0)return[];if(e.length<t)return[e];for(var r=Array(Math.ceil(e.length/t)),i=0,n=0;i<e.length;)r[n++]=e.slice(i,i+=t);return r}Object.defineProperty(t,"__esModule",{value:!0}),i=r.__importStar(i),t.filterFilesMissingPreviewData=s,t.buildRevisionId=l,t.previewDataPresentForFile=c,t.previewDataInFlight=u,t.previewDataStatus=d,t.chunkFiles=p}),define("modules/clean/react/previews/constants",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){e.LoadError="LOAD_ERROR",e.SupportError="SUPPORT_ERROR",e.ExtensionError="EXTENSION_ERROR",e.NeedFlashError="NEED_FLASH_ERROR",e.FileSizeError="FILE_SIZE_ERROR",e.PasswordProtectedError="PASSWORD_PROTECTED_ERROR",e.PendingUploadError="PENDING_UPLOAD_ERROR",e.EmptyFileError="EMPTY_FILE_ERROR",e.SymLinkError="SYM_LINK_ERROR",e.WatermarkingError="WATERMARKING_ERROR",e.UpsellError="UPSELL_ERROR"})(t.ErrorType||(t.ErrorType={}));(function(e){e.Browse="browse",e.Home="home",e.SharedLinkFile="sl_file",e.SharedLinkFolder="sl_folder",e.SharedLinkCollection="sl_collection",e.VersionHistory="version_history",e.FileViewer="file_viewer",e.Desktop="desktop",e.EmbeddedSharedLinkFile="embedded_sl_file",e.ArchiveFile="archive_file",e.Workflow="workflow"})(t.PreviewSourceContext||(t.PreviewSourceContext={}));(function(e){e.Visit="visit",e.Click="click",e.FileViewerExit="file_viewer_exit"})(t.PreviewSourceAction||(t.PreviewSourceAction={}));(function(e){e.Unknown="unknown",e.NewFile="new_file",e.BeforeUnload="before_unload",e.Unmount="unmount"})(t.PreviewSessionEndReason||(t.PreviewSessionEndReason={}));(function(e){e.EnableRegionCreation="EnableRegionCreation",e.Fullscreen="Fullscreen",e.PageDown="PageDown",e.PageIndicator="PageIndicator",e.PageUp="PageUp",e.Print="Print",e.Sidebar="Sidebar",e.ZoomIn="ZoomIn",e.ZoomOut="ZoomOut",e.Esignature="Esignature",e.FlipControls="FlipControls"})(t.PreviewToolbarButtonType||(t.PreviewToolbarButtonType={}))}),define("modules/clean/react/previews/pdf_viewer/urls",["require","exports","tslib","modules/core/uri","modules/constants/file_viewer"],function(e,t,r,i,n){"use strict";function a(e,t,r,i,n){return void 0===r&&(r=0),void 0===i&&(i=50),void 0===n&&(n=!1),t&&(e=s(e,{metadata:"1"})),void 0!==r&&(e=s(e,{text:"1",page_start:""+r,page_end:""+i})),n&&(e=s(e,{canned_file_name:"spdf/audi.pdf.json"})),e}function o(e,t,r,i){void 0===t&&(t=0),void 0===r&&(r=0),void 0===i&&(i=!1);var a={page:t.toString()};n.SVG_PDF_PREVIEW&&r>0?a.format="svg":a.scale_percent=r.toString();var o=s(e,a);return i&&(o=s(o,{canned_file_name:"spdf/audi.pdf."+t+".png"})),o}function s(e,t){return i.URI.parse(e).updateQuery(t).toString()}function l(e){return i.URI.parse(e).getAuthority().toLocaleLowerCase().indexOf("dropbox.com")<0}Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importStar(n),t.textUrl=a,t.imageUrl=o,t.updateQueryParam=s,t.skipCsrfTokenInjection=l});
//# sourceMappingURL=pkg-previews_core.min.js-vflV3ZrNF.map