define("modules/clean/open_in_app/actions",["require","exports","tslib","modules/clean/open_in_app/types","modules/clean/open_in_mobile_app"],function(e,t,i,n,r){"use strict";function a(){var e=navigator.userAgent||"",t=e.match(/OS (\d+)_(\d+)_?(\d+)?/);return!t||parseInt(t[1],10)>=9}function o(e,t){var i=t.onAppNeeded,o=t.onAppInstalled;n.areUrlsIOS(e)?r.default.open_ios(e.iOSAppUrl,e.iOSAppStoreUrl,a(),i,o):n.areUrlsAndroid(e)&&r.default.open_android_intent(e.androidAppUrl)}function l(e){var t;if(n.areUrlsIOS(e))t=e.iOSAppUrl;else{if(!n.areUrlsAndroid(e))return;t=e.androidAppUrl}var i=document.createElement("iframe");i.setAttribute("class","open-in-app-transport"),i.setAttribute("src",t),i.setAttribute("style","display: none"),document.body.appendChild(i)}function s(){r.default.cleanup()}Object.defineProperty(t,"__esModule",{value:!0}),r=i.__importDefault(r),t.openInApp=o,t.openImmediately=l,t.cleanUp=s}),define("modules/clean/open_in_mobile_app",["require","exports","tslib","jquery","modules/clean/analytics","modules/core/exception","modules/core/i18n","modules/clean/sharing/constants"],function(e,t,i,n,r,a,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importDefault(n),r=i.__importStar(r);var s=(function(){function e(){}return e.initClass=function(){var e=this;this.vischange_listener=null,this.open_app_mode=!0,this.try_open_ios_9=function(t,i,n,r){return void 0===n&&(n=function(){}),void 0===r&&(r=function(){}),e.vischange_listener||(e.vischange_listener=function(t){return e.open_app_mode=!0,r()},document.addEventListener("visibilitychange",e.vischange_listener)),e.open_app_mode?(e.open_app_mode=!1,e._onOpenLoggingHandler(),n(),window.location=t):(e._onInstallLoggingHandler(),window.location=i)},this.fallback_will_launch=!1,this.try_open=function(t,i,a){if(e._onOpenLoggingHandler(),!e.fallback_will_launch){var o=n.default("body"),s=function(){var e=n.default("<iframe />",{src:t,style:"display: none;"});return o.append(e)},c=!1,u=function(e){return c=!0};document.addEventListener("visibilitychange",u);var d=!1,p=function(e){return d=!0};window.addEventListener("pagehide",p),null!=a&&r.ShareTibEventLogger.log_unauth("CLICK_MOBILE_OPEN",l.SHARE_ACTION_ORIGIN_TYPE.WEB_MOBILE,{scl_url:a}),s();var m=Date.now(),_=function(){if(e.fallback_will_launch=!1,document.removeEventListener("visibilitychange",u),window.removeEventListener("pagehide",p),!d&&!c&&Date.now()<m+4700)return null!=a&&r.ShareTibEventLogger.log_unauth("CLICK_MOBILE_INSTALL",l.SHARE_ACTION_ORIGIN_TYPE.WEB_MOBILE,{scl_url:a}),window.location.replace(i)};return setTimeout(_,3200),e.fallback_will_launch=!0}}},e._onOpenLoggingHandler=function(){},e._onInstallLoggingHandler=function(){},e.registerLoggingHandlers=function(e,t){return this._onOpenLoggingHandler=e,this._onInstallLoggingHandler=t},e.open_on_click=function(e,t,i,r,a,l,s){var c=this;void 0===l&&(l=null);var u=function(i){if(i.preventDefault(),s)return c.open_android_intent(s);if(a){r||(r=n.default("<div/>"));var u=r.text();return c.try_open_ios_9(e,t,function(){return r.text(o._("Install app?"))},function(){return r.text(u)})}return c.try_open(e,t,l)};return n.default(i).on("click",u)},e.open_ios=function(e,t,i,n,r){return void 0===n&&(n=function(){}),void 0===r&&(r=function(){}),i?this.try_open_ios_9(e,t,n,r):this.try_open(e,t)},e.open_android_intent=function(e){return a.assert(e&&e.startsWith("intent://www.dropbox.com/sm/launch_intent_or_fallback_page"),"intentUrl must use intent:// protocol"),this._onOpenLoggingHandler&&this._onOpenLoggingHandler(),window.location.href=e},e.redirect_on_load=function(e,t){return this.try_open(e,t)},e.cleanup=function(){if(this.vischange_listener)return document.removeEventListener("visibilitychange",this.vischange_listener)},e})();s.initClass(),t.default=s}),define("modules/clean/react/file_viewer/app_download_interstitial/app_download_interstitial",["require","exports","tslib","external/classnames","react","spectrum/button","spectrum/file_icon","spectrum/icon_content","spectrum/icon_form","modules/clean/open_in_app/types","modules/clean/static_urls","modules/core/i18n","modules/clean/react/css"],function(e,t,i,n,r,a,o,l,s,c,u,d,p){"use strict";function m(e){var t=e.onClose;return r.default.createElement("header",null,r.default.createElement("h1",{className:"DropboxLogo"},r.default.createElement("img",{src:u.static_url("/static/images/index/rebrand/logos/glyphs/glyph_blue-vfla3iXuq.svg"),className:"DropboxLogo--glyph",alt:"Dropbox"}),r.default.createElement("img",{src:u.static_url("/static/images/index/rebrand/logos/wordmarks/wordmark_black-vflmhE3RY.svg"),className:"Dropbox--wordmark",alt:"Dropbox"})),r.default.createElement("button",{className:"button-as-link app-download-interstitial-close","aria-label":"Close",onClick:t},r.default.createElement(s.IconForm,{name:"cancel"})))}function _(e){var t=e.appUrl,i=e.onContinue,n=e.onAppDownload;return r.default.createElement("div",{className:"app-download-interstitial-ctas"},r.default.createElement(a.Button,{className:"app-download-interstitial-cta",size:"large",href:t,onClick:n},d._("Get the app")),r.default.createElement(a.Button,{className:"app-download-interstitial-cta",size:"large",variant:"secondary",onClick:i},d._("Or continue to website")))}function f(e,t){return e&&t?d._("%(owner)s (%(team)s) shared this with you.").format({owner:e,team:t}):e&&!t?d._("%(owner)s shared this with you.").format({owner:e}):!e&&t?d._("%(team)s shared this with you.").format({team:t}):d._("This file was shared with you.")}function g(e){var t=e.fileOrFolderName,i=e.isFolder,n=e.ownerName,a=e.ownerTeamName;return r.default.createElement("section",{className:"app-download-interstitial-content"},r.default.createElement("header",null,r.default.createElement("h2",null,d._("Get a better view with our mobile app"))),r.default.createElement("div",{className:"app-download-interstitial-content-thumbnail"},i?r.default.createElement(l.IconContent,{name:"folder_shared-large"}):r.default.createElement(o.FileIcon,{path:t,variant:"large"}),r.default.createElement("p",{className:"app-download-interstitial-filename"},t),r.default.createElement("p",{className:"app-download-interstitial-owner"},f(n,a))))}function v(e){if(e){if(c.areUrlsIOS(e))return e.iOSAppStoreUrl;if(c.areUrlsAndroid(e))return e.androidAppUrl}}Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importDefault(n),r=i.__importDefault(r);var S=function(e){var t=e.className,i=e.open_in_app_data,a=e.fileOrFolderName,o=e.isFolder,l=e.onClose,s=e.onContinue,c=e.onAppDownload,u=e.ownerName,d=e.ownerTeamName;return r.default.createElement("section",{className:n.default("app-download-interstitial-container",t)},r.default.createElement(m,{onClose:l}),r.default.createElement(g,{isFolder:o,fileOrFolderName:a,ownerName:u,ownerTeamName:d}),r.default.createElement(_,{onContinue:s,onAppDownload:c,appUrl:v(i)}))},w=p.requireCssWithComponent(S,["/static/css/index/obsidian/logo-vflM1D8V1.css","/static/css/file_viewer/app_download_interstitial-vfllUPOgM.css"]);t.AppDownloadInterstitial=w}),define("modules/clean/react/file_viewer/controller_mode",["require","exports","modules/clean/api_v2/noauth_client","modules/clean/api_v2/user_client"],function(e,t,i,n){"use strict";function r(e,t){return(new n.UserApiV2Client).ns("file_viewer").rpc("get_mode",e,{subjectUserId:t.id})}function a(e){return(new i.NoAuthApiV2Client).ns("file_viewer").rpc("logged_out/get_mode",e,{})}function o(e,t){return null!=t?r(e,t):a(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchControllerMode=o}),define("modules/clean/react/file_viewer/data/actions",["require","exports","tslib","modules/clean/ajax","modules/clean/react/file_viewer/constants","modules/clean/file_store/actions","modules/clean/previews/data/actions","modules/clean/react/file_viewer/logging","modules/clean/react/file_viewer/data/selectors","modules/clean/file_store/utils","modules/clean/react/file_viewer/data/types","modules/clean/previews/data/util","modules/clean/react/file_viewer/constants","modules/clean/downloads","modules/core/uri","modules/core/browser","modules/clean/react/file_viewer/controller_mode","modules/clean/react/file_viewer/models","modules/clean/react/file_viewer/file_preview_event_emitter","modules/clean/react/watermarking/utils","file-viewer/core","modules/clean/react/file_viewer/prompt/campaign_api"],function(e,t,i,n,r,a,o,l,s,c,u,d,p,m,_,f,g,v,S,w,h,y){"use strict";function b(e,t){return void 0===e&&(e=r.DocType.default),function(i){i({type:u.Actions.OpenSidebar,payload:{type:e}}),l.logUserAction(r.UserAction.ToggleSidebarOn,t)}}function E(e,t){return void 0===e&&(e=r.DocType.default),function(i){i({type:u.Actions.CloseSidebar,payload:{type:e}}),l.logUserAction(r.UserAction.ToggleSidebarOff,t)}}function F(){return{type:u.Actions.DismissAppDownloadInterstitial}}function A(e){return{type:u.Actions.OpenFile,payload:{fileId:e}}}function I(){return{type:u.Actions.CloseFile}}function M(e){return function(t,i){var n,r=(n={},n[h.FileViewerMode.Default]=_e,n[h.FileViewerMode.Documentation]=fe,n[h.FileViewerMode.Commenting]=ge,n[h.FileViewerMode.Watermarking]=ve,n[h.FileViewerMode.Zoom]=Se,n[h.FileViewerMode.Slack]=we,n);r[e]&&r[e](t,i)}}function P(e){return function(t,i){var n=i();s.getMode(n)===e&&t(M(h.FileViewerMode.Default)),t({type:u.Actions.DisableMode,payload:{mode:e}})}}function C(e){return{type:u.Actions.EnableMode,payload:{mode:e}}}function T(e){return S.filePreviewEventEmitter.emit(p.EventType.SidebarModeSelected,v.FilePreviewSession.currentSession,{selected_mode:e}),{type:u.Actions.UpdateMode,payload:{mode:e}}}function O(e){var t=this;return function(n,r){return i.__awaiter(t,void 0,void 0,function(){var t,l,s;return i.__generator(this,function(i){return t=c.getFileStoreId(e),l=a.putFile(e),n(l),s=!d.previewDataPresentForFile(r(),e)&&!d.previewDataInFlight(r(),e),s&&n(l.payload.file.preview?o.populateFilesPreviewData([l.payload.file]):o.fetchPreviewData([l.payload.file])),n(A(t)),[2]})})}}function V(e,t){return{type:u.Actions.UpdateRenderStatus,payload:{fileId:e,renderStatus:t}}}function R(e){return function(t,i){var n=s.getCurrentFileId(i());n&&t(V(n,e))}}function D(){return R(p.PreviewRenderStatus.Succeeded)}function k(e){return{type:u.Actions.SetShowOverQuotaUpsell,payload:e}}function x(e){return function(t,i){e&&void 0===s.getShowOverQuotaUpsell(i())&&n.SilentBackgroundRequest({url:"/should_show_file_preview_upsell",data:{_subject_uid:e.id},success:function(e){try{var i=JSON.parse(e);i&&t(k(i.shouldShowFilePreviewUpsell))}catch(e){}}})}}function U(e){return S.filePreviewEventEmitter.emit(p.EventType.SidebarPaneSelected,v.FilePreviewSession.currentSession,{selected_pane:e}),{type:u.Actions.PushSidebarPane,payload:{paneId:e}}}function L(){return{type:u.Actions.PopSidebarPane}}function N(){return{type:u.Actions.ResetSidebarPaneStack}}function W(){return{type:u.Actions.ResetSelectedSidebarControlId}}function z(e){return{type:u.Actions.SetSelectedSidebarControlId,payload:{controlId:e}}}function H(e){return{type:u.Actions.SetCurrentCalloutType,payload:{type:e}}}function B(e){var t=e===h.SidebarVisibility.Open?p.EventType.SidebarOpened:p.EventType.SidebarClosed;return S.filePreviewEventEmitter.emit(t,v.FilePreviewSession.currentSession),{type:u.Actions.SetSidebarVisibility,payload:{visibility:e}}}function q(e){return{type:u.Actions.SetPageDimensions,payload:{pageDimensions:e}}}function j(e){return{type:u.Actions.SetTextWatermark,payload:{options:e}}}function K(e){return{type:u.Actions.SetImageWatermark,payload:{options:e}}}function Q(e,t){return{type:u.Actions.InitializeWatermark,payload:{user:e,previewType:t}}}function Y(){return{type:u.Actions.RemoveWatermark}}function G(e){return function(t){e.preview&&t(o.overridePreviewForComments(e,e.preview)),t({type:u.Actions.SwitchRevision,payload:{file:e}})}}function Z(){return function(e,t){var i=s.getActiveFile(t());i&&e(o.clearCommentsPreviewOverride(i)),e({type:u.Actions.RestoreRevision})}}function X(e){return function(t){t(a.putFile(e,e.revision_id)),e.preview&&t(o.overridePreviewForComments(e,e.preview)),t({type:u.Actions.SaveForwardRevision,payload:{revisionKey:e.revision_id}})}}function J(e){var t=_.URI.parse(e.href);t.updateQuery({dl:"1"}),m.get({url:t.toString()})}function $(){f.reload(!0)}function ee(){return function(e){e({type:u.Actions.PlayMedia})}}function te(){return function(e){e({type:u.Actions.PauseMedia})}}function ie(){return function(e){e({type:u.Actions.ResetStore})}}function ne(){return{type:u.Actions.ForceHideToolbar}}function re(){return{type:u.Actions.DisableForceHideToolbar}}function ae(e){var t=h.FileViewerMode.Default;if(e)switch(e[".tag"]){case"commenting_mode":t=h.FileViewerMode.Commenting;break;case"documentation_mode":t=h.FileViewerMode.Documentation;break;case"other":t=h.FileViewerMode.Default}return t}function oe(e,t){var n=this;return function(r,a){return i.__awaiter(n,void 0,void 0,function(){var n,o,l,c;return i.__generator(this,function(i){switch(i.label){case 0:r({type:u.Actions.FetchControllerModeRequest}),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,g.fetchControllerMode(e,t)];case 2:return n=i.sent().mode,S.filePreviewEventEmitter.emit(p.EventType.FilePreviewModeDetermined,v.FilePreviewSession.currentSession,{mode:n}),o=ae(n),l=s.getMode(a()),l&&l!==h.FileViewerMode.Default||r(M(o)),[3,4];case 3:return c=i.sent(),r({type:u.Actions.FetchControllerModeError,payload:c}),[3,4];case 4:return[2]}})})}}function le(e,t){var n=this;return function(r,a){return i.__awaiter(n,void 0,void 0,function(){var n;return i.__generator(this,function(i){switch(i.label){case 0:return[4,y.fetchBestCampaigns(e.id,t)];case 1:return n=i.sent().campaigns,r({type:u.Actions.SetBestCampaign,payload:{campaign:n[0]}}),[2]}})})}}function se(e){return{type:u.Actions.UpdateCurrentPageIndex,payload:{currentPageIndex:e}}}function ce(){return{type:u.Actions.PageDown}}function ue(){return{type:u.Actions.PageUp}}function de(e){return{type:u.Actions.RegisterUser,payload:{user:e}}}function pe(e,t){var i=t(),n=s.getSidebar(i).visibility,r=n===h.SidebarVisibility.Open?h.SidebarVisibility.Closed:h.SidebarVisibility.Open;e(B(r)),r===h.SidebarVisibility.Closed&&e(me(!1))}function me(e){return{type:u.Actions.SetTrialMode,payload:{isTrialMode:e}}}function _e(e,t){var i=t(),n=s.getSidebar(i).visibility;s.getMode(i)!==h.FileViewerMode.Default&&e(T(h.FileViewerMode.Default)),e(me(!1)),e(W()),n===h.SidebarVisibility.Open&&e(B(h.SidebarVisibility.Closed))}function fe(e,t){var i=t(),n=s.getSidebar(i).visibility;if(s.getMode(i)===h.FileViewerMode.Documentation)return void pe(e,t);e(me(!1)),e(T(h.FileViewerMode.Documentation)),e(z(h.SidebarControlId.Documentation)),e(N()),e(U(h.SidebarPaneId.Documentation)),n===h.SidebarVisibility.Closed&&e(B(h.SidebarVisibility.Open))}function ge(e,t){var i=t(),n=s.getSidebar(i).visibility;if(s.getMode(i)===h.FileViewerMode.Commenting)return void pe(e,t);e(me(!1)),e(T(h.FileViewerMode.Commenting)),e(z(h.SidebarControlId.Comments)),e(N()),e(U(h.SidebarPaneId.Comments)),n===h.SidebarVisibility.Closed&&e(B(h.SidebarVisibility.Open))}function ve(e,t){var i=t(),n=s.getSidebar(i).visibility,r=s.getMode(i),a=s.getCurrentUser(i);if(r===h.FileViewerMode.Watermarking)return void pe(e,t);e(me(w.allowWatermarkTrial(a))),e(T(h.FileViewerMode.Watermarking)),e(z(h.SidebarControlId.Watermarking)),e(N()),e(U(h.SidebarPaneId.Watermarking)),n===h.SidebarVisibility.Closed&&e(B(h.SidebarVisibility.Open))}function Se(e,t){var i=t(),n=s.getSidebar(i).visibility;if(s.getMode(i)===h.FileViewerMode.Zoom)return void pe(e,t);e(T(h.FileViewerMode.Zoom)),e(z(h.SidebarControlId.Zoom)),e(N()),e(U(h.SidebarPaneId.Zoom)),n===h.SidebarVisibility.Closed&&e(B(h.SidebarVisibility.Open))}function we(e,t){var i=t(),n=s.getSidebar(i).visibility;if(s.getMode(i)===h.FileViewerMode.Slack)return void pe(e,t);e(T(h.FileViewerMode.Slack)),e(z(h.SidebarControlId.Slack)),e(N()),e(U(h.SidebarPaneId.SlackHome)),n===h.SidebarVisibility.Closed&&e(B(h.SidebarVisibility.Open))}Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importStar(n),m=i.__importStar(m),f=i.__importStar(f),t.openFullScreen=function(){return{type:u.Actions.OpenFullScreen}},t.closeFullScreen=function(){return{type:u.Actions.CloseFullScreen}},t.openSidebar=b,t.closeSidebar=E,t.dismissAppDownloadInterstitial=F,t.openFileById=A,t.closeFile=I,t.changeMode=M,t.disableMode=P,t.enableMode=C,t.updateMode=T,t.openFile=O,t.setRenderStatusForCurrentFile=R,t.setRenderStatusSuccessForCurrentFile=D,t.fetchShowOverQuotaUpsell=x,t.pushSidebarPane=U,t.popSidebarPane=L,t.resetSidebarPaneStack=N,t.resetSelectedSidebarControlId=W,t.setSelectedSidebarControlId=z,t.setCurrentCalloutType=H,t.setSidebarVisibility=B,t.setPageDimensions=q,t.setTextWatermark=j,t.setImageWatermark=K,t.initializeWatermark=Q,t.removeWatermark=Y,t.switchRevisionAction=G,t.restoreRevisionAction=Z,t.saveForwardRevision=X,t.download=J,t.pendingFileUploaded=$,t.setMediaPlaying=ee,t.setMediaPaused=te,t.resetFileViewerStore=ie,t.forceHideToolbar=ne,t.disableForceHideToolbar=re,t.fetchControllerModeAction=oe,t.fetchBestCampaignsAction=le,t.updateCurrentPageIndex=se,t.pageDown=ce,t.pageUp=ue,t.registerUser=de}),define("modules/clean/react/file_viewer/data/reducer",["require","exports","tslib","modules/clean/react/file_viewer/data/types","modules/clean/react/watermarking/utils","modules/clean/react/file_viewer/constants","file-viewer/core"],function(e,t,i,n,r,a,o){"use strict";function l(e,a){void 0===e&&(e=t.defaultState);var l,s,c,u,d;switch(a.type){case n.Actions.CloseFile:return i.__assign({},e,{currentFileId:void 0,fileRevision:void 0,latestFileId:void 0});case n.Actions.OpenFile:var p=a.payload;return i.__assign({},e,{currentFileId:p.fileId,fileRevision:void 0,latestFileId:void 0});case n.Actions.SwitchRevision:var p=a.payload;return i.__assign({},e,{fileRevision:p.file});case n.Actions.RestoreRevision:return i.__assign({},e,{fileRevision:void 0,currentFileId:e.latestFileId||e.currentFileId,latestFileId:void 0});case n.Actions.SetPageDimensions:var m=a.payload.pageDimensions;return i.__assign({},e,{pageDimensions:m});case n.Actions.SetTextWatermark:var _=a.payload.options;return e.watermark?i.__assign({},e,{watermark:i.__assign({},e.watermark,{isTextWatermarkingMode:!0,textWatermarkingOptions:i.__assign({},e.watermark.textWatermarkingOptions,_)})}):e;case n.Actions.SetImageWatermark:var _=a.payload.options;return e.watermark?i.__assign({},e,{watermark:i.__assign({},e.watermark,{isTextWatermarkingMode:!1,imageWatermarkingOptions:i.__assign({},e.watermark.imageWatermarkingOptions,_)})}):e;case n.Actions.InitializeWatermark:var f=a.payload,g=f.user,v=f.previewType;return i.__assign({},e,{watermark:r.getDefaultWatermarkState(g,v)});case n.Actions.RemoveWatermark:return i.__assign({},e,{watermark:void 0});case n.Actions.SaveForwardRevision:var p=a.payload;return i.__assign({},e,{latestFileId:p.revisionKey});case n.Actions.UpdateMode:var p=a.payload;return i.__assign({},e,{mode:p.mode});case n.Actions.DisableMode:var p=a.payload;return i.__assign({},e,{disabledModes:i.__assign({},e.disabledModes,(l={},l[p.mode]=!0,l))});case n.Actions.EnableMode:var p=a.payload;return i.__assign({},e,{disabledModes:i.__assign({},e.disabledModes,(s={},s[p.mode]=!1,s))});case n.Actions.OpenFullScreen:return i.__assign({},e,{isFullScreen:!0});case n.Actions.CloseFullScreen:return i.__assign({},e,{isFullScreen:!1});case n.Actions.OpenSidebar:var p=a.payload;return i.__assign({},e,{isSidebarOpen:i.__assign({},e.isSidebarOpen,(c={},c[p.type]=!0,c))});case n.Actions.CloseSidebar:var p=a.payload;return i.__assign({},e,{isSidebarOpen:i.__assign({},e.isSidebarOpen,(u={},u[p.type]=!1,u))});case n.Actions.DismissAppDownloadInterstitial:return i.__assign({},e,{appDownloadInterstitialDismissed:!0});case n.Actions.SetShowOverQuotaUpsell:var p=a.payload;return i.__assign({},e,{showOverQuotaUpsell:p});case n.Actions.UpdateRenderStatus:var p=a.payload;return i.__assign({},e,{renderStatuses:i.__assign({},e.renderStatuses,(d={},d[p.fileId]=p.renderStatus,d))});case n.Actions.PlayMedia:return i.__assign({},e,{isMediaPlaying:!0});case n.Actions.PauseMedia:return i.__assign({},e,{isMediaPlaying:!1,pauseCount:e.pauseCount?e.pauseCount+1:1});case n.Actions.ResetStore:return t.defaultState;case n.Actions.UpdateCurrentPageIndex:var p=a.payload;return i.__assign({},e,{currentPageIndex:p.currentPageIndex});case n.Actions.ForceHideToolbar:return i.__assign({},e,{forceHideToolbar:!0});case n.Actions.DisableForceHideToolbar:return i.__assign({},e,{forceHideToolbar:!1});case n.Actions.PopSidebarPane:return e.sidebar.paneStack.length<1?e:i.__assign({},e,{sidebar:i.__assign({},e.sidebar,{paneStack:e.sidebar.paneStack.slice(0,-1)})});case n.Actions.PushSidebarPane:var p=a.payload;return e.sidebar.paneStack.includes(p.paneId)?e:i.__assign({},e,{sidebar:i.__assign({},e.sidebar,{paneStack:e.sidebar.paneStack.concat([p.paneId])})});case n.Actions.SetSelectedSidebarControlId:var p=a.payload;return i.__assign({},e,{sidebar:i.__assign({},e.sidebar,{selectedControlId:p.controlId})});case n.Actions.ResetSidebarPaneStack:return i.__assign({},e,{sidebar:i.__assign({},e.sidebar,{paneStack:[]})});case n.Actions.ResetSelectedSidebarControlId:return i.__assign({},e,{sidebar:i.__assign({},e.sidebar,{selectedControlId:void 0})});case n.Actions.SetCurrentCalloutType:var p=a.payload;return i.__assign({},e,{currentCalloutType:p.type});case n.Actions.SetSidebarVisibility:var p=a.payload;return i.__assign({},e,{sidebar:i.__assign({},e.sidebar,{visibility:p.visibility})});case n.Actions.FetchControllerModeError:return i.__assign({},e,{mode:o.FileViewerMode.Commenting});case n.Actions.SetBestCampaign:var p=a.payload;return i.__assign({},e,{campaign:p.campaign});case n.Actions.PageDown:var S=e.currentPageIndex;return void 0===S?e:i.__assign({},e,{currentPageIndex:S+1});case n.Actions.PageUp:var S=e.currentPageIndex;return void 0===S?e:i.__assign({},e,{currentPageIndex:S-1});case n.Actions.RegisterUser:var p=a.payload;return i.__assign({},e,{currentUser:p.user});case n.Actions.SetTrialMode:var p=a.payload;return i.__assign({},e,{isTrialMode:p.isTrialMode});default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var s;t.defaultState={currentCalloutType:void 0,currentFileId:void 0,currentPageIndex:0,fileRevision:void 0,latestFileId:void 0,forceHideToolbar:!1,isFullScreen:!1,isSidebarOpen:(s={},s[a.DocType.ppt]=!0,s[a.DocType.pdf]=!1,s),mode:o.FileViewerMode.Default,disabledModes:{},renderStatuses:{},showOverQuotaUpsell:void 0,sidebar:{visibility:o.SidebarVisibility.Closed,paneStack:[],selectedControlId:void 0},watermark:void 0,campaign:void 0},t.fileViewerReducer=l}),define("modules/clean/react/file_viewer/data/selectors",["require","exports","tslib","modules/clean/redux/namespaces","modules/clean/redux/selectors","modules/clean/file_store/selectors","modules/clean/previews/data/selectors","modules/clean/previews/data/preview_type_util","external/reselect","external/lodash","modules/clean/react/extensions/data/selectors","modules/clean/react/extensions/client","file-viewer/core","modules/clean/react/file_viewer/files2_utils"],function(e,t,i,n,r,a,o,l,s,c,u,d,p,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),c=i.__importStar(c),t.getFileViewerState=function(e){return r.getStateAtNamespace(e,n.FILE_VIEWER_NAMESPACE_KEY)},t.getIsFullScreen=function(e){return t.getFileViewerState(e).isFullScreen},t.getIsSidebarOpen=function(e){return t.getFileViewerState(e).isSidebarOpen},t.getCurrentPageIndex=function(e){return t.getFileViewerState(e).currentPageIndex},t.getAppDownloadInterstitial=function(e){return t.getFileViewerState(e).appDownloadInterstitialDismissed},t.getCurrentCalloutType=function(e){return t.getFileViewerState(e).currentCalloutType},t.getCurrentFileId=function(e){return t.getFileViewerState(e).currentFileId},t.getCurrentFile=s.createSelector(c.nthArg(0),t.getCurrentFileId,a.getFile),t.getPastFile=function(e){return t.getFileViewerState(e).fileRevision},t.getCurrentUser=function(e){return t.getFileViewerState(e).currentUser},t.getMode=function(e){return t.getFileViewerState(e).mode},t.getDisabledModes=function(e){return t.getFileViewerState(e).disabledModes},t.getSidebar=function(e){return t.getFileViewerState(e).sidebar},t.getAnnotationAllowed=s.createSelector(t.getMode,function(e){return!m.isFiles2Enabled()||e===p.FileViewerMode.Commenting}),t.getIsTrialMode=function(e){return t.getFileViewerState(e).isTrialMode},t.getIsEditMode=function(e){return t.getMode(e)===p.FileViewerMode.Watermarking},t.getIsWatermarkingMode=function(e){return t.getMode(e)===p.FileViewerMode.Watermarking},t.getPageDimensions=function(e){return t.getFileViewerState(e).pageDimensions},t.getActiveFile=function(e){return t.getPastFile(e)||t.getCurrentFile(e)},t.getShowOverQuotaUpsell=function(e){return t.getFileViewerState(e).showOverQuotaUpsell};var _=function(e,i){return t.getFileViewerState(e).renderStatuses[i]};t.getBestCampaign=function(e){return t.getFileViewerState(e).campaign},t.getRenderStatusForCurrentFile=function(e){var i=t.getCurrentFileId(e);if(i)return _(e,i)},t.getIsMediaPlaying=function(e){return t.getFileViewerState(e).isMediaPlaying},t.getPauseCount=function(e){var i=t.getFileViewerState(e).pauseCount;return i?i:0},t.getPreviewApiDataForCurrentFile=function(e){var i=t.getCurrentFile(e);return o.getApiDataForFile(e,i).data},t.getIsFlippingEnabled=function(e){var i=t.getPreviewApiDataForCurrentFile(e);return!(t.getMode(e)===p.FileViewerMode.Watermarking||t.getIsMediaPlaying(e)||t.getIsFullScreen(e)&&l.isSsrDoc(i))},t.shouldForceHideToolbar=function(e){return t.getFileViewerState(e).forceHideToolbar},t.getExtensionsConfig=function(e){var i=t.getActiveFile(e);return i&&u.fileExtensionsConfigs(e)[i.file_id]?u.fileExtensionsConfigs(e)[i.file_id]:d.newExtensionsConfig("",[],d.DisplayState.LOADING)}}),define("modules/clean/react/file_viewer/data/store",["require","exports","modules/clean/redux/store","modules/clean/redux/namespaces","modules/clean/file_store/reducer","modules/clean/react/file_viewer/data/reducer","modules/clean/previews/data/reducer","modules/clean/previews/data/actions","modules/clean/file_store/actions","modules/clean/react/file_viewer/data/actions","modules/clean/react/extensions/data/store"],function(e,t,i,n,r,a,o,l,s,c,u){"use strict";function d(){return t.fileViewerReducerMap}function p(e,t,i){var n=t.file;n&&e.dispatch(c.openFile(n)),i&&e.dispatch(c.registerUser(i))}function m(e,t){e.dispatch(l.populateFilesPreviewData(t)),e.dispatch(s.putFiles(t))}function _(e,t){e.dispatch(s.putFiles(t))}Object.defineProperty(t,"__esModule",{value:!0});var f;t.fileViewerReducerMap=(f={},f[n.FILE_NAMESPACE_KEY]=r.fileNamespaceReducer,f[n.FILE_VIEWER_NAMESPACE_KEY]=a.fileViewerReducer,f[n.PREVIEW_NAMESPACE_KEY]=o.reducer,f),t.getStoreForFileViewer=function(){return u.getStore(),i.getStoreAndRegisterReducers(d())},t.hydrateFileViewerNamespace=p,t.hydrateFileStore=m,t.updateFileStore=_}),define("modules/clean/react/file_viewer/data/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){e.CloseFile="FileViewer/CloseFile",e.CloseFullScreen="FileViewer/CloseFullScreen",e.CloseSidebar="FileViewer/CloseSidebar",e.DismissAppDownloadInterstitial="FileViewer/DismissAppDownloadInterstitial",e.DisableForceHideToolbar="FileViewer/DisableForceHideToolbar",e.ForceHideToolbar="FileViewer/ForceHideToolbar",e.UpdateMode="FileViewer/UpdateMode",e.DisableMode="FileViewer/DisableMode",e.EnableMode="FileViewer/EnableMode",e.OpenFile="FileViewer/OpenFile",e.OpenFullScreen="FileViewer/OpenFullScreen",e.OpenSidebar="FileViewer/OpenSidebar",e.PageDown="FileViewer/PageDown",e.PageUp="FileViewer/PageUp",e.PauseMedia="FileViewer/PauseMedia",e.PlayMedia="FileViewer/PlayMedia",e.PopSidebarPane="FileViewer/PopSidebarPane",e.PushSidebarPane="FileViewer/PushSidebarPane",e.SetSelectedSidebarControlId="FileViewer/SetSelectedSidebarControlId",e.ResetSidebarPaneStack="FileViewer/ResetSidebarPaneStack",e.ResetSelectedSidebarControlId="FileViewer/ResetSelectedSidebarControlId",e.ResetStore="FileViewer/ResetStore",e.UpdateCurrentPageIndex="FileViewer/UpdateCurrentPageIndex",e.RestoreRevision="FileViewer/RestoreRevision",e.SaveForwardRevision="FileViewer/SaveForwardRevision",e.SetCurrentCalloutType="FileViewer/SetCurrentCalloutType",e.SetShowOverQuotaUpsell="FileViewer/SetShowOverQuotaUpsell",e.SetSidebarVisibility="FileViewer/SetSidebarVisibility",e.SetPageDimensions="FileViewer/SetPageDimensions",e.SetTextWatermark="FileViewer/SetTextWatermark",e.SetImageWatermark="FileViewer/SetImageWatermark",e.InitializeWatermark="FileViewer/InitializeWatermark",e.RemoveWatermark="FileViewer/RemoveWatermark",e.SwitchRevision="FileViewer/SwitchRevision",e.UpdateRenderStatus="FileViewer/UpdateRenderStatus",e.RegisterUser="FileViewer/RegisterUser",e.SetTrialMode="FileViewer/SetTrialMode",e.FetchControllerModeRequest="FileViewer/FetchControllerModeRequest",e.FetchControllerModeSuccess="FileViewer/FetchControllerModeSuccess",e.FetchControllerModeError="FileViewer/FetchControllerModeError",e.FetchBestCampaign="FileViewer/FetchBestCampaign",e.SetBestCampaign="FileViewer/SetBestCampaign"})(t.Actions||(t.Actions={}))}),define("modules/clean/react/file_viewer/file_preview_event_emitter",["require","exports","tslib","external/eventemitter3"],function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importDefault(n),t.filePreviewEventEmitter=new n.default}),define("modules/clean/react/file_viewer/files2_utils",["require","exports","modules/constants/file_viewer"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFiles2Enabled=function(){return"M2"===i.PREVIEWS_FILES_2||"M3"===i.PREVIEWS_FILES_2},t.isFiles2M3Enabled=function(){return"M3"===i.PREVIEWS_FILES_2},t.isFiles2M2Enabled=function(){return"M2"===i.PREVIEWS_FILES_2},t.isFiles2WatermarkingEnabled=function(e){return t.isFiles2Enabled()&&!!e&&!!i.WATERMARKING_BY_USER_ID&&(["M1","M2"].includes(i.WATERMARKING_BY_USER_ID[e.id])||["DEACTIVATED_MENU","POPOVER_WM_VALUE_PROPS","POPOVER_PRO_VALUE_PROPS","TOOLTIP_ON_HOVER"].includes(i.WATERMARK_TRIAL_VARIANT_BY_USER_ID[e.id]))}}),define("modules/clean/react/file_viewer/location_utils",["require","exports","tslib","modules/clean/react/file_viewer/constants","modules/clean/history","modules/core/exception"],function(e,t,i,n,r,a){"use strict";function o(e){return e?e.query.preview:""}function l(e,t){return e?e+"/"+t:"/"+t}function s(e,t){if(e&&!(t<=0))return e.split("/").slice(0,t+1).join("/")}function c(e,t){if(e){if(t<=0)return e;return s(e,e.split("/").length-t-1)}}function u(e){p(d(n.SubpathQueryKey,e))}function d(e,t){var i=r.default.get_uri();return t?i.updateQuery(e,t):i.removeQuery(e),i}function p(e){r.default.push_state(e.getPath(),e.getQuery())}function m(e){var t,i=e.query[n.SubpathQueryKey];return t=i instanceof Array?i.length?i[0]:void 0:i,t&&0!==t.indexOf("/")?void a.reportStack("path malformed",{severity:a.SEVERITY.NONCRITICAL,exc_extra:{fileSubpath:t}}):t}function _(e){var t=e.query[n.PageQueryKey];if(t){var i=+t;return i?i:void 0}}function f(e){e?e>0&&p(d(n.PageQueryKey,e.toString())):p(d(n.PageQueryKey,null))}Object.defineProperty(t,"__esModule",{value:!0}),r=i.__importDefault(r),a=i.__importStar(a),t.getFilenameFromLocation=o,t.addToFileSubpath=l,t.truncateFileSubpath=s,t.shortenFileSubpathBy=c,t.updateFileSubpathQuery=u,t.getFileSubpath=m,t.getPageQuery=_,t.updatePageQuery=f}),define("modules/clean/react/file_viewer/logging",["require","exports","modules/clean/react/file_viewer/models","modules/clean/react/file_viewer/file_preview_event_emitter","modules/clean/react/file_viewer/constants"],function(e,t,i,n,r){"use strict";function a(e,i){return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];var o=e.apply(void 0,n);return t.logUserAction(i,r.UserActionContext.Toolbar),o}}function o(e,i){return function(){
for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];var o=e.apply(void 0,n);return t.logUserAction(i,r.UserActionContext.Keyboard),o}}Object.defineProperty(t,"__esModule",{value:!0}),t.logUserAction=function(e,t,a){void 0===a&&(a={}),null!=i.FilePreviewSession.currentSession&&n.filePreviewEventEmitter.emit(r.EventType.FilePreviewUserAction,i.FilePreviewSession.currentSession,e,t,a)},t.wrapToolbarActionWithLogging=a,t.wrapKeyboardActionWithLogging=o}),define("modules/clean/react/file_viewer/models",["require","exports","tslib","modules/clean/react/file_viewer/constants","modules/clean/react/file_viewer/file_preview_event_emitter","modules/clean/react/previews/constants","modules/clean/uuid","modules/clean/web_timing_logger","modules/core/browser","modules/core/browser_detection","modules/core/exception"],function(e,t,i,n,r,a,o,l,s,c,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s=i.__importStar(s),u=i.__importStar(u);var d={};d[n.EventType.FilePreviewAttemptStarted]=null,d[n.EventType.FilePreviewSupportConfirmed]=n.EventType.FilePreviewAttemptStarted,d[n.EventType.FilePreviewSupportDenied]=n.EventType.FilePreviewAttemptStarted,d[n.EventType.FilePreviewDownloadAttempted]=n.EventType.FilePreviewSupportConfirmed,d[n.EventType.FilePreviewDownloadSucceeded]=n.EventType.FilePreviewDownloadAttempted,d[n.EventType.FilePreviewDownloadFailed]=n.EventType.FilePreviewDownloadAttempted,d[n.EventType.FilePreviewRenderSucceeded]=n.EventType.FilePreviewDownloadSucceeded,d[n.EventType.FilePreviewRenderFailed]=n.EventType.FilePreviewDownloadSucceeded;var p=(function(){function e(e){this.id=e||o.UUID.v4({allowInsecure:!0}),this.deviceType=this._deviceTypeString()}return e.prototype._deviceTypeString=function(){return c.is_supported_mobile_browser()?"mobile":c.is_tablet()?"tablet":"desktop"},e.currentSession=null,e})();t.FileViewerSession=p;var m=(function(){function e(e){var t=e.id,i=e.fileViewerSession,n=e.file,r=e.previewType,a=e.sourceContext,l=e.sourceAction;this.passwordNeeded=!1,u.assert(!!i,"FileViewerSession required"),u.assert(!!n,"File required"),this.id=t||o.UUID.v4({allowInsecure:!0}),this.fileViewerSession=i,this.file=n,this.previewType=r,this.sourceContext=a,this.sourceAction=l,this.previewTimeline={},this.lastEvent=null}return e.prototype.recordEvent=function(e,t){if(void 0===t&&(t={}),!(t instanceof Object))throw new Error("extra param of recordEvent should be an object.");this.isEventInTimeline(e)||d.hasOwnProperty(e)&&this.lastEvent!==d[e]||(this.addToTimeline(e),r.filePreviewEventEmitter.emit(e,this,t),this.lastEvent=e)},e.prototype.markPrimaryEvent=function(){var e;e=window._timingData&&window._timingData.tti?window._timingData.tti.getTime():s.now(),this.primaryMarkTs||(this.primaryMarkTs=e)},e.prototype.timeToPrimaryMark=function(){return this.timeToMark(this.primaryMarkTs)},e.prototype.timeToMark=function(e){if(void 0!==e)switch(this.sourceAction){default:return;case a.PreviewSourceAction.Visit:var t=l.start_time();if(void 0!==t)return e-t;return;case a.PreviewSourceAction.Click:var i=this.previewTimeline[n.EventType.FilePreviewAttemptStarted];if(!i)return;var r=i.timestamp;if(void 0===r)return;return e-r}},e.prototype.isEventInTimeline=function(e){return e in this.previewTimeline},e.prototype.addToTimeline=function(e){this.previewTimeline[e]={timestamp:s.now()}},e.currentSession=null,e})();t.FilePreviewSession=m}),define("modules/clean/react/file_viewer/open_button/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){e[e.DOWNLOAD=0]="DOWNLOAD",e[e.UNITY_FILE=1]="UNITY_FILE",e[e.UNITY_FOLDER=2]="UNITY_FOLDER",e[e.OPEN_WITH=3]="OPEN_WITH",e[e.OPEN_IN_PAPER=4]="OPEN_IN_PAPER",e[e.APP_ACTION=5]="APP_ACTION",e[e.PREPARE_FOR_SIGNATURE=6]="PREPARE_FOR_SIGNATURE",e[e.SHARE_TO_SLACK=7]="SHARE_TO_SLACK",e[e.PRESENT_IN_ZOOM=8]="PRESENT_IN_ZOOM",e[e.SHARE_TO_TRELLO=9]="SHARE_TO_TRELLO",e[e.INVITE_VIA_EMAIL=10]="INVITE_VIA_EMAIL",e[e.OPEN_WITH_CLOUD_DOC=11]="OPEN_WITH_CLOUD_DOC"})(t.OpenButtonAction||(t.OpenButtonAction={}))}),define("modules/clean/react/file_viewer/prompt/campaign_api",["require","exports","modules/clean/api_v2/user_client"],function(e,t,i){"use strict";function n(e,t){var n=new i.UserApiV2Client,r={platform:"web",locations:["targeted_bubble"],ref_page:["other"],display_context:"fv_preview_type="+t},a={client_context:r};return n.ns("prompt").rpc("get_best_campaigns",a,{subjectUserId:e})}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchBestCampaigns=n}),define("modules/clean/react/file_viewer/title_utils",["require","exports","modules/constants/python","modules/clean/filepath","modules/clean/file_store/utils","modules/core/i18n"],function(e,t,i,n,r,a){"use strict";function o(e){var t=e.file,o=e.fileViewAction,l=e.fileViewOrigin;return e.isVersionHistoryMode?a._("Version history"):l===i.FileViewOriginType.RECENTS?a._("Recents"):l===i.FileViewOriginType.HOME?a._("Home"):l!==i.FileViewOriginType.PHOTOS&&o!==i.FileViewActionType.SEARCH&&r.isBrowseFile(t)&&t.fq_path?n.filename(n.parent_dir(t.fq_path)):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.closeButtonTitle=function(e){var t=o(e);return!e.sharedLinkInfo&&t?a._("Back to %(folder)s").format({folder:t}):a._("Close")},t.customLogoUrl=function(e){return e?e.ownerTeamLogo:void 0}}),define("modules/clean/react/file_viewer/url_utils",["require","exports","tslib","modules/clean/history","modules/core/browser"],function(e,t,i,n,r){"use strict";function a(e){return function(t){t.ctrlKey||t.metaKey||e(t)}}function o(){var e=r.get_uri();return e.removeQuery("preview"),e}function l(){d("preview")}function s(e){u("preview",e.filename)}function c(e){n.default.push_state(e.getPath(),e.getQuery())}function u(e,t){var i={};i[e]=t;var r=n.default.get_uri();r.updateQuery(i),c(r)}function d(e){var t=n.default.get_uri();t.removeQuery(e),c(t)}Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importDefault(n),r=i.__importStar(r),t.linkClickHandler=a,t.getCurrentFolderHref=o,t.closeFile=l,t.openFile=s}),define("modules/clean/react/location/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(function(){function e(e,t){void 0===t&&(t={}),this.path=e,this.query=t}return e.fromURI=function(t){return new e(t.getPath(),t.getQuery())},e})();t.Location=i}),define("modules/clean/react/location/with_location",["require","exports","tslib","react","modules/clean/react/location/types","modules/clean/react/size_class/utils","modules/core/browser","modules/clean/history"],function(e,t,i,n,r,a,o,l){"use strict";function s(e,t){void 0===t&&(t=c);var s;return s=(function(a){function s(e){var i=a.call(this,e)||this;i.onLocationChange=function(e,n){i.setState(t(new r.Location(i.basePathComponent+"/"+decodeURIComponent(e),n),i.props))};var n=o.get_uri(),l=n.getPath();return i.basePathComponent="/"+l.split("/")[1],i.state=t(r.Location.fromURI(n),e),i}return i.__extends(s,a),s.prototype.componentDidMount=function(){l.default.add_callback(this.basePathComponent,this.onLocationChange,!0)},s.prototype.componentWillUnmount=function(){l.default.remove_callback(this.basePathComponent,this.onLocationChange)},s.prototype.render=function(){return n.default.createElement(e,i.__assign({},this.props,this.state))},s})(n.default.PureComponent),s.displayName="WithLocation("+a.getDisplayName(e)+")",s}Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importDefault(n),o=i.__importStar(o),l=i.__importDefault(l);var c=function(e){return{location:e}};t.withLocation=s}),define("modules/clean/react/open_in_app/banner",["require","exports","tslib","react","modules/clean/react/css","modules/clean/open_in_app/actions","modules/core/i18n"],function(e,t,i,n,r,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importDefault(n);var l=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={closed:!1,showInstallAppText:!1},t.handleAppRedirect=function(){t.props.onClick&&t.props.onClick(),a.openInApp(t.props.urls,{onAppNeeded:function(){return t.setState({showInstallAppText:!0})},onAppInstalled:function(){return t.setState({showInstallAppText:!1})}})},t.dismiss=function(){t.setState({closed:!0});var e=t.props.onClose;e&&e()},t}return i.__extends(t,e),t.prototype.componentWillUnmount=function(){a.cleanUp()},t.prototype.render=function(){var e=this.state,t=e.closed,i=e.showInstallAppText;return t?null:n.default.createElement("div",{className:"open-in-app-banner-container"},n.default.createElement("button",{className:"button-as-link open-in-app-banner-text",onClick:this.handleAppRedirect},i?o._("Get the Dropbox App"):o._("View In App")),n.default.createElement("button",{className:"button-as-link open-in-app-banner-close","aria-label":"Close",onClick:this.dismiss}))},t})(n.default.Component),s=["/static/css/open_in_app/banner-vflSK4--U.css"],c=r.requireCssWithComponent(l,s);t.OpenInAppBanner=c}),define("modules/clean/react/previews/preview_toolbar_button",["require","exports","tslib","external/classnames","react","modules/clean/react/sprite","modules/clean/static_urls","spectrum/icon_document","spectrum/tooltip"],function(e,t,i,n,r,a,o,l,s){"use strict";function c(e){var t=e.className,i=e["data-test"],c=e.disabled,u=e.iconName,d=e.onClick,p=e.spriteGroup,m=e.spriteName,_=e.spectrumIconName,f=e.tooltip;return r.default.createElement("div",{className:n.default(t,"toolbar-button-entry"),"data-test":i,onMouseUp:d},r.default.createElement(s.Tooltip,{positioning:"above",positionOffset:24,tooltipContent:f},r.default.createElement("button",{className:t+"-button","aria-label":f},void 0!==u?r.default.createElement("img",{src:o.static_url("/static/images/previews/toolbar/"+u+".svg"),alt:f,className:n.default({disabled:c})}):void 0!==m?r.default.createElement(a.Sprite,{group:p,name:m,alt:f,className:n.default({disabled:c})}):r.default.createElement(l.IconDocument,{name:_}))))}Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importDefault(n),r=i.__importDefault(r),t.PreviewToolbarButton=c}),define("modules/clean/react/size_class/size_class",["require","exports","tslib","react","external/classnames","hoist-non-react-statics","spectrum/match","modules/clean/react/size_class/constants","modules/clean/react/size_class/utils","modules/clean/react/size_class/utils"],function(e,t,i,n,r,a,o,l,s,c){"use strict";function u(e,t){void 0===t&&(t={});var u=(function(a){function u(){var t=null!==a&&a.apply(this,arguments)||this;return t.displayName="WithSizeClass("+c.getDisplayName(e),t.state={},t.getHandleMatch=function(e,i){return function(){var n;t.setState((n={},n[e]=i,n))}},t.onMatchMedium=t.getHandleMatch("matchSizeClassMedium",!0),t.onUnmatchMedium=t.getHandleMatch("matchSizeClassMedium",!1),t.onMatchLarge=t.getHandleMatch("matchSizeClassLarge",!0),t.onUnmatchLarge=t.getHandleMatch("matchSizeClassLarge",!1),t.onMatchExtraLarge=t.getHandleMatch("matchSizeClassExtraLarge",!0),t.onUnmatchExtraLarge=t.getHandleMatch("matchSizeClassExtraLarge",!1),t}return i.__extends(u,a),u.prototype.render=function(){var a,c=t.isResponsiveEnabled,u=t.responsiveClassName,d=void 0===u?"":u;return n.default.createElement("div",{className:r.default((a={},a[d]=!c||c(),a))},n.default.createElement(o.Match,{media:l.MEDIA_SIZE_CLASS_MEDIUM,onMatch:this.onMatchMedium,onUnmatch:this.onUnmatchMedium}),n.default.createElement(o.Match,{media:l.MEDIA_SIZE_CLASS_LARGE,onMatch:this.onMatchLarge,onUnmatch:this.onUnmatchLarge}),n.default.createElement(o.Match,{media:l.MEDIA_SIZE_CLASS_EXTRA_LARGE,onMatch:this.onMatchExtraLarge,onUnmatch:this.onUnmatchExtraLarge}),n.default.createElement(e,i.__assign({},this.props,{sizeClass:s.getSizeClass(this.state.matchSizeClassMedium,this.state.matchSizeClassLarge,this.state.matchSizeClassExtraLarge,c)})))},u})(n.default.Component);return a.default(u,e)}Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importDefault(n),r=i.__importDefault(r),a=i.__importDefault(a),t.SizeClass=l.SizeClass,t.withSizeClass=u}),define("modules/clean/react/size_class/utils",["require","exports","modules/clean/react/size_class/constants"],function(e,t,i){"use strict";function n(e,t,n,r){return r&&!r()?i.SizeClass.Large:n?i.SizeClass.ExtraLarge:t?i.SizeClass.Large:e?i.SizeClass.Medium:i.SizeClass.Small}function r(e){return e.displayName||e.name||"Component"}function a(e){return e!==i.SizeClass.Large&&e!==i.SizeClass.ExtraLarge}Object.defineProperty(t,"__esModule",{value:!0}),t.getSizeClass=n,t.getDisplayName=r,t.isSmallerThanLarge=a}),define("modules/clean/react/watermarking/types",["require","exports"],function(e,t){"use strict";function i(e){return e.isTextWatermarkingMode?e.textWatermarkingOptions:e.imageWatermarkingOptions}Object.defineProperty(t,"__esModule",{value:!0});(function(e){e.REPEAT="REPEAT",e.CENTER="CENTER",e.NORTHWEST="NORTHWEST",e.NORTHEAST="NORTHEAST",e.SOUTHEAST="SOUTHEAST",e.SOUTHWEST="SOUTHWEST"})(t.WatermarkPosition||(t.WatermarkPosition={})),t.getWatermarkingOptions=i}),define("modules/clean/react/watermarking/utils",["require","exports","tslib","modules/constants/file_viewer","file-viewer/core","modules/constants/page_load","modules/clean/file_store/utils","modules/core/i18n","modules/clean/previews/constants","modules/clean/react/watermarking/types"],function(e,t,i,n,r,a,o,l,s,c){"use strict";function u(e){return e&&n.WATERMARK_TRIAL_VARIANT_BY_USER_ID?n.WATERMARK_TRIAL_VARIANT_BY_USER_ID[e.id]:""}function d(e){return!t.userCanWatermark(e)&&["DEACTIVATED_MENU","POPOVER_WM_VALUE_PROPS","POPOVER_PRO_VALUE_PROPS","TOOLTIP_ON_HOVER"].includes(u(e))}function p(e,i){return t.allowWatermark(e,i)||d(i)}function m(e){var t=r.createMetaserverFormatters(y,{},r.createI18nCache()).formatDateTime,i=t(new Date,{}),a=e.display_name+" | "+i;return n.WATERMARKING_BY_USER_ID&&"ON"===n.WATERMARKING_BY_USER_ID[e.id]?a+" | ":a}function _(e,i){if(!e||!i)return t.DEFAULT_SIZES;var n=e.width/i.width,r=e.height/i.height,a=Math.max(n,r);if(a*t.DEFAULT_SIZES.maxSize<=.9)return t.DEFAULT_SIZES;var o=.9/a,l=o/25;return{size:o/5,minSize:l,maxSize:o,step:(o-l)/t.TOTAL_STEPS}}function f(e,n){return{isTextWatermarkingMode:!0,textWatermarkingOptions:{angle:45,color:"black",opacity:10,fontFamily:"Helvetica, sans-serif",size:20,minSize:5,maxSize:200,lineHeight:3,text:e?m(e):"DRAFT",position:c.WatermarkPosition.REPEAT,marginX:40,marginY:40,scale:g(n),step:1},imageWatermarkingOptions:i.__assign({angle:0,opacity:10,position:c.WatermarkPosition.REPEAT,marginX:40,marginY:40,scale:g(n)},t.DEFAULT_SIZES)}}function g(e){return e===s.PreviewType.SsrDoc?300/72:1}function v(e,t){if(e)return h(t===s.PreviewType.Image?"Watermarking is available on PDFs, PNGs, JPEGs, and BMPs.":"Watermarking is available on PDFs and images.")}function S(e){return new Promise(function(t,i){var n=new Image;n.onload=function(){t(n)},n.onerror=function(e){i(e)},n.crossOrigin="anonymous",n.src=e})}function w(e){return e&&n.WATERMARKING_BY_USER_ID?n.WATERMARKING_BY_USER_ID[e.id]:""}Object.defineProperty(t,"__esModule",{value:!0});var h=l.i18n_default_project("watermarking")._,y=a.USER_LOCALE&&[a.USER_LOCALE.replace("_","-")]||[],b=[".pdf",".jpg",".jpeg",".png",".bmp"];t.DEFAULT_SIZES={size:1,minSize:.2,maxSize:5,step:.1},t.TOTAL_STEPS=48;var E=(function(e){function t(t){var i=e.call(this,t)||this;return i.message=t,i.name="WatermarkingError",i}return i.__extends(t,e),t.TILE_NO_INPUT="Unable to tile: missing text or image",t})(Error);t.WatermarkingError=E,t.fileIsEditable=function(e){return!!e&&(o.isBrowseFile(e)&&!e.read_only)},t.fileIsWatermarkable=function(e){return!!e&&(o.isBrowseFile(e)&&!e.read_only&&!!e.ext&&b.includes(e.ext.toLowerCase()))},t.userCanWatermark=function(e){return["ON","M1","M2"].includes(w(e))},t.allowWatermark=function(e,i){return t.userCanWatermark(i)&&t.fileIsWatermarkable(e)},t.getWatermarkTrialVariant=u,t.allowWatermarkTrial=d,t.allowWatermarkOrTrial=p,t.getDefaultText=m,t.getImageDefaultSizes=_,t.getDefaultWatermarkState=f,t.getWatermarkingLabelText=v,t.getImageFromURL=S,t.isImageCustomizationEnabled=function(e){return"M2"===w(e)},t.getWatermarkMilestone=w}),define("modules/clean/security/sjcl_crypto",["require","exports","tslib","external/sjcl"],function(e,t,i,n){"use strict";function r(e){for(var t=n.random.randomWords(e.length),i=0,r=e.length,a=0<=r;a?i<r:i>r;a?i++:i--)e[i]=t[i];return e}Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importStar(n),t.getRandomValues=r}),define("modules/clean/uuid",["require","exports","tslib","modules/clean/insecure_uuid","modules/clean/security/sjcl_crypto"],function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.getRandomBytes=function(e){var t=this;void 0===e&&(e={});var i=new Array(16);try{r.getRandomValues(i)}catch(t){if(t.message.match(/generator isn't seeded/)&&e.allowInsecure)return this.getInsecureRandomValues(i);throw t}return i.map(function(e){return t.toByte(e)})},t.v4=function(e){void 0===e&&(e={});var t=this.getRandomBytes({allowInsecure:e.allowInsecure});return t[6]=15&t[6]|64,t[8]=63&t[8]|128,this.bytesToUUIDString(t)},t})(n.InsecureUUID);t.UUID=a}),define("spectrum/icon_document/bundle",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ICONS={"date-small":{attrs:{width:"24",height:"24",viewBox:"0 0 24 24"},dangerouslySetInnerIconHtml:'<g fill="none" fill-rule="evenodd"><g fill="#000" fill-rule="nonzero"><path d="M4 4h16v16H4V4zm2 2v12h12V6H6z"></path><path d="M5 8h14v2H5zM7 2h2v4H7zM15 2h2v4h-2z"></path></g></g>'},date:{attrs:{width:"32",height:"32",viewBox:"0 0 32 32"},dangerouslySetInnerIconHtml:'<g fill="none" fill-rule="evenodd"><g fill="#000" fill-rule="nonzero"><path d="M6 6h20v20H6V6zm2 2v16h16V8H8z"></path><path d="M7 11h18v2H7zM11 4h2v4h-2zM19 4h2v4h-2z"></path></g></g>'},"signature-small":{attrs:{width:"24",height:"24",viewBox:"0 0 24 24"},dangerouslySetInnerIconHtml:'<g fill="none" fill-rule="evenodd"><g fill="#000" fill-rule="nonzero"><path d="M1 18h22v1H1z"></path><path d="M10.874 17.262c-1.33 1.046-1.25 2.246-.297 2.723 1.076.537 2.438-.321 3.206-2.953.226-.774.42-1.509.583-2.205-1.06.632-2.251 1.46-3.492 2.435zm4.589.26c-1.044 3.578-3.487 5.118-5.668 4.028-2.131-1.065-2.317-3.844-.003-5.664 1.857-1.46 3.565-2.6 5.014-3.317.634-4.207-.218-6.501-2.436-6.681-1.374-.111-1.993.459-2.027 1.713-.041 1.48.799 3.57 2.34 5.61l-1.397 1.054c-1.76-2.33-2.746-4.782-2.693-6.713.062-2.246 1.534-3.602 3.918-3.408 3.355.272 4.634 3.065 4.144 7.711 1.236-.31 2.137-.102 2.578.742.211.404.28.842.24 1.308a3.4 3.4 0 0 1-.025.205c1.118-.989 1.885-1.388 2.896-1.103.22.063.432.163.632.299l-.986 1.446a.42.42 0 0 0-.121-.06c-.223-.063-.618.152-1.332.792l-.42.379c-.17.151-.308.267-.442.37-.42.32-.786.5-1.217.5-.758 0-1.248-.545-1.188-1.264a2.4 2.4 0 0 1 .12-.543c.034-.105.181-.524.157-.454.11-.32.166-.532.182-.719a.652.652 0 0 0-.037-.325c.02.04.003.044-.143.053-.287.018-.69.127-1.183.324a38.652 38.652 0 0 1-.903 3.717zM1.381 11.619L2.62 10.38l4.95 4.95-1.238 1.237z"></path><path d="M6.377 10.382l1.238 1.236-4.948 4.952-1.238-1.237z"></path></g></g>'},signature:{attrs:{width:"32",height:"32",viewBox:"0 0 32 32"},dangerouslySetInnerIconHtml:'<g fill="none" fill-rule="evenodd"><g fill="#000" fill-rule="nonzero"><path d="M3 24h26v1H3z"></path><path d="M12.5 23.31c-1.983 1.56-1.857 3.437-.376 4.177 1.643.821 3.682-.464 4.79-4.26.37-1.271.68-2.47.931-3.594-1.6.917-3.43 2.172-5.345 3.678zm6.334.476c-1.423 4.878-4.698 6.942-7.604 5.49-2.828-1.413-3.075-5.094.034-7.538 2.627-2.065 5.04-3.666 7.065-4.65.94-6.089-.293-9.445-3.584-9.712-2.047-.166-3.02.73-3.072 2.607-.058 2.126 1.133 5.09 3.313 7.976l-1.595 1.206c-2.431-3.218-3.79-6.597-3.717-9.237.082-3.012 2.03-4.805 5.233-4.546 4.596.373 6.315 4.295 5.547 10.86 1.785-.52 3.073-.3 3.663.83.273.523.363 1.094.31 1.705a4.971 4.971 0 0 1-.175.925c.12-.105.252-.223.4-.356 1.565-1.402 2.605-1.969 3.947-1.59.285.08.558.21.818.387l-1.126 1.652a.807.807 0 0 0-.235-.114c-.414-.117-1.015.21-2.07 1.155-.07.063-.47.426-.586.529a10.64 10.64 0 0 1-.604.506c-.55.42-1.024.653-1.565.653-.928 0-1.51-.649-1.437-1.524.018-.219.07-.436.158-.71.046-.143.25-.725.217-.63.16-.462.24-.774.265-1.057.023-.255-.008-.449-.09-.605-.063-.122-.828-.083-2.231.498-.3 1.634-.728 3.4-1.279 5.29z"></path><path d="M8.293 14.294l1.415 1.414-4.997 5-1.414-1.414z"></path><path d="M3.297 15.708l1.414-1.414 5 5-1.414 1.414z"></path></g></g>'},"text-small":{attrs:{width:"24",height:"24",viewBox:"0 0 24 24"},dangerouslySetInnerIconHtml:'<g fill="none" fill-rule="evenodd"><g fill="#000" fill-rule="nonzero"><path d="M4 4h16v16H4V4zm2 2v12h12V6H6z"></path><path d="M8 8h8v2H8z"></path><path d="M11 9h2v7h-2z"></path></g></g>'},text:{attrs:{width:"32",height:"32",viewBox:"0 0 32 32"},dangerouslySetInnerIconHtml:'<g fill="none" fill-rule="evenodd"><g fill="#000" fill-rule="nonzero"><path d="M6 6h20v20H6V6zm2 2v16h16V8H8z"></path><path d="M11 11h10v2H11zM15 13h2v8h-2z"></path></g></g>'}}}),define("spectrum/icon_document",["require","exports","tslib","tslib","react","spectrum/icon_templates/stateless","spectrum/svg_icon_bundle","spectrum/icon_document/bundle"],function(e,t,i,n,r,a,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importStar(n),r=i.__importStar(r),t.ICONS=l.ICONS,t.IconDocument=function(e){var t=e.name,i=r.createElement(o.SvgIconBundle,{focusable:"false",icon:l.ICONS[t]});return r.createElement(a.Component,n.__assign({icon:i},e))},t.IconDocument.displayName="IconDocument"});
//# sourceMappingURL=pkg-shared_link_core.min.js-vfleDOEG_.map