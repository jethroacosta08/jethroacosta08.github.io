define(["require","exports","tslib","react","spectrum_comments/rich_facepile/localization","spectrum/avatar","spectrum/facepile","spectrum/util/uuid_generator"],function(o,e,t,n,i,a,r,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OVERFLOW="overflow",e.MAX_FACES=5;var p;(function(o){o[o.Auto=1]="Auto",o[o.ForceShow=2]="ForceShow",o[o.ForceHide=3]="ForceHide"})(p=e.DisplayMode||(e.DisplayMode={}));var c=(function(o){function c(){var t=null!==o&&o.apply(this,arguments)||this;return t.state={},t.tooltipContentWrapperClassName=l.generateUUID("sc-rich-facepile-tooltip-content"),t.documentClickListener=function(o){void 0===t.state.activeTooltipIndex||t.closest(o.target,t.tooltipContentWrapperClassName)||t.setState({activeTooltipIndex:void 0})},t.bindN=function(o){for(var t=[],n=function(e){t.push(function(){return o(e)})},i=0;i<e.MAX_FACES;i++)n(i);return t},t.onTooltipShownForIndex=function(o){var e=t.props.onTooltipChange,n=t.infoFromIndex(o);e&&null!==n&&e({activeMode:t.activeMode,displayInfo:null},{activeMode:t.activeMode,displayInfo:n})},t.onTooltipHiddenForIndex=function(o){var e=t.props.onTooltipChange,n=t.infoFromIndex(o);e&&null!==n&&e({activeMode:t.activeMode,displayInfo:n},{activeMode:t.activeMode,displayInfo:null})},t.onAvatarClickForIndex=function(o){t.setState({activeTooltipIndex:o});var e=t.props.onTooltipChange;e&&e({activeMode:!1,displayInfo:null},{activeMode:!0,displayInfo:t.infoFromIndex(o)})},t.onAvatarMouseOverForIndex=function(o){void 0!==t.state.activeTooltipIndex&&t.setState({activeTooltipIndex:o})},t.onTooltipShown=t.bindN(t.onTooltipShownForIndex),t.onTooltipHidden=t.bindN(t.onTooltipHiddenForIndex),t.onAvatarClick=t.bindN(t.onAvatarClickForIndex),t.onAvatarMouseOver=t.bindN(t.onAvatarMouseOverForIndex),t}return t.__extends(c,o),c.prototype.componentDidMount=function(){document.addEventListener("click",this.documentClickListener,!0)},c.prototype.componentWillUnmount=function(){document.removeEventListener("click",this.documentClickListener,!0)},c.prototype.closest=function(o,e){for(;o;o=o.parentElement)if(o.classList.contains(e))return o;return null},Object.defineProperty(c.prototype,"activeMode",{get:function(){return void 0!==this.state.activeTooltipIndex},enumerable:!0,configurable:!0}),c.prototype.displayModeForIndex=function(o){var e=this.state.activeTooltipIndex;return void 0===e?p.Auto:e===o?p.ForceShow:p.ForceHide},c.prototype.infoFromIndex=function(o){var t=this.props,n=t.avatarInfoList,i=t.avatarInfoList.length;return t.overflowRemainderCount&&o===i?e.OVERFLOW:o>=i?null:n[o]},c.prototype.render=function(){var o=this,t=this.props,i=t.avatarSize,l=t.avatarInfoList,p=t.overflowRemainderCount,c=t.tooltipComponent,s=t.renderFacepile,d=l.map(function(e,t){var l=e.present,p=e.activeTooltipContent,s=e.avatarColorSeed,d=e.displayName,v=e.initials,u=e.memberKey,f=e.passiveTooltipContent,C=e.photoUrl,m=s||d,h=n.createElement(r.FacepileMembersAvatar,{active:l,avatarColorSeed:m,avatarSize:i,initials:v,onClick:o.onAvatarClick[t],onMouseOver:o.onAvatarMouseOver[t],photoUrl:C,"aria-label":d});return n.createElement(c,{avatar:h,displayMode:o.displayModeForIndex(t),tooltipContent:p&&o.activeMode?p:f,avatarColor:a.avatarColorForUserIdentifier(m),onTooltipShown:o.onTooltipShown[t],onTooltipHidden:o.onTooltipHidden[t],tooltipContentWrapperClassName:o.tooltipContentWrapperClassName,key:u})}),v=this.context.localization;if(p){var u=l.length,f=n.createElement(r.FacepileMembersOverflowCircle,{avatarSize:i,backgroundColor:"#627283",textColor:"white",onClick:this.onAvatarClick[u],onMouseOver:this.onAvatarMouseOver[u],remainderCount:p>=99?v.ninetyNinePlus:""+p});d.push(n.createElement(c,{avatar:f,displayMode:this.displayModeForIndex(u),tooltipContent:n.createElement("span",null,this.context.localization.nOthers(p)),avatarColor:"#627283",onTooltipShown:this.onTooltipShown[u],onTooltipHidden:this.onTooltipHidden[u],tooltipContentWrapperClassName:this.tooltipContentWrapperClassName,key:e.OVERFLOW}))}return s(d)},c.contextType=i.RichFacepileContext,c})(n.Component);e.Avatars=c});
//# sourceMappingURL=avatars.min.js-vflEgiJrj.map