define(["require","exports","tslib","modules/clean/security/util"],function(e,t,r,n){"use strict";function i(){return r.__awaiter(this,void 0,Promise,function(){var t,n;return r.__generator(this,function(i){switch(i.label){case 0:return void 0!==window.crypto?[2,window.crypto]:[4,new Promise(function(t,r){e(["modules/clean/security/mscrypto_shim"],t,r)}).then(r.__importStar)];case 1:if(t=i.sent().msCryptoWrapper,n=t(),void 0!==n)return[2,n];throw new Error("WebCrypto not supported")}})})}function s(e,t,s){return r.__awaiter(this,void 0,Promise,function(){var u=this;return r.__generator(this,function(o){return[2,i().then(function(i){return r.__awaiter(u,void 0,void 0,function(){var u,o,a,c,p,y,l,f;return r.__generator(this,function(r){switch(r.label){case 0:return u=i.getRandomValues(new Uint8Array(12)),[4,i.subtle.generateKey({name:"AES-GCM",length:128},!0,["encrypt","decrypt"])];case 1:return o=r.sent(),[4,i.subtle.encrypt({name:"AES-GCM",iv:u},o,t)];case 2:return a=r.sent(),[4,i.subtle.exportKey("raw",o)];case 3:return c=r.sent(),[4,i.subtle.importKey("spki",e,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"])];case 4:return p=r.sent(),[4,i.subtle.encrypt({name:"RSA-OAEP"},p,c)];case 5:return y=r.sent(),l=new ArrayBuffer(2),f=new DataView(l),f.setInt16(0,s),[2,n.concatenateArrayBuffers(l,y,u,a)]}})})})]})})}Object.defineProperty(t,"__esModule",{value:!0}),t.encryptWithPublicKey=s});
//# sourceMappingURL=crypto.min.js-vfl7Hop0k.map