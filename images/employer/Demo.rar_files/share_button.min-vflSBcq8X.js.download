define(["require","exports","tslib","react","external/classnames","external/react-redux","modules/clean/react/extensions/split_share_button","modules/clean/react/extensions/utils","modules/clean/react/extensions/data/types","modules/clean/react/file_viewer/share_helpers","modules/clean/integrations/zoom_share_dialog/async_modal","modules/clean/sharing/constants","modules/clean/react/file_viewer/logging","modules/clean/react/file_viewer/data/selectors","modules/clean/react/file_viewer/constants","modules/core/i18n","modules/clean/react/file_viewer_sidebar/buttons/icon","spectrum/button"],function(e,t,n,r,a,o,i,l,s,c,u,h,d,p,f,_,m,S){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=n.__importDefault(r),a=n.__importDefault(a),c=n.__importStar(c),t.handleShareClick=function(e,t){c.share(e,t,null,h.SHARE_ACTION_ORIGIN_TYPE.PREVIEW_PAGE),d.logUserAction(f.UserAction.Share,f.UserActionContext.TitleBarMain)},t.handlePresentInZoom=function(e,t){u.asyncShowModal(t.id,e.file_id,"file-viewer-modal-overlay")};var v=function(e){return{extensionsConfig:p.getExtensionsConfig(e)}},g=(function(o){function c(){var r=null!==o&&o.apply(this,arguments)||this;return r.handleSplitShareButtonShareClick=function(){t.handleShareClick(r.props.file,r.props.user)},r.handleShareButtonClick=function(){return n.__awaiter(r,void 0,void 0,function(){var r,a,o;return n.__generator(this,function(i){switch(i.label){case 0:return t.handleShareClick(this.props.file,this.props.user),[4,new Promise(function(t,n){e(["modules/clean/react/app_actions/telemetry_client"],t,n)}).then(n.__importStar)];case 1:return r=i.sent(),a=r.createTelemetryClient,o=r.getPiiSafeExtension,a({component:"share-btn"}).session({surface:"previews",ext:o(this.props.file.ext)}).event("click_share",{trigger_type:s.TriggerType.PrimaryButton}),[2]}})})},r}return n.__extends(c,o),c.prototype.render=function(){var e=this.props,n=e.file,o=e.user,s=e.extensionsConfig,c=e.isCollapsed;if(l.shouldShowSplitShare(s.featureFlags,s.sharingServiceInfo,n))return r.default.createElement(i.SplitShareButton,{user:o,file:n,onShowShare:this.handleSplitShareButtonShareClick,context:{surface:"previews"},variant:"primary",showEduTooltip:!0,onPresentInZoom:function(){return t.handlePresentInZoom(n,o)},isCollapsed:c});var u=_._("Share");return r.default.createElement(S.Button,{variant:"primary",className:a.default("share-button","control__button",{"control__button--collapsed":c}),onClick:this.handleShareButtonClick},c?r.default.createElement(m.ButtonIcon,{isPrimary:!0,name:"share","aria-label":u}):u)},c})(r.default.PureComponent);t.UnconnectedShareButton=g,t.ShareButton=o.connect(v)(g)});
//# sourceMappingURL=share_button.min.js-vflBbUIsM.map